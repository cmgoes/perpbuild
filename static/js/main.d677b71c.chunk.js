(this.webpackJsonpwallpetint=this.webpackJsonpwallpetint||[]).push([[0],{264:function(e,n,t){},265:function(e,n){},306:function(e,n){},308:function(e,n){},332:function(e,n){},334:function(e,n){},346:function(e,n){},347:function(e,n){},370:function(e,n){},373:function(e,n){},375:function(e,n){},480:function(e,n){},481:function(e,n){},490:function(e,n,t){},491:function(e,n,t){"use strict";t.r(n);var c,r=t(32),o=t.n(r),i=t(241),a=t.n(i),u=(t(264),t(0)),s=t(3),O=t(16),b=t(28),f=t(17),l=t(242),d=t.n(l),p=t(506),j=t(508),h=t(257);!function(e){e[e.OPTIMISM=10]="OPTIMISM",e[e.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI"}(c||(c={}));var v=c.OPTIMISM_GOERLI,I=t(48),w=o.a.createContext(null),m=function(){var e=Object(r.useContext)(w);if(!e)throw new Error("useWeb3Context() can only be used inside of <Web3ContextProvider />, please declare it at a higher level.");var n=e.onChainProvider;return Object(r.useMemo)((function(){return Object(f.a)({},n)}),[e])},g=function(e){var n=e.children,t=Object(r.useState)(!1),o=Object(O.a)(t,2),i=o[0],a=o[1],f=Object(r.useState)(v),l=Object(O.a)(f,2),m=l[0],g=(l[1],Object(r.useState)(v)),x=Object(O.a)(g,2),P=x[0],S=x[1],C=Object(r.useState)(""),M=Object(O.a)(C,2),k=M[0],T=M[1],E=Object(r.useState)("https://mainnet.optimism.io"),L=Object(O.a)(E,2),y=L[0],D=(L[1],Object(r.useState)(new p.a(y))),G=Object(O.a)(D,2),N=G[0],R=G[1],_=Object(r.useState)(new d.a({cacheProvider:!0,providerOptions:{walletconnect:{package:h.a,options:{rpc:Object(b.a)({},c.OPTIMISM_GOERLI,"https://mainnet.optimism.io")}}}})),W=Object(O.a)(_,1)[0],F=function(){return!!W&&!!W.cachedProvider},A=Object(r.useCallback)((function(e){e.on&&(e.on("accountsChanged",(function(){return setTimeout((function(){return window.location.reload()}),1)})),e.on("chainChanged",function(){var e=Object(s.a)(Object(u.a)().mark((function e(n){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.on("network",(function(e,n){n&&window.location.reload()})))}),[N]),B=function(){var e=Object(s.a)(Object(u.a)().mark((function e(n){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Number(n),S(t);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=Object(r.useCallback)(Object(s.a)(Object(u.a)().mark((function e(){var n,t,r,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.connect();case 2:return n=e.sent,A(n),t=new j.a(n,"any"),e.next=7,t.getNetwork().then((function(e){return Number(e.chainId)}));case 7:return r=e.sent,e.next=10,t.getSigner().getAddress();case 10:return o=e.sent,T(o),S(r),r===c.OPTIMISM_GOERLI&&R(t),a(!0),e.abrupt("return",t);case 16:case"end":return e.stop()}}),e)}))),[N,W,i]),J=Object(r.useCallback)(Object(s.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W.clearCachedProvider(),a(!1),setTimeout((function(){window.location.reload()}),1);case 3:case"end":return e.stop()}}),e)}))),[N,W,i]),U=Object(r.useMemo)((function(){return{connect:H,disconnect:J,hasCachedProvider:F,provider:N,connected:i,address:k,chainID:m,web3Modal:W,providerChainID:P}}),[H,J,F,N,i,k,m,W,P]);return Object(I.jsx)(w.Provider,{value:{onChainProvider:U},children:n})},x=t(27),P=t(510),S=t(85),C=t(15),M=t.n(C);var k=function(){var e=m(),n=e.connect,t=e.disconnect,c=e.connected,o=e.web3,i=(e.provider,e.providerChainID),a=e.checkWrongNetwork,b=Object(r.useState)(c),f=Object(O.a)(b,2),l=f[0],d=f[1],p="ETHUSD",j=new M.a(.02),h=new M.a(100),w=x.a.LONG,g="Connect Wallet",C=n;return l&&(g="Disconnect",C=t),l&&i!==v&&(g="Wrong network",C=function(){a()}),Object(r.useEffect)((function(){d(c)}),[o,c]),Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(Object(u.a)().mark((function e(){var n,t,c,r,o,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l||i!==v){e.next=11;break}return c=new P.a({chainId:S.c.OPTIMISM_GOERLI,providerConfigs:[{rpcUrl:"https://goerli.optimism.io/"}]}),console.log("ChainId",S.c.OPTIMISM_GOERLI),e.next=5,c.init();case 5:r=e.sent,o=null===(n=c.clearingHouse)||void 0===n?void 0:n.createPositionDraft({tickerSymbol:p,side:w,amountInput:h,isAmountInputBase:false}),console.log("Init perp",r),a=null===(t=c.clearingHouse)||void 0===t?void 0:t.openPosition(o,j),console.log("Position Draft",o),console.log("Perp position",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l,i]),Object(I.jsxs)("div",{className:"connect-button",style:{cursor:"pointer"},onClick:C,children:[Object(I.jsx)("p",{children:g}),!0===l&&Object(I.jsx)("p",{children:"SDK curie"})]})};t(490);var T=function(){return Object(I.jsx)("div",{className:"App",children:Object(I.jsx)(k,{})})},E=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,513)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,i=n.getTTFB;t(e),c(e),r(e),o(e),i(e)}))};a.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(g,{children:Object(I.jsx)(T,{})})}),document.getElementById("root")),E()}},[[491,1,2]]]);
//# sourceMappingURL=main.d677b71c.chunk.js.map