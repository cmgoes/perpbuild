{"version":3,"sources":["constants/blockchain.ts","hooks/web3Context.tsx","hooks/helpers/index.tsx","Header/index.tsx","container/trade/index.tsx","Pages/Trade/components/Sideswitcher.tsx","container/amm/index.tsx","Pages/Trade/components/Marketselector.tsx","Pages/Trade/components/PriceHeader.tsx","constants/number.ts","util/format.ts","hooks/useDebounce.ts","Pages/Trade/components/Collateral.tsx","Pages/Trade/components/Slippage.tsx","helpers/set-all.ts","store/slices/position-slice.ts","store/slices/messages-slice.ts","constants/messages.ts","helpers/sleep.ts","helpers/metamask-error-wrap.ts","Pages/Trade/components/SendTransaction.tsx","Pages/Positions/components/PositionList.tsx","Pages/Positions/index.tsx","Pages/Trade/index.tsx","components/Messages/index.tsx","App.tsx","reportWebVitals.ts","store/store.ts","components/Messages/snackbar.tsx","index.tsx"],"names":["Networks","DEFAULD_NETWORK","OPTIMISM","Web3Context","React","createContext","useWeb3Context","web3Context","useContext","Error","onChainProvider","useMemo","Web3ContextProvider","children","useState","connected","setConnected","chainID","providerChainID","setProviderChainID","address","setAddress","uri","StaticJsonRpcProvider","provider","setProvider","Web3Modal","cacheProvider","providerOptions","walletconnect","package","WalletConnectProvider","options","rpc","web3Modal","hasCachedProvider","cachedProvider","_initListeners","useCallback","rawProvider","on","setTimeout","window","location","reload","chain","changeNetwork","_newNetwork","oldNetwork","otherChainID","network","Number","connect","connectedProvider","Web3Provider","getNetwork","then","chainId","getSigner","getAddress","connectedAddress","disconnect","clearCachedProvider","Provider","value","ConnectMenu","web3","checkWrongNetwork","isConnected","buttonText","clickFunc","useEffect","AppBar","position","sx","backgroundColor","backgroundImage","py","px","borderBottom","Box","flexGrow","justifyContent","alignItems","ml","xs","md","display","Typography","variant","fontWeight","textAlign","color","Button","cursor","fontSize","onClick","pr","Trade","createContainer","PositionSide","LONG","side","setPositionSide","Big","slippage","setSlippage","collateral","setCollateral","_collateral","_setCollateral","PerpetualProtocol","SupportedChainIds","providerConfigs","rpcUrl","perpetualObject","SideSwitcher","useContainer","handleLongOnClick","handleShortOnClick","SHORT","ButtonGroup","size","border","width","AMM","marketticker","setMarketTicker","MarketSelector","open","setOpen","FormControl","m","InputLabel","shrink","left","Select","labelId","id","defaultValue","onClose","onOpen","label","onChange","event","target","map","market","MenuItem","PriceHeader","flexDirection","sm","borderRadius","mb","borderLeft","pl","xl","RegExp","formatInput","input","digits","firstDotIndex","indexOf","formattedString","split","filter","alphabet","index","join","includes","length","substr","useDebounce","delay","onBeforeDebounce","onAfterDebounce","debouncedValue","setDebouncedValue","handler","clearTimeout","Collateral","debouncedCollateral","handleOnInput","e","formattedValue","b_debouncedCollateral","eq","my","TextField","type","placeholder","InputLabelProps","InputProps","endAdornment","InputAdornment","borderColor","borderWidth","Slippage","_slippage","_setSlippage","debouncedSlippage","b_debouncedSlippage","setAll","state","properties","Object","keys","forEach","key","calcPositionDetails","createAsyncThunk","networkID","tickerSymbol","amountInput","isAmountInputBase","Promise","resevle","oppositeAmount","newPositionDraft","undefined","entryPrice","tradingFee","priceImpact","buyingPower","hasConnected","init","signer","clearingHouse","createPositionDraft","console","log","getEntryPrice","entryPriceBound","getTransactionFee","tradingFeeBound","getPriceImpact","priceImpactBound","getBuyingPower","buyingPowerBound","getOppositeAmountBound","oppositeAmountBound","toFixed","openedPositionDetails","dispatch","positions","getTakerPositionByTickerSymbol","close","isLoss","posSize","pendingValue","isProfit","pnlValue","openPrice","indexPrice","liquidationPrice","marginRatio","leverage","_posSize","sizeAbs","_side","getTotalPendingFundingPayments","_pendingValue","_isLoss","s","getTotalTakerUnrealizedPnlFromAllMarkets","_pnlValue","_isProfit","_openPrice","contractReader","getIndexPrice","baseAddress","_indexPrice","_liquidationPrice","getAccountMarginRatio","_marginRatio","getAccountLeverage","_leverage","positionsSlice","createSlice","name","initialState","isPositionOpened","isCalculated","isOpenedPositionCalculated","reducers","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","error","actions","createMessage","createSelector","severity","text","message","messagesSlice","info","warning","success","messages","sleep","seconds","resolve","metamaskErrorWrap","err","code","SendTransaction","useDispatch","outputSymbol","substring","_perpetualObject","useSelector","isDisabled","handleOpen","openPosition","openTx","transaction","wait","calcPosition","loadProvider","calcOpenedPosition","mt","disabled","mx","pb","paddingY","opacity","PositionList","handleClose","closePosition","closeTx","maxWidth","mr","TabPanel","props","other","role","hidden","a11yProps","Positions","setValue","Tabs","newValue","textColor","TabIndicatorProps","style","Tab","boxSizing","p","Messages","enqueueSnackbar","useSnackbar","JSON","stringify","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","store","configureStore","reducer","messagesReducer","positionsReducer","middleware","getDefaultMiddleware","serializableCheck","useStyles","makeStyles","root","minWidth","card","typography","fontFamily","actionRoot","padding","icons","marginLeft","expand","transform","transition","expandOpen","collapse","checkIcon","paddingRight","checkIconCopy","button","textTransform","errorWrap","marginTop","errorText","whiteSpace","maxHeight","overflow","background","SnackMessage","forwardRef","ref","classes","closeSnackbar","expanded","setExpanded","isCopy","setIsCopy","handleExpandClick","oldExpanded","handleDismiss","Card","classnames","CardActions","getIcon","IconButton","Collapse","in","timeout","unmountOnExit","Paper","onCopy","Providers","providers","reduceRight","component","ReactDOM","render","StrictMode","maxSnack","anchorOrigin","vertical","horizontal","content","parse","autoHideDuration","document","getElementById"],"mappings":"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","file":"static/js/main.8b8c9058.chunk.js","sourcesContent":["export const TOKEN_DECIMALS = 9;\r\n\r\nexport enum Networks {\r\n    // AVAX = 43114,\r\n    OPTIMISM = 10, // for mainnet\r\n    OPTIMISM_GOERLI = 420, // for optimism goerli\r\n}\r\n\r\nexport const DEFAULD_NETWORK = Networks.OPTIMISM;\r\n// export const DEFAULD_NETWORK = Networks.OPTIMISM_GOERLI;\r\n","import React, { useState, ReactElement, useContext, useMemo, useCallback } from \"react\";\r\nimport Web3Modal from \"web3modal\";\r\nimport { StaticJsonRpcProvider, JsonRpcProvider, Web3Provider } from \"@ethersproject/providers\";\r\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\r\nimport { getMainnetURI } from \"./helpers\";\r\n// import { DEFAULD_NETWORK } from \"../constants\";\r\nimport { Networks, DEFAULD_NETWORK } from \"../constants/blockchain\";\r\n// import { messages } from \"../../constants/messages\";\r\n// import { useDispatch } from \"react-redux\";\r\n// import { swithNetwork } from \"../helpers/switch-network\";\r\n\r\ntype onChainProvider = {\r\n    connect: () => Promise<Web3Provider>;\r\n    disconnect: () => void;\r\n    checkWrongNetwork: () => Promise<boolean>;\r\n    provider: JsonRpcProvider;\r\n    address: string;\r\n    connected: Boolean;\r\n    web3Modal: Web3Modal;\r\n    chainID: number;\r\n    web3?: any;\r\n    providerChainID: number;\r\n    hasCachedProvider: () => boolean;\r\n};\r\n\r\nexport type Web3ContextData = {\r\n    onChainProvider: onChainProvider;\r\n} | null;\r\n\r\nconst Web3Context = React.createContext<Web3ContextData>(null);\r\n\r\nexport const useWeb3Context = () => {\r\n    const web3Context = useContext(Web3Context);\r\n    if (!web3Context) {\r\n        throw new Error(\"useWeb3Context() can only be used inside of <Web3ContextProvider />, \" + \"please declare it at a higher level.\");\r\n    }\r\n    const { onChainProvider } = web3Context;\r\n    return useMemo(() => {\r\n        return { ...onChainProvider };\r\n    }, [web3Context]);\r\n};\r\n\r\nexport const useAddress = () => {\r\n    const { address } = useWeb3Context();\r\n    return address;\r\n};\r\n\r\nexport const Web3ContextProvider: React.FC<{ children: ReactElement }> = ({ children }) => {\r\n    // const dispatch = useDispatch();\r\n\r\n    const [connected, setConnected] = useState(false);\r\n    const [chainID, setChainID] = useState(DEFAULD_NETWORK);\r\n    const [providerChainID, setProviderChainID] = useState(DEFAULD_NETWORK);\r\n    const [address, setAddress] = useState(\"\");\r\n\r\n    const [uri, setUri] = useState(getMainnetURI());\r\n    const [provider, setProvider] = useState<JsonRpcProvider>(new StaticJsonRpcProvider(uri));\r\n\r\n    const [web3Modal] = useState<Web3Modal>(\r\n        new Web3Modal({\r\n            cacheProvider: true,\r\n            providerOptions: {\r\n                walletconnect: {\r\n                    package: WalletConnectProvider,\r\n                    options: {\r\n                        rpc: {\r\n                            [Networks.OPTIMISM]: getMainnetURI(),\r\n                            // [Networks.OPTIMISM_GOERLI]: getMainnetURI(),\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n    );\r\n\r\n    const hasCachedProvider = (): boolean => {\r\n        if (!web3Modal) return false;\r\n        if (!web3Modal.cachedProvider) return false;\r\n        return true;\r\n    };\r\n\r\n    const _initListeners = useCallback(\r\n        (rawProvider: JsonRpcProvider) => {\r\n            if (!rawProvider.on) {\r\n                return;\r\n            }\r\n\r\n            rawProvider.on(\"accountsChanged\", () => setTimeout(() => window.location.reload(), 1));\r\n\r\n            rawProvider.on(\"chainChanged\", async (chain: number) => {\r\n                changeNetwork(chain);\r\n            });\r\n\r\n            rawProvider.on(\"network\", (_newNetwork, oldNetwork) => {\r\n                if (!oldNetwork) return;\r\n                window.location.reload();\r\n            });\r\n        },\r\n        [provider],\r\n    );\r\n\r\n    const changeNetwork = async (otherChainID: number) => {\r\n        const network = Number(otherChainID);\r\n\r\n        setProviderChainID(network);\r\n    };\r\n\r\n    const connect = useCallback(async () => {\r\n        const rawProvider = await web3Modal.connect();\r\n\r\n        _initListeners(rawProvider);\r\n\r\n        const connectedProvider = new Web3Provider(rawProvider, \"any\");\r\n\r\n        const chainId = await connectedProvider.getNetwork().then(network => Number(network.chainId));\r\n        const connectedAddress = await connectedProvider.getSigner().getAddress();\r\n\r\n        setAddress(connectedAddress);\r\n\r\n        setProviderChainID(chainId);\r\n\r\n        if (chainId === Networks.OPTIMISM) {\r\n            setProvider(connectedProvider);\r\n        }\r\n        // if (chainId === Networks.OPTIMISM_GOERLI) {\r\n        //     setProvider(connectedProvider);\r\n        // }\r\n\r\n        setConnected(true);\r\n\r\n        return connectedProvider;\r\n    }, [provider, web3Modal, connected]);\r\n\r\n    // const checkWrongNetwork = async (): Promise<boolean> => {\r\n    //     if (providerChainID !== DEFAULD_NETWORK) {\r\n    //         const shouldSwitch = window.confirm(messages.switch_to_avalanche);\r\n    //         if (shouldSwitch) {\r\n    //             await swithNetwork();\r\n    //             window.location.reload();\r\n    //         }\r\n    //         return true;\r\n    //     }\r\n\r\n    //     return false;\r\n    // };\r\n\r\n    const disconnect = useCallback(async () => {\r\n        web3Modal.clearCachedProvider();\r\n        setConnected(false);\r\n\r\n        setTimeout(() => {\r\n            window.location.reload();\r\n        }, 1);\r\n    }, [provider, web3Modal, connected]);\r\n\r\n    const onChainProvider = useMemo(\r\n        () => ({\r\n            connect,\r\n            disconnect,\r\n            hasCachedProvider,\r\n            provider,\r\n            connected,\r\n            address,\r\n            chainID,\r\n            web3Modal,\r\n            providerChainID,            \r\n        }),\r\n        [connect, disconnect, hasCachedProvider, provider, connected, address, chainID, web3Modal, providerChainID],\r\n    );\r\n    //@ts-ignore\r\n    return <Web3Context.Provider value={{ onChainProvider }}>{children}</Web3Context.Provider>;\r\n};\r\n","export const getMainnetURI = (): string => {\r\n  return \"https://mainnet.optimism.io\";  \r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport {\r\n    AppBar,\r\n    Box,\r\n    Button,       \r\n    Typography,\r\n  } from \"@mui/material\";\r\nimport { useWeb3Context } from \"../hooks/web3Context\";\r\nimport { DEFAULD_NETWORK } from \"../constants/blockchain\";\r\nimport WalletIcon from '@mui/icons-material/Wallet';\r\n\r\nfunction ConnectMenu() {\r\n    const { connect, disconnect, connected, web3, address, provider, providerChainID, checkWrongNetwork } = useWeb3Context();    \r\n    const [isConnected, setConnected] = useState(connected);        \r\n\r\n    let buttonText = \"Connect\";\r\n    let clickFunc: any = connect;   \r\n\r\n    if (isConnected) {\r\n        buttonText = \"Disconnect\";\r\n        clickFunc = disconnect;\r\n    }    \r\n\r\n    if (isConnected && providerChainID !== DEFAULD_NETWORK) {\r\n        buttonText = \"Wrong network\";\r\n        // buttonStyle = { backgroundColor: \"rgb(255, 67, 67)\" };\r\n        clickFunc = () => {\r\n            checkWrongNetwork();\r\n        };\r\n    }\r\n\r\n    useEffect(() => {\r\n        setConnected(connected);\r\n    }, [web3, connected]);    \r\n\r\n    return (\r\n        <AppBar\r\n            position=\"static\"\r\n            sx={{\r\n                backgroundColor: 'rgba(9, 9, 10, 1)',\r\n                backgroundImage: \"none\",\r\n                py: 2,\r\n                px: 2,\r\n                borderBottom: '1px solid rgba(255, 255, 255, 0.16)'\r\n            }}\r\n        >\r\n            \r\n            <Box\r\n                flexGrow={1}          \r\n                justifyContent=\"space-between\"         \r\n                alignItems=\"center\" \r\n                sx={{ ml: { xs: \"20px\", md: \"60px\" }, display: \"flex\"                        \r\n                }}\r\n            >\r\n                <Typography\r\n                    variant=\"h4\"\r\n                    fontWeight=\"700\"\r\n                    textAlign=\"center\"\r\n                    color=\"white\"                        \r\n                >\r\n                    Perp V2\r\n                </Typography>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    sx={{\r\n                        cursor: 'pointer', backgroundColor: 'transparent', \r\n                        color: 'rgba(101, 230, 255, 1)', fontSize: '16px',                            \r\n                        '&:hover': {backgroundColor: 'rgba(101, 239, 255, 0.12)'}\r\n                    }}\r\n                    onClick={clickFunc}\r\n                >\r\n                    <WalletIcon sx={{color: 'rgba(101, 230, 255, 1)', pr: 1}}/>\r\n                    {buttonText}\r\n                </Button>                \r\n            </Box>            \r\n        </AppBar>\r\n    );\r\n}\r\n\r\nexport default ConnectMenu;\r\n","import { useMemo, useState } from \"react\"\nimport { createContainer } from \"unstated-next\"\nimport { PerpetualProtocol, PositionSide, SupportedChainIds } from \"@perp/sdk-curie\";\nimport Big from \"big.js\"\n\nexport const Trade = createContainer(useTrade)\n\nfunction useTrade() {\n    /* long = 1, short = 0 */\n    const [side, setPositionSide] = useState<PositionSide>(PositionSide.LONG);\n\n    /* min: 1, max: 10 */\n    // const [leverage, setLeverage] = useState<number>(1)\n\n    /* min: 0% */\n    const [slippage, setSlippage] = useState<Big>(new Big(0.02));\n\n    const [collateral, setCollateral] = useState<Big>(new Big(0));  \n    const [_collateral, _setCollateral] = useState<string>('');    \n\n    const [perpetualObject, setPerpetualObject] = useState<PerpetualProtocol>(new PerpetualProtocol({\n\t\t// chainId: SupportedChainIds.OPTIMISM_GOERLI,\n\t\tchainId: SupportedChainIds.OPTIMISM,   \n\t\t// chainId: 420,                 \n\t\tproviderConfigs: [\n\t\t\t{\n\t\t\t\t// rpcUrl: \"https://mainnet.optimism.io\",\n                rpcUrl: \"https://optimism-mainnet.infura.io/v3/dd583584ac144f7984ac22cb0595646e\",\n                // rpcUrl: \"https://optimism-mainnet.infura.io\",                \n                // rpcUrl: \"https://opt-mainnet.g.alchemy.com/v2/NqisNVbk-thJAQJMZKXdtIy-Vlyfryj-\",                \n\t\t\t\t// rpcUrl: \"https://goerli.optimism.io/\",\t\t\t\t\t\t\t\t\n\t\t\t},\n\t\t],\n\t}));\n\n    return useMemo(\n        () => ({\n            side,\n            setPositionSide,            \n            slippage,\n            setSlippage,\n            collateral,\n            setCollateral, \n            _collateral,\n            _setCollateral,            \n            perpetualObject,            \n        }),\n        [side, slippage, collateral, _collateral],\n    )\n}\n","import {useState, useCallback, useEffect} from \"react\";\n\nimport {\n\tAppBar,\n\tBox,\n\tButtonGroup,\n\tButton,\n\tContainer,    \n\tTypography,\n} from \"@mui/material\";\n\nimport { PositionSide } from \"@perp/sdk-curie\";\nimport {Trade} from '../../../container/trade';\n\n\nfunction SideSwitcher() {\n\tconst {side, setPositionSide} = Trade.useContainer();\t\n\tconst handleLongOnClick = useCallback(() => {\n\t\tif (side !== PositionSide.LONG) {\n\t\t\tsetPositionSide(PositionSide.LONG);\t\t\t\n\t\t}\t\t\n\t}, [setPositionSide, side])\n\n\tconst handleShortOnClick = useCallback(() => {\n\t\tif (side !== PositionSide.SHORT) {\n\t\t\tsetPositionSide(PositionSide.SHORT);\t\t\t\n\t\t}\t\t\t\t\n\t}, [setPositionSide, side])\t\n\n\treturn (\n\t\t<ButtonGroup size=\"large\" sx={{py: '12px', border: 'none', width: '100%'}}>\n\t\t\t<Button \n\t\t\t\tsx={{\n\t\t\t\t\twidth: '50%',\t\t\t\t\t\n\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\tbackgroundColor: \n\t\t\t\t\t\tside === PositionSide.LONG? '#52c41a' : 'gray',\n\t\t\t\t\tcolor: \n\t\t\t\t\t\tside === PositionSide.LONG? 'white' : 'black',\n\t\t\t\t\tborder: '1px solid transparent',\n\t\t\t\t\t'&: hover': {\n\t\t\t\t\t\tbackgroundColor: '#49bc10',\t\n\t\t\t\t\t\tborder: '1px solid transparent'\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t}}\n\t\t\t\tonClick={handleLongOnClick}\n\t\t\t>\n\t\t\t\tLong\n\t\t\t</Button>\n\t\t\t<Button \n\t\t\t\tsx={{\n\t\t\t\t\twidth: '50%',\t\t\t\t\t\n\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\tbackgroundColor: \n\t\t\t\t\t\tside === PositionSide.SHORT? '#fa672d' : 'gray',\n\t\t\t\t\tcolor: \n\t\t\t\t\t\tside === PositionSide.SHORT? 'white' : 'black',\n\t\t\t\t\tborder: '1px solid transparent',\n\t\t\t\t\t'&: hover': {\n\t\t\t\t\t\tbackgroundColor: '#f85819',\t\n\t\t\t\t\t\tborder: '1px solid transparent'\t\t\t\t\t\n\t\t\t\t\t}\t\t\n\t\t\t\t}}\n\t\t\t\tonClick={handleShortOnClick}\n\t\t\t>\n\t\t\t\tShort\n\t\t\t</Button>\t\t\t\n\t\t</ButtonGroup>\n\n\t\t\n\t)\n}\n\nexport default SideSwitcher;","import { useMemo, useState } from \"react\"\nimport { createContainer } from \"unstated-next\"\n\nexport const AMM = createContainer(useAMM)\n\nfunction useAMM() {    \n    const [marketticker, setMarketTicker] = useState<string>('ETHUSD');   \n\n    return useMemo(\n        () => ({\n            marketticker,\n            setMarketTicker\n        }),\n        [marketticker, setMarketTicker],\n    )\n}\n","import React, { useEffect } from \"react\"\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Box from '@mui/material/Box';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport {AMM} from \"../../../container/amm\";\n\nfunction MarketSelector() {\n\tconst MarketList = [\"BTCUSD\", \"ETHUSD\", \"BNBUSD\", \"AVAXUSD\"];  \t\n\n\tconst {marketticker, setMarketTicker} = AMM.useContainer();\n\tconst [open, setOpen] = React.useState(false);\n\n  const handleChange = (event: SelectChangeEvent<typeof marketticker>) => {\n    setMarketTicker(event.target.value);\t\t\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  return (\n    <>      \n      <FormControl variant=\"standard\" sx={{ m: 1, width: '300px' }}>\n        <InputLabel size=\"small\" shrink sx={{\n          left: '120px',\n          color: 'rgba(145, 153, 167, 1)', \n          '&.Mui-focused': {color: 'rgba(145, 153, 167, 1)'}\n        }}>\n          Market\n        </InputLabel>\n        <Select\n          labelId=\"demo-controlled-open-select-label\"\n          id=\"demo-controlled-open-select\"\n          open={open}\n          defaultValue={\"ETHUSD\"}\n          onClose={handleClose}\n          onOpen={handleOpen}        \n          label=\"Market\"\n          onChange={handleChange}\n          sx={{'&:hover:not(.Mui-disabled):before': {borderBottom: 'none'},\n            '& > svg': {color: 'white'},\n            '& ul': {backgroundColor: 'rgba(9, 9, 10, 1)'},\n            '&::before': {border: 'none'}, color: 'white',\n            '&::after': {borderBottom: 'none'}\n          }}          \n        >          \n\t\t\t\t\t{MarketList.map((market) => (\n\t\t\t\t\t\t<MenuItem key={market} value={market} sx={{color: 'black'}}>{market}</MenuItem>\t\n\t\t\t\t\t))}\n        </Select>\n      </FormControl>\n    </>\n  );\n}\n\nexport default MarketSelector\n","import {useState, useCallback, useEffect} from \"react\";\n\nimport {\n\tAppBar,\n\tBox,\n\tButtonGroup,\n\tButton,\n\tContainer,    \n\tTypography,\n} from \"@mui/material\";\n\nimport MarketSelector from \"./Marketselector\";\n\nfunction PriceHeader() {\n\treturn (\n\t\t<Box sx={{display: 'flex', justifyContent: 'flex-start', alignItems: 'center', \n\t\t\tbackgroundColor: 'rgba(29, 29, 29, 1)',\n\t\t\tflexDirection: {xs: 'column', sm: 'row'},\n\t\t\tborderRadius: '10px',\n\t\t\tpy: '4px',\n\t\t\tmb: 1\t\t\t\n\t\t}}>\n\t\t\t<MarketSelector />\n\t\t\t<Box sx={{display: 'flex', justifyContent: 'flex-start',\n\t\t\t\tborderLeft: {sm: '1px solid rgba(145, 153, 167, 0.8)'},\n\t\t\t\tpl: {sm: 2, md: 3, xl: 4},\n\t\t\t\tpy: 1\n\t\t\t}}>\n\t\t\t\t<Box sx={{pr: {xs: 2, md: 3, xl: 4}}}>\n\t\t\t\t\t<Typography sx={{fontSize: '0.75rem', color: 'rgba(145, 153, 167, 1)'}}>Index Price</Typography>\n\t\t\t\t\t<Typography sx={{color: 'rgb(255, 255, 255)'}}>1266.0</Typography>\n\t\t\t\t</Box>\n\t\t\t\t<Box sx={{pr: {xs: 2, md: 3, xl: 4}}}>\n\t\t\t\t\t<Typography sx={{fontSize: '0.75rem', color: 'rgba(145, 153, 167, 1)'}}>Volume (24h)</Typography>\n\t\t\t\t\t<Typography sx={{color: 'rgb(255, 255, 255)'}}>5,798,410.3</Typography>\n\t\t\t\t</Box>\n\t\t\t\t<Box sx={{pr: {xs: 2, md: 3, xl: 4}}}>\n\t\t\t\t\t<Typography sx={{fontSize: '0.75rem', color: 'rgba(145, 153, 167, 1)'}}>Funding Rate (8h)</Typography>\n\t\t\t\t\t<Typography sx={{color: 'rgb(255, 255, 255)'}}>0.0071%</Typography>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Box>\n\t)\n}\n\nexport default PriceHeader;","import { Big } from \"big.js\"\nimport { BigNumber } from \"ethers\"\n\nexport const ERC20_DECIMAL_DIGITS = 18\nexport const USDC_DECIMAL_DIGITS = 6\n\nexport const USDC_PRECISION = 2\nexport const Slippage_PRECISION = 2\n\nexport const BIG_ZERO = new Big(0)\n\nexport interface Decimal {\n    d: BigNumber\n}\n","import { ERC20_DECIMAL_DIGITS, USDC_PRECISION } from \"../constants/number\"\n\nimport Big from \"big.js\"\nimport { BigNumber } from \"ethers\"\nimport { formatUnits } from \"ethers/lib/utils\"\n\nexport interface Decimal {\n    d: BigNumber\n}\n\n// Big Number to...\nexport function bigNum2FixedStr(\n    val: BigNumber,\n    decimals: number = ERC20_DECIMAL_DIGITS,\n    digits: number = USDC_PRECISION,\n): string {\n    return Number.parseFloat(formatUnits(val, decimals)).toFixed(digits)\n}\n\nexport function bigNum2Big(val: BigNumber, decimals: number = ERC20_DECIMAL_DIGITS): Big {\n    return new Big(val.toString()).div(new Big(10).pow(decimals))\n}\n\nexport function bigNum2Decimal(val: BigNumber): Decimal {\n    return { d: val }\n}\n\n// Big to...\nexport function big2BigNum(val: Big, decimals: number = ERC20_DECIMAL_DIGITS): BigNumber {\n    return BigNumber.from(val.mul(new Big(10).pow(decimals)).toFixed(0))\n}\n\nexport function big2Decimal(val: Big): Decimal {\n    return {\n        d: big2BigNum(val, ERC20_DECIMAL_DIGITS),\n    }\n}\n\n// Decimal to...\nexport function decimal2Big(decimal: Decimal): Big {\n    return bigNum2Big(decimal.d)\n}\n\n// check regex 101 online, https://regex101.com/r/EeneAE/1\n// to understand this regex\nconst regexUSLocaleNumber = new RegExp(/\\d(?=(\\d{3})+\\.)/g)\n\n// format number like 1000 => 1,000\nexport function numberWithCommas(number: string = \"\") {\n    return number.replace(regexUSLocaleNumber, \"$&,\")\n}\n\nexport function numberWithCommasUsdc(number: Big = new Big(0)) {\n    return numberWithCommas(number.toFixed(USDC_PRECISION))\n}\n\n// TODO: check is valid number\n// TODO: check is positive\n// TODO: use in slippage if possible\n// ex: if the input is 1.005 and the digits is 2, the function will return 1.00\nexport function formatInput(input: string, digits: number): string {\n    const firstDotIndex = input.indexOf(\".\")\n    const formattedString = input\n        .split(\"\")\n        .filter((alphabet, index) => {\n            return alphabet !== \".\" || index === firstDotIndex\n        })\n        .join(\"\")\n    return formattedString.includes(\".\") && formattedString.length > formattedString.indexOf(\".\") + (digits + 1)\n        ? formattedString.substr(0, formattedString.indexOf(\".\") + (digits + 1))\n        : formattedString\n}\n","import { useEffect, useState } from \"react\"\n\nconst DEFAULT_DELAY = 200\n\ninterface DebounceArgs<T> {\n    value: T\n    delay?: number\n    onBeforeDebounce?: Function\n    onAfterDebounce?: Function\n}\n\nexport function useDebounce<T>({ value, delay = DEFAULT_DELAY, onBeforeDebounce, onAfterDebounce }: DebounceArgs<T>) {\n    const [debouncedValue, setDebouncedValue] = useState<T>(value)\n\n    useEffect(() => {\n        if (onBeforeDebounce) {\n            onBeforeDebounce(value)\n        }\n\n        const handler = setTimeout(() => {\n            setDebouncedValue(value)\n            if (onAfterDebounce) {\n                onAfterDebounce(value)\n            }\n        }, delay)\n\n        return () => {\n            clearTimeout(handler)\n        }\n    }, [value, delay, onBeforeDebounce, onAfterDebounce])\n\n    return debouncedValue\n}\n","import {useState, useMemo, useCallback, useEffect} from \"react\";\n\nimport {\t\n\tBox,\t\t \n\tTextField,\n\tInputAdornment\t\n} from \"@mui/material\";\n\nimport Big from \"big.js\"\n\nimport {Trade} from '../../../container/trade';\nimport { USDC_PRECISION } from \"../../../constants/number\";\nimport { formatInput } from \"../../../util/format\"\n\nimport { useDebounce } from \"../../../hooks/useDebounce\"\n\nfunction Collateral() {\n\tconst {collateral, setCollateral} = Trade.useContainer();\t\n\tconst {_collateral, _setCollateral} = Trade.useContainer();\t\n\n\tconst debouncedCollateral = useDebounce({ value: _collateral, delay: 800 });\n\t\n\tconst handleOnInput = useCallback(\n\t\te => {\n\t\t\tconst value = e.target.value;\n\t\t\tif (value >= 0) {\n\t\t\t\tconst formattedValue = formatInput(value, USDC_PRECISION);\n\t\t\t\t_setCollateral(formattedValue);\n\t\t\t}\n\t\t},\n\t\t[_setCollateral],\n\t)\n\n\tuseEffect(() => {\n\t\t/* reset collateral to null */\n\t\tif (debouncedCollateral === \"\") {\n\t\t\t// setCollateral(null);\n\t\t\treturn;\n\t\t}\n\t\t/* detect if the value is different */\n\t\tconst b_debouncedCollateral = new Big(debouncedCollateral);\n\t\tif (!collateral?.eq(b_debouncedCollateral)) {\n\t\t\tsetCollateral(b_debouncedCollateral);\n\t\t}\n\t}, [collateral, debouncedCollateral, setCollateral]);\n\t\n\n\treturn useMemo(\n\t\t() => (\n\t\t<Box sx={{my: 2}}>\n\t\t\t<TextField\n\t\t\t\tid=\"outlined-name\"\n\t\t\t\tlabel=\"Collateral\"\n\t\t\t\ttype=\"number\"\n\t\t\t\tvalue={_collateral}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\t\t\t\t\n\t\t\t\tInputProps={{\n\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">USDC</InputAdornment>,\n\t\t\t\t}}\n\t\t\t\tonChange={handleOnInput}\n\t\t\t\tsx={{width: '100%',\n\t\t\t\t\t'& > label, & .MuiFormLabel-root.Mui-focused': {color: '#a3a8b7'},\n\t\t\t\t\t'& > div': {color: 'white'},\n\t\t\t\t\t'& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7',\n\t\t\t\t\t\tborderWidth: '1px'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiTypography-root': {color: '#a3a8b7'},\n\t\t\t\t\t'& fieldset.MuiOutlinedInput-notchedOutline': {borderColor: 'rgba(255, 255, 255, 0.16)'}\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Box>\t\t\n\t\t), [_collateral, handleOnInput]\n\t)\n}\n\nexport default Collateral;","import {useState, useMemo, useCallback, useEffect} from \"react\";\n\nimport {\t\n\tBox,\t\t \n\tTextField,\n\tInputAdornment\t\n} from \"@mui/material\";\n\nimport Big from \"big.js\"\n\nimport {Trade} from '../../../container/trade';\nimport { Slippage_PRECISION } from \"../../../constants/number\";\nimport { formatInput } from \"../../../util/format\"\n\nimport { useDebounce } from \"../../../hooks/useDebounce\"\n\nfunction Slippage() {\n\tconst {slippage, setSlippage} = Trade.useContainer();\t\n\tconst [_slippage, _setSlippage] = useState<string>(\"\");\t\n\n\tconst debouncedSlippage = useDebounce({ value: _slippage, delay: 800 });\n\t\n\tconst handleOnInput = useCallback(\n\t\te => {\n\t\t\tconst value = e.target.value;\n\t\t\tif (value >= 0) {\n\t\t\t\tconst formattedValue = formatInput(value, Slippage_PRECISION);\n\t\t\t\t_setSlippage(formattedValue);\n\t\t\t}\n\t\t},\n\t\t[_setSlippage],\n\t)\n\n\tuseEffect(() => {\n\t\t/* reset collateral to null */\n\t\tif (debouncedSlippage === \"\") {\n\t\t\t// setSlippage(null);\n\t\t\treturn;\n\t\t}\n\t\t/* detect if the value is different */\n\t\tconst b_debouncedSlippage = new Big(debouncedSlippage);\n\t\tif (!slippage?.eq(b_debouncedSlippage)) {\n\t\t\tsetSlippage(b_debouncedSlippage);\n\t\t}\n\t}, [slippage, debouncedSlippage, setSlippage]);\n\t\n\n\treturn useMemo(\n\t\t() => (\n\t\t<Box sx={{my: 2}}>\n\t\t\t<TextField\n\t\t\t\tid=\"outlined-name\"\n\t\t\t\tlabel=\"Slippage\"\n\t\t\t\ttype=\"number\"\n\t\t\t\tvalue={_slippage}\n\t\t\t\tplaceholder=\"0.02\"\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\t\t\t\t\n\t\t\t\tInputProps={{\n\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">%</InputAdornment>,\n\t\t\t\t}}\n\t\t\t\tonChange={handleOnInput}\n\t\t\t\tsx={{width: '100%',\n\t\t\t\t\t'& > label, & .MuiFormLabel-root.Mui-focused': {color: '#a3a8b7'},\n\t\t\t\t\t'& > div': {color: 'white'},\n\t\t\t\t\t'& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7',\n\t\t\t\t\t\tborderWidth: '1px'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiTypography-root': {color: '#a3a8b7'},\n\t\t\t\t\t'& fieldset.MuiOutlinedInput-notchedOutline': {borderColor: 'rgba(255, 255, 255, 0.16)'}\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Box>\t\t\n\t\t), [_slippage, handleOnInput]\n\t)\n}\n\nexport default Slippage;","export const setAll = (state: any, properties: any) => {\n    const props = Object.keys(properties);\n    props.forEach(key => {\n        state[key] = properties[key];\n    });\n};\n","import { createSlice,createAsyncThunk, createSelector } from \"@reduxjs/toolkit\";\nimport { JsonRpcProvider, StaticJsonRpcProvider } from \"@ethersproject/providers\";\nimport { Networks, DEFAULD_NETWORK } from \"../../constants/blockchain\";\nimport { setAll } from \"../../helpers/set-all\";\nimport { PerpetualProtocol, PositionSide, PositionDraft } from \"@perp/sdk-curie\";\nimport Big from \"big.js\";\nimport { RootState } from \"../store\";\n\ninterface ICalcPositionDetails {    \n  networkID: Networks;\n  provider: StaticJsonRpcProvider | JsonRpcProvider;\n\tperpetualObject: PerpetualProtocol;\n\tside: PositionSide;\n\tslippage: Big;\n\ttickerSymbol: string;\n\tamountInput: Big;\n}\n\nexport const calcPositionDetails = createAsyncThunk(\"position/calcPositionDetails\", \n\tasync({networkID, provider, perpetualObject, side, slippage, tickerSymbol, amountInput}: ICalcPositionDetails) => {\t\n\t\tconst isAmountInputBase = false;\t\t\n\t\tlet oppositeAmountBound: Big;\t\n\t\tlet newPositionDraft: PositionDraft<string> | undefined;\n\t\tlet entryPriceBound: Big;\n\t\tlet tradingFeeBound: Big;\n\t\tlet priceImpactBound: Big;\n\t\tlet buyingPowerBound: Big;\n\n\t\tif( networkID === DEFAULD_NETWORK ) {\t\t\t\t\t\t\n\t\t\tif(amountInput === null) {\n\t\t\t\treturn new Promise<any>(resevle => {\n\t\t\t\t\tresevle({\n\t\t\t\t\t\toppositeAmount: \"\",\t\t\t\t\t\n\t\t\t\t\t\tnewPositionDraft: undefined,\n\t\t\t\t\t\tentryPrice: \"\",\n\t\t\t\t\t\ttradingFee: \"\",\n\t\t\t\t\t\tpriceImpact: \"\",\n\t\t\t\t\t\tbuyingPower: \"\",\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(amountInput.eq(0)) {\n\t\t\t\treturn new Promise<any>(resevle => {\n\t\t\t\t\tresevle({\n\t\t\t\t\t\toppositeAmount: \"0\",\t\t\t\t\t\n\t\t\t\t\t\tnewPositionDraft: undefined,\n\t\t\t\t\t\tentryPrice: \"\",\n\t\t\t\t\t\ttradingFee: \"\",\n\t\t\t\t\t\tpriceImpact: \"\",\n\t\t\t\t\t\tbuyingPower: \"\",\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tconst hasconnected = perpetualObject.hasConnected();  \n\t\t\tif(hasconnected === false) {\n\t\t\t\tawait perpetualObject.init();\n\t\t\t\tawait perpetualObject.connect({ signer: provider.getSigner() });\t\n\t\t\t}\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\tnewPositionDraft = perpetualObject.clearingHouse?.createPositionDraft({\n\t\t\t\ttickerSymbol,\n\t\t\t\tside,\n\t\t\t\tamountInput,\n\t\t\t\tisAmountInputBase\n\t\t\t});\t\n\t\t\tconsole.log(\"NewPosition::\", newPositionDraft);\t\n\t\t\t\n\t\t\tentryPriceBound = await newPositionDraft!.getEntryPrice();\n\t\t\ttradingFeeBound = await newPositionDraft!.getTransactionFee();\n\t\t\tpriceImpactBound = await newPositionDraft!.getPriceImpact();\n\t\t\tbuyingPowerBound = await newPositionDraft!.getBuyingPower();\t\n\t\t\toppositeAmountBound = await newPositionDraft!.getOppositeAmountBound(slippage);\t\t\t\t\t\n\t\t}\n\t\treturn {\n\t\t\toppositeAmount: oppositeAmountBound!.toFixed(7),\t\t\n\t\t\tnewPositionDraft,\n\t\t\tentryPrice: entryPriceBound!.toFixed(2),\n\t\t\ttradingFee: tradingFeeBound!.toFixed(8),\n\t\t\tpriceImpact: priceImpactBound!.toFixed(5),\n\t\t\tbuyingPower: buyingPowerBound!.toFixed(4),\n\t\t};\n});\n\ninterface IOpenedPositionDetails {    \n  networkID: Networks;\n  provider: StaticJsonRpcProvider | JsonRpcProvider;\n\tperpetualObject: PerpetualProtocol;\t\n\ttickerSymbol: string;\t\n}\n\nexport const openedPositionDetails = createAsyncThunk(\"position/openedPositionDetails\", \n\tasync({networkID, provider, perpetualObject, tickerSymbol}: IOpenedPositionDetails, { dispatch }) => {\n\t\tif( networkID === DEFAULD_NETWORK ) {        \n\t\t\tconst hasconnected = perpetualObject.hasConnected(); \t\t\t\n\t\t\tif(hasconnected === false) {\n\t\t\t\tawait perpetualObject.init();\n\t\t\t\tawait perpetualObject.connect({ signer: provider.getSigner() });\n\t\t\t}\t\t\n\t\t\tconst position = await perpetualObject?.positions?.getTakerPositionByTickerSymbol(tickerSymbol);  \n\t\t\tif(position !== undefined) {\n\t\t\t\tdispatch(open());          \n\t\t\t} else {\n\t\t\t\tdispatch(close());\t\t\t\t\n\t\t\t\treturn new Promise<any>(resevle => {\n\t\t\t\t\tresevle({\n\t\t\t\t\t\tisLoss: false,\t\t\t\t\t\n\t\t\t\t\t\tposSize: '',\n\t\t\t\t\t\tside: PositionSide.LONG,\n\t\t\t\t\t\tpendingValue: '',\n\t\t\t\t\t\tisProfit: false,\n\t\t\t\t\t\tpnlValue: '',\n\t\t\t\t\t\topenPrice: '',\n\t\t\t\t\t\tindexPrice: '',\n\t\t\t\t\t\tliquidationPrice: '',\n\t\t\t\t\t\tmarginRatio: '',\n\t\t\t\t\t\tleverage: ''\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t});\t\t\t\t\n\t\t\t}\n\t\t\tconsole.log(\"Position pass!\");\n\t\t\tconst _posSize = position!.sizeAbs.toFixed(8);\t\t\t\n\t\t\tconst _side = position!.side;\t\t\t \n\t\t\tconst _pendingValue = await perpetualObject?.positions?.getTotalPendingFundingPayments(); \n\t\t\tlet _isLoss;      \n\t\t\tif(_pendingValue![tickerSymbol].s !== -1) {\n\t\t\t\t_isLoss = false;\n\t\t\t} else {\n\t\t\t\t_isLoss = true;         \n\t\t\t}\t\t\t\n\t\t\t\n\t\t\tconst _pnlValue = await perpetualObject?.positions?.getTotalTakerUnrealizedPnlFromAllMarkets(); \n\t\t\tlet _isProfit;  \n\t\t\tif(_pnlValue!.s !== -1) {\n\t\t\t\t_isProfit = true;\n\t\t\t} else {\n\t\t\t\t_isProfit = false;         \n\t\t\t}      \n\t\t\tconst _openPrice = position!.entryPrice.toFixed(2);\n\t\t\tconst _indexPrice = await perpetualObject.contractReader.getIndexPrice(position!.market.baseAddress);         \n\t\t\tconst _liquidationPrice = position!.liquidationPrice; \t\t\t\n\t\t\t\n\t\t\tconst _marginRatio = await perpetualObject?.positions?.getAccountMarginRatio();\n\t\t\tconst _leverage = await perpetualObject?.positions?.getAccountLeverage();\n\n\t\t\treturn {\n\t\t\t\tisLoss: _isLoss,\n\t\t\t\tposSize: _posSize,\n\t\t\t\tside: _side,\n\t\t\t\tpendingValue: _pendingValue![tickerSymbol].toFixed(4),\n\t\t\t\tisProfit: _isProfit,\n\t\t\t\tpnlValue: _pnlValue!.toFixed(4),\n\t\t\t\topenPrice: _openPrice,\n\t\t\t\tindexPrice: _indexPrice.toFixed(2),\n\t\t\t\tliquidationPrice: _liquidationPrice!.toFixed(1),\n\t\t\t\tmarginRatio: (Number(_marginRatio!.toFixed(4))*100).toFixed(1),\n\t\t\t\tleverage: _leverage!.toFixed(2)\n\t\t\t}\n\t\t}\n});\t\n\nconst initialState = {\n\tisPositionOpened: false,\t\n\tisCalculated: false,\n\tisOpenedPositionCalculated: false\n}\n\nexport interface IPositionSlice {\n\tisPositionOpened: boolean;\t\n\tisCalculated: boolean;\n\tisOpenedPositionCalculated: boolean;\n\toppositeAmount: string,\t\n\tnewPositionDraft: PositionDraft<string> | undefined,\n\tentryPrice: string,\n\ttradingFee: string,\n\tpriceImpact: string,\n\tbuyingPower: string,\n\tisLoss: boolean,\n\tposSize: string,\n\tside: PositionSide,\n\tpendingValue: string,\n\tisProfit: boolean,\n\tpnlValue: string,\n\topenPrice: string,\n\tindexPrice: string,\n\tliquidationPrice: string,\n\tmarginRatio: string,\n\tleverage: string\n}\n\nconst positionsSlice = createSlice({\n\tname: \"positions\",\n\tinitialState,\n\treducers: {\n\t\topen(state)\t{\n\t\t\tstate.isPositionOpened = true;\n\t\t\tstate.isCalculated = false;\n\t\t},\t\t\n\t\tclose(state) {\n\t\t\tstate.isPositionOpened = false;\n\t\t\tstate.isOpenedPositionCalculated = false;\n\t\t}\t\t\n\t},\n\textraReducers: builder => {\n\t\tbuilder\n\t\t\t.addCase(calcPositionDetails.pending, state => {\n\t\t\t\tstate.isCalculated = false;\n\t\t\t})\n\t\t\t.addCase(calcPositionDetails.fulfilled, (state, action) => {\n\t\t\t\tsetAll(state, action.payload);\n\t\t\t\tstate.isCalculated = true;\n\t\t\t})\n\t\t\t.addCase(calcPositionDetails.rejected, (state, { error }) => {\n\t\t\t\tstate.isCalculated = false;\n\t\t\t\tconsole.log(error);\n\t\t\t})\n\t\t\t.addCase(openedPositionDetails.pending, state => {\t\t\t\n\t\t\t\tstate.isOpenedPositionCalculated = false;\t\n\t\t\t})\n\t\t\t.addCase(openedPositionDetails.fulfilled, (state, action) => {\n\t\t\t\tsetAll(state, action.payload);\t\t\t\t\n\t\t\t\tstate.isOpenedPositionCalculated = true;\t\t\t\t\n\t\t\t})\n\t\t\t.addCase(openedPositionDetails.rejected, (state, { error }) => {\t\t\t\t\n\t\t\t\tstate.isOpenedPositionCalculated = false;\n\t\t\t\tconsole.log(error);\n\t\t\t})\n\t},    \n});\n\nconst baseInfo = (state: RootState) => state.positions;\nexport const { open, close } = positionsSlice.actions;\n\nexport default positionsSlice.reducer;\n\nexport const getAppState = createSelector(baseInfo, positions => positions);","import { AlertColor } from \"@mui/material/Alert\";\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport type Message = IMessage & {\n    severity: AlertColor;\n};\n\nexport interface MessagesState {\n    message: Message | null;\n}\n\ninterface IMessage {\n    text: string;\n    error?: any;\n}\n\n// Adds a message to the store\nconst createMessage = function (state: MessagesState, severity: AlertColor, text: IMessage) {\n    const message: Message = {\n        severity,\n        ...text,\n    };\n    state.message = message;\n};\nconst initialState: MessagesState = {\n    message: null,\n};\nconst messagesSlice = createSlice({\n    name: \"messages\",\n    initialState,\n    reducers: {\n        // Creates an error message\n        error(state, action: PayloadAction<IMessage>) {\n            createMessage(state, \"error\", action.payload);\n        },\n        // Creates an information message\n        info(state, action: PayloadAction<IMessage>) {\n            createMessage(state, \"info\", action.payload);\n        },\n        warning(state, action: PayloadAction<IMessage>) {\n            createMessage(state, \"warning\", action.payload);\n        },\n        success(state, action: PayloadAction<IMessage>) {\n            createMessage(state, \"success\", action.payload);\n        },\n        // Closes a message\n        close(state) {\n            state.message = null;\n        },\n    },\n});\n\nexport const { error, info, close, warning, success } = messagesSlice.actions;\n\nexport default messagesSlice.reducer;\n","export const messages = {\n    please_connect: \"Please connect your wallet to the Optimism network to use kandyland.\",\n    please_connect_wallet: \"Please connect your wallet.\",    \n    tx_successfully_send: \"Your transaction was successfully sent\",\n    your_position_updated: \"Your position was successfully updated\",    \n    something_wrong: \"Something went wrong\",\n    switch_to_avalanche: \"Switch to the Optimism network?\",\n    slippage_too_small: \"Slippage too small\",\n    slippage_too_big: \"Slippage too big\",\n    your_position_update_soon: \"Your position will update soon\",  \n    your_position_close_soon: \"Your position will close soon\",\n    not_enough_profit: \"Your position is not profit now\",\n};\n","export const sleep = (seconds: number) => {\n    return new Promise(resolve => setTimeout(() => resolve(null), seconds * 1000));\n};\n","import { Dispatch } from \"redux\";\nimport { error } from \"../store/slices/messages-slice\";\nimport { messages } from \"../constants/messages\";\n\nexport const metamaskErrorWrap = (err: any, dispatch: Dispatch) => {\n    let text = messages.something_wrong;    \n\n    if (err.code === 4001) {\n        if (err.message.includes(\"User denied transaction signature\")) {\n            text = \"User denied transaction signature\";            \n        }\n    }\n    return dispatch(error({ text: text }));\n\n    \n};\n","import {useState, useMemo, useCallback, useEffect} from \"react\";\nimport { useSelector } from 'react-redux';\nimport { calcPositionDetails, openedPositionDetails } from \"../../../store/slices/position-slice\";\nimport { IReduxState } from \"../../../store/slices/state.interface\";\nimport { useDispatch } from \"react-redux\";\nimport { warning, success, info, error } from \"../../../store/slices/messages-slice\";\nimport { messages } from \"../../../constants/messages\";\nimport { sleep } from \"../../../helpers/sleep\";\nimport { PerpetualProtocol, PositionDraft, SupportedChainIds } from \"@perp/sdk-curie\";\nimport {AppDispatch} from \"../../../store/store\";\n\nimport {\t\n\tBox,\t\t \n\tButton,\n\tTextField,\n\tTypography,\n\tInputAdornment\t\n} from \"@mui/material\";\n\nimport { useWeb3Context } from \"../../../hooks/web3Context\";\nimport {Trade} from '../../../container/trade';\nimport {AMM} from \"../../../container/amm\";\nimport { PositionSide } from \"@perp/sdk-curie\";\nimport { metamaskErrorWrap } from \"../../../helpers/metamask-error-wrap\";\n\nfunction SendTransaction() {\t\n\tconst dispatch = useDispatch<AppDispatch>();\n\tconst { provider, chainID, connected } = useWeb3Context();\n\tconst {marketticker} = AMM.useContainer();\n\tconst { collateral } = Trade.useContainer();\n\tconst { _setCollateral} = Trade.useContainer();\n\tconst {side} = Trade.useContainer();\n\tconst {slippage} = Trade.useContainer();\n\tconst {perpetualObject} = Trade.useContainer();\n\tconst outputSymbol = marketticker.substring(0, marketticker.length - 3);\t\n\tconst _perpetualObject: PerpetualProtocol = new PerpetualProtocol({\n\t\tchainId: SupportedChainIds.OPTIMISM,   \t\t                \n\t\tproviderConfigs: [\n\t\t\t{\t\t\t\t\n                rpcUrl: \"https://optimism-mainnet.infura.io/v3/dd583584ac144f7984ac22cb0595646e\",                \t\t\t\t\t\t\t\n\t\t\t},\n\t\t],\n\t});\n\n\t\n\tconst isCalculated = useSelector<IReduxState, boolean>((state) => state.positions.isCalculated);\n\tconst newPositionDraft = useSelector<IReduxState, PositionDraft<string> | undefined>(state => {\n\t\treturn state.positions.newPositionDraft;\n\t});\n\tconst oppositeAmount = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.oppositeAmount;\n\t});\n\tconst entryPrice = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.entryPrice;\n\t});\n\tconst tradingFee = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.tradingFee;\n\t});\n\tconst priceImpact = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.priceImpact;\n\t});\n\tconst buyingPower = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.buyingPower;\n\t});\n\n\tconst isDisabled = !isCalculated || collateral === null || collateral.eq(0);\n\n\tconst handleOpen = useCallback(async () => {\n\t\tconst hasconnected = perpetualObject.hasConnected();  \n\t\tif(hasconnected === false) {\n\t\t\tawait perpetualObject.init();\n\t\t\tawait perpetualObject.connect({ signer: provider.getSigner() });\t\n\t\t}\t\t\n\t\tlet openTx;\n\t\ttry {\n\t\t\topenTx = await perpetualObject?.clearingHouse?.openPosition(newPositionDraft!, slippage);\n\t\t\tconsole.log(\"Open Transaction\", openTx);\n\t\t\tawait openTx!.transaction.wait();\n\t\t\tdispatch(success({ text: messages.tx_successfully_send }));\n\t\t\tawait sleep(0.1);\n\t\t\tdispatch(info({ text: messages.your_position_update_soon }));\n\t\t\tawait sleep(1);\t\t\t\n\t\t\tawait dispatch(openedPositionDetails({ networkID: chainID, provider: provider, perpetualObject: _perpetualObject,\n\t\t\t\ttickerSymbol: marketticker}));\n\t\t\tdispatch(info({ text: messages.your_position_updated }));\n\t\t\t_setCollateral('');\t\t\t\n\t\t} catch (err: any) {\n\t\t\tmetamaskErrorWrap(err, dispatch);\n\t\t} finally {\t\t\t\n\t\t\t\n\t\t}\t\n\t\t\n  }, [newPositionDraft, slippage]);\n\n\tconst calcPosition = useCallback(\n\t\tloadProvider => {\n\t\t\tconsole.log(\"Calling calc Position\");\n\t\t\tdispatch(calcPositionDetails({ networkID: chainID, provider: loadProvider, perpetualObject: perpetualObject,\n\t\t\tside: side, slippage: slippage, tickerSymbol: marketticker, amountInput: collateral}));\n\t\t},\n\t\t[collateral, slippage, side, marketticker],\n\t);\n\n\tconst calcOpenedPosition = useCallback(\n\t\tloadProvider => {\n\t\t\tconsole.log(\"Calling calc openedPosition\");\n\t\t\tdispatch(openedPositionDetails({ networkID: chainID, provider: loadProvider, perpetualObject: perpetualObject,\n\t\t\ttickerSymbol: marketticker}));\n\t\t},\n\t\t[connected, marketticker],\n\t);\n\n  useEffect(() => {\n\tif(connected) {\n\t\tcalcPosition(provider);\n\t}\t\t\n\t}, [collateral, slippage, side, marketticker]);\n\n\tuseEffect(() => {\n\t\tcalcOpenedPosition(provider);\n\t}, [connected, marketticker]);\n\n\treturn (\n\t\t<Box sx={{mt: 2}}>\n\t\t\t<Box sx={{mb: 2}}>\n\t\t\t\t<TextField\n\t\t\t\t\tid=\"outlined-name\"\n\t\t\t\t\tlabel=\"Output\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tdisabled\n\t\t\t\t\tvalue={oppositeAmount}\n\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\t\t\t\t\n\t\t\t\t\tInputProps={{\t\t\t\t\t\t\n\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">{outputSymbol}</InputAdornment>,\n\t\t\t\t\t}}\n\t\t\t\t\tsx={{width: '100%',\n\t\t\t\t\t\t'& .MuiFormLabel-root.Mui-disabled, & .MuiFormLabel-root.Mui-focused, & .MuiTypography-root': {color: '#a3a8b7'},\n\t\t\t\t\t\t'& > div': {color: 'white'},\n\t\t\t\t\t\t'& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled': {color: '#a3a8b7'},\t\t\t\t\t\t\n\t\t\t\t\t\t'& .MuiInputBase-root > input': {'-webkit-text-fill-color': '#a3a8b7'},\n\t\t\t\t\t\t'& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline': {borderColor: 'rgba(255, 255, 255, 0.16)'}\t\t\t\t\t\t\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Buying Power</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>${buyingPower}</Typography>\n\t\t\t</Box>\n\t\t\t<Typography sx={{mx: 'auto', py: 1, textAlign: 'left', color: 'white'}}>\n\t\t\t\tSummary\n\t\t\t</Typography>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Entry Price</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>${entryPrice}</Typography>\n\t\t\t</Box>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Trading Fee</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>${tradingFee}</Typography>\n\t\t\t</Box>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Price Impact</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>{priceImpact}%</Typography>\n\t\t\t</Box>\n\t\t\t<Button variant=\"contained\" \n\t\t\t\tdisabled={isDisabled}\n\t\t\t\tsx={{width: '100%', paddingY: '12px', \n\t\t\t\t\tbackgroundColor: side === PositionSide.LONG? 'success.light': '#ef5350', \n\t\t\t\t\tdisplay: 'block',\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tmx: 'auto',\n\t\t\t\t\t'&: hover': {backgroundColor: side === PositionSide.LONG? 'success.main': '#f44336'},\n\t\t\t\t\t'&: disabled': {backgroundColor: side === PositionSide.LONG? 'success.light': '#ef5350', color: 'black', opacity: 0.8} \n\t\t\t\t}}\n\t\t\t\tonClick={handleOpen}\t\t\t\n\t\t\t>\n\t\t\t\tConfirm {side}\n\t\t\t</Button>\t\t\t\n\t\t</Box>\n\t)\n}\n\nexport default SendTransaction;","import * as React from 'react';\nimport { useSelector } from 'react-redux';\nimport { IReduxState } from \"../../../store/slices/state.interface\";\nimport { useDispatch } from \"react-redux\";\nimport { warning, success, info, error } from \"../../../store/slices/messages-slice\";\nimport { close } from \"../../../store/slices/position-slice\";\nimport { messages } from \"../../../constants/messages\";\nimport { sleep } from \"../../../helpers/sleep\";\nimport { PositionSide } from \"@perp/sdk-curie\";\n\nimport {\t\n\tBox,\t\n\tButton,\t   \n\tTypography  \n} from \"@mui/material\";\n\nimport { useWeb3Context } from \"../../../hooks/web3Context\";\nimport {Trade} from '../../../container/trade';\nimport {AMM} from \"../../../container/amm\";\nimport { metamaskErrorWrap } from \"../../../helpers/metamask-error-wrap\";\n\nexport function PositionList() {\n\tconst dispatch = useDispatch();\n  const { connected, provider } = useWeb3Context();   \n  const {perpetualObject} = Trade.useContainer();\n  const {slippage} = Trade.useContainer();\n  const {marketticker} = AMM.useContainer();\n  let tickerSymbol = marketticker;\n  const outputSymbol = marketticker.substring(0, marketticker.length - 3);\n\n\tconst isOpenedPositionCalculated = useSelector<IReduxState, boolean>((state) => state.positions.isOpenedPositionCalculated);\n\n\tconst isLoss = useSelector<IReduxState, boolean>(state => {\n\t\treturn state.positions.isLoss;\n\t});\n\n\tconst posSize = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.posSize;\n\t});\n\n\n\tconst side = useSelector<IReduxState, PositionSide>(state => {\n\t\treturn state.positions.side;\n\t});\n\n\tconst pendingValue = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.pendingValue;\n\t});\n\n\tconst isProfit = useSelector<IReduxState, boolean>(state => {\n\t\treturn state.positions.isProfit;\n\t});\n\n\tconst pnlValue = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.pnlValue;\n\t});\n\n\tconst openPrice = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.openPrice;\n\t});\n\n\tconst indexPrice = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.indexPrice;\n\t});\n\n\tconst liquidationPrice = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.liquidationPrice;\n\t});\n\n\tconst marginRatio = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.marginRatio;\n\t});\n\n\tconst leverage = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.leverage;\n\t}); \n\n\tconst handleClose = async () => {\t\t\n\t\tconst hasconnected = perpetualObject.hasConnected();  \n\t\tif(hasconnected === false) {\n\t\t\tawait perpetualObject.init();\n\t\t\tawait perpetualObject.connect({ signer: provider.getSigner() });\t\n\t\t}\n\t\tconst position = await perpetualObject?.positions?.getTakerPositionByTickerSymbol(tickerSymbol);\n\t\tif(position !== undefined) {\t\t\t\n\t\t\tlet closeTx;\n\t\t\ttry {\n\t\t\t\tcloseTx = await perpetualObject?.clearingHouse?.closePosition(position!, slippage);\n\t\t\t\tconsole.log(\"Close Transaction\", closeTx);\n\t\t\t\tawait closeTx!.transaction.wait();\n        dispatch(success({ text: messages.tx_successfully_send }));\n        await sleep(0.5);\n        dispatch(info({ text: messages.your_position_close_soon }));\n\t\t\t} catch (err: any) {\n\t\t\t\tmetamaskErrorWrap(err, dispatch);\n\t\t\t} finally {\n\t\t\t\tdispatch(close());\t\t\t\t\n\t\t\t}\t\t\t\n\t\t} \n\t};\n\n\treturn (\n\t\t<Box>\n\t\t\t{isOpenedPositionCalculated && \n\t\t\t\t<Box sx={{maxWidth: '360px'}}>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'flex-start', alignItems: 'center'}}>              \n\t\t\t\t\t\t\t<Typography sx={{fontSize: '16px', mr: 1, color: 'white'}}>{posSize}</Typography>\n\t\t\t\t\t\t\t<Typography sx={{fontSize: '12px', color: '#a3a8b7'}}>{outputSymbol}</Typography>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: side==='LONG'? 'rgba(94, 217, 151, 1)': 'rgba(234, 98, 98, 1)'}}>{side}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Pending Funding Payment</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: isLoss===true? 'rgba(234, 98, 98, 1)': 'rgba(94, 217, 151, 1)'}}>{pendingValue}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Profit / Loss</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: isProfit===true? 'rgba(94, 217, 151, 1)': 'rgba(234, 98, 98, 1)'}}>{pnlValue}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Avg. Open Price</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: 'white'}}>{openPrice}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Index Price</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: 'white'}}>{indexPrice}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Liquidation Price</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: 'white'}}>{liquidationPrice}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Margin Ratio</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: 'white'}}>{marginRatio}%</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Leverage</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: 'white'}}>{leverage}x</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex'}}>\n\t\t\t\t\t\t<Button variant=\"contained\" \n\t\t\t\t\t\t\tdisabled={connected === false}\n\t\t\t\t\t\t\tsx={{paddingY: '8px', mt: 1,\n\t\t\t\t\t\t\t\tbackgroundColor: 'rgb(255, 180, 89)', \n\t\t\t\t\t\t\t\tcolor: 'black',\n\t\t\t\t\t\t\t\t'&: hover': {backgroundColor: 'rgb(255, 180, 89)', color: 'white'},\n\t\t\t\t\t\t\t\t'&: disabled': {backgroundColor: 'gray', color: 'black', opacity: 0.8} \n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={handleClose}\t\t\t\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t}\n\t\t</Box>\n\t);\n}","import * as React from 'react';\nimport {useState, useMemo, useCallback} from \"react\";\nimport { useSelector } from 'react-redux';\nimport { IPositionSlice } from \"../../store/slices/position-slice\";\nimport { IReduxState } from \"../../store/slices/state.interface\";\n\nimport {\t\n\tBox,\t\n\tButton,\t   \n\tTypography,\n  Tabs,\n  Tab\n} from \"@mui/material\";\n\nimport { PositionList } from './components/PositionList';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ py: 2 }}>\n          {children}\n        </Box>\n      )}\n    </div>\n  );\n}\n\nfunction a11yProps(index: number) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`,\n  };\n}\n\nexport default function Positions() {   \n  const [value, setValue] = useState(0); \n  const isPositionOpened = useSelector<IReduxState, boolean>((state) => state.positions.isPositionOpened);  \n  console.log(\"OPened position\", isPositionOpened);\n  const handleChange = (event: React.SyntheticEvent, newValue: number) => {    \n    setValue(newValue);\n  }; \n\n  return (\n    <Box sx={{ width: '100%' }}>\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={value} onChange={handleChange} aria-label=\"basic tabs example\" textColor='primary'\n          TabIndicatorProps={{\n            style: {\n              backgroundColor: \"white\"              \n            }\n          }}\n            sx={{ \n              '& .MuiTab-root': {color: '#a3a8b7'},               \n              '& .MuiTab-root.Mui-selected': {color: 'white'}          \n            }}\n        >\n          <Tab label=\"Position\" {...a11yProps(0)} />\n          <Tab label=\"Limit Orders\" {...a11yProps(1)} />\n          <Tab label=\"Fills\" {...a11yProps(2)} />\n        </Tabs>\n      </Box>\n      <TabPanel value={value} index={0}>        \n        {isPositionOpened ? <PositionList /> :\n          <Typography sx={{color: '#a3a8b7'}}>You don't have any opened position yet</Typography>\n        }\n      </TabPanel>\n      <TabPanel value={value} index={1}>\n        Limit Orders\n      </TabPanel>\n      <TabPanel value={value} index={2}>\n        Fills\n      </TabPanel>\n    </Box>\n  );\n}","import {useState, useEffect} from \"react\";\n\nimport {\n\tAppBar,\n\tBox,\n\tButton,\n\tContainer,    \n\tTypography,\n} from \"@mui/material\";\n\nimport SideSwitcher from \"./components/Sideswitcher\";\nimport PriceHeader from \"./components/PriceHeader\";\nimport Collateral from \"./components/Collateral\";\nimport Slippage from \"./components/Slippage\";\nimport SendTransaction from \"./components/SendTransaction\";\nimport Positions from \"../Positions\";\n\nfunction Trade() {\n\treturn (\t\t\n\t\t<Box sx={{backgroundColor: 'rgba(9, 9, 10, 1)', py: 1, px: 1, pb: '400px'}}>\t\t\n\t\t\t<PriceHeader />\t\n\t\t\t<Box sx={{display: 'flex', flexDirection: {xs: 'column', md: 'row'}}}>\n\t\t\t\t<Box sx={{boxSizing: 'border-box', flexGrow: '1',\n\t\t\t\t\tbackgroundColor: \"rgba(29, 29, 29, 1)\", borderRadius: '10px', p: '12px'}}\n\t\t\t\t>\n\t\t\t\t\t<Positions />\n\t\t\t\t</Box>\n\t\t\t\t<Box sx={{width: {xs: '100%', md: '360px'}, \n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t\tbackgroundColor: \"rgba(29, 29, 29, 1)\",\n\t\t\t\t\tborderRadius: '10px', px: '12px', pb: '12px', ml: {md: 1}, mt: {xs: 1, md: '0px'}}}\n\t\t\t\t>\n\t\t\t\t\t<SideSwitcher />\t\t\t\n\t\t\t\t\t<Collateral />\n\t\t\t\t\t<Slippage />\n\t\t\t\t\t<SendTransaction />\n\t\t\t\t</Box>\t\t\t\t\n\t\t\t</Box>\n\t\t</Box>\t\t\n\t)\n}\n\nexport default Trade;","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { close } from \"../../store/slices/messages-slice\";\n// import \"./console-interceptor\";\nimport { MessagesState } from \"../../store/slices/messages-slice\";\nimport { IReduxState } from \"../../store/slices/state.interface\";\nimport { useSnackbar } from \"notistack\";\n\n// A component that displays error messages\nfunction Messages() {\n    const { enqueueSnackbar } = useSnackbar();\n    const messages = useSelector<IReduxState, MessagesState>(state => state.messages);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (messages.message) {\n            enqueueSnackbar(JSON.stringify(messages.message));\n            dispatch(close());\n        }\n    }, [messages.message]);\n\n    return <div></div>;\n}\n\nexport default Messages;\n","import React from 'react';\nimport ConnectMenu from \"./Header\";\nimport Trade from \"./Pages/Trade\";\nimport './App.css';\nimport Messages from \"./components/Messages\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ConnectMenu />   \n      <Trade />\n      <Messages />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { configureStore } from \"@reduxjs/toolkit\";\n\nimport messagesReducer from \"./slices/messages-slice\";\nimport positionsReducer from \"./slices/position-slice\";\n\nconst store = configureStore({\n    reducer: {        \n        messages: messagesReducer,    \n        positions: positionsReducer,    \n    },\n    middleware: getDefaultMiddleware => getDefaultMiddleware({ serializableCheck: false }),\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\nexport default store;\n","import React, { useState, forwardRef, useCallback } from \"react\";\nimport classnames from \"classnames\";\nimport { Collapse, Paper, Typography, Card, CardActions, Button, IconButton } from \"@mui/material\";\nimport { makeStyles, createStyles } from '@mui/styles';\n\nimport { useSnackbar, SnackbarContent } from \"notistack\";\n\nimport CloseIcon from '@mui/icons-material/Close';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport { Message } from \"../../store/slices/messages-slice\";\nimport WarningIcon from '@mui/icons-material/Warning';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport InfoIcon from '@mui/icons-material/Info';\nimport SuccessIcon from '@mui/icons-material/CheckCircle';\nimport { AlertColor } from \"@mui/material/Alert\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        \"@media (min-width:600px)\": {\n            minWidth: \"344px !important\"\n          }\n    },\n    card: {\n        width: \"100%\",\n    },\n    error: {\n        backgroundColor: \"#d32f2f\",\n    },\n    info: {\n        backgroundColor: \"#2979ff\",\n    },\n    warning: {\n        backgroundColor: \"#ffa000\",\n    },\n    success: {\n        backgroundColor: \"#43a047\",\n    },\n    typography: {\n        color: \"#FFFFFF\",\n        fontFamily: \"Montserrat SemiBold\",\n    },\n    actionRoot: {\n        padding: \"8px 8px 8px 16px\",\n        justifyContent: \"space-between\",\n        color: \"#FFFFFF\",\n    },\n    icons: {\n        marginLeft: \"auto\",\n    },\n    expand: {\n        padding: \"8px 8px\",\n        transform: \"rotate(0deg)\",\n        transition: \"all .2s\",\n        color: \"#FFFFFF\",\n    },\n    expandOpen: {\n        transform: \"rotate(180deg)\",\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: \"#b3b3b3\",\n        paddingRight: 4,\n    },\n    checkIconCopy: {\n        color: \"#43a047\",\n    },\n    button: {\n        padding: 0,\n        textTransform: \"none\",\n    },\n    errorWrap: {\n        marginTop: 10,\n    },\n    errorText: {\n        whiteSpace: \"pre-wrap\",\n        maxHeight: 300,\n        overflow: \"auto\",\n        background: \"rgba(0,0,0,0.1)\",\n        padding: 5,\n        borderRadius: 5,\n    },\n}));\n\nconst SnackMessage = forwardRef<HTMLDivElement, { id: string | number; message: Message }>((props, ref) => {\n    const classes = useStyles();\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n    const [isCopy, setIsCopy] = useState(false);\n\n    const handleExpandClick = useCallback(() => {\n        setExpanded(oldExpanded => !oldExpanded);\n    }, []);\n\n    const handleDismiss = useCallback(() => {\n        closeSnackbar(props.id);\n    }, [props.id, closeSnackbar]);\n\n    const getIcon = (severity: AlertColor) => {\n        switch (severity) {\n            case \"error\":\n                return <ErrorIcon color=\"inherit\" />;\n            case \"info\":\n                return <InfoIcon color=\"inherit\" />;\n            case \"success\":\n                return <SuccessIcon color=\"inherit\" />;\n            case \"warning\":\n                return <WarningIcon color=\"inherit\" />;\n            default:\n                return <div />;\n        }\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card className={classnames(classes.card, classes[props.message.severity])}>\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    {getIcon(props.message.severity)}\n                    <Typography variant=\"subtitle2\" className={classes.typography}>\n                        {props.message.text}\n                    </Typography>\n                    <div className={classes.icons}>\n                        {props.message.error && (\n                            <IconButton aria-label=\"Show more\" className={classnames(classes.expand, { [classes.expandOpen]: expanded })} onClick={handleExpandClick}>\n                                <ExpandMoreIcon color=\"inherit\" />\n                            </IconButton>\n                        )}\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon color=\"inherit\" />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <CopyToClipboard text={JSON.stringify(props.message.error)} onCopy={() => setIsCopy(true)}>\n                            <Button size=\"small\" className={classes.button}>\n                                <CheckCircleIcon className={classnames(classes.checkIcon, { [classes.checkIconCopy]: isCopy })} />\n                                Copy to clipboard\n                            </Button>\n                        </CopyToClipboard>\n                        <div className={classes.errorWrap}>\n                            <Typography>Error message: </Typography>\n                            <Typography className={classes.errorText}>{JSON.stringify(props.message.error, null, 2)}</Typography>\n                        </div>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\n\nexport default SnackMessage;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport store from \"./store/store\";\nimport { Provider } from \"react-redux\";\nimport { Web3ContextProvider } from \"./hooks/web3Context\";\nimport { SnackbarProvider } from \"notistack\";\nimport SnackMessage from \"./components/Messages/snackbar\";\nimport {Trade} from './container/trade';\nimport { AMM } from './container/amm';\n\nconst Providers = ((...providers: any[]) => ({ children }: { children: React.ReactNode }) => {\n  return providers.reduceRight((providers, provider) => {\n      const Provider = provider.component || provider\n      const props = provider.props || {}\n      return <Provider {...props}>{providers}</Provider>\n  }, children)\n})(  \n  Trade.Provider,  \n  AMM.Provider\n)\n\nReactDOM.render(\n  <React.StrictMode>  \n    <SnackbarProvider\n      maxSnack={4}\n      anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"right\",\n      }}\n      content={(key: string | number, message: string) => <SnackMessage id={key} message={JSON.parse(message)} />}\n      autoHideDuration={10000}\n    >\n      <Provider store={store}>\n        <Web3ContextProvider>\n          <Providers>\n          <App />      \n          </Providers>\n        </Web3ContextProvider>\n      </Provider>\n    </SnackbarProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}