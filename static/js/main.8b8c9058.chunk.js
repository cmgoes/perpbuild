(this.webpackJsonpwallpetint=this.webpackJsonpwallpetint||[]).push([[0],{407:function(e,t,n){},408:function(e,t){},448:function(e,t){},450:function(e,t){},474:function(e,t){},476:function(e,t){},488:function(e,t){},489:function(e,t){},512:function(e,t){},515:function(e,t){},517:function(e,t){},622:function(e,t){},623:function(e,t){},637:function(e,t,n){},639:function(e,t,n){"use strict";n.r(t);var r,o=n(25),i=n(1),c=n.n(i),a=n(69),s=n.n(a),l=(n(407),n(13)),u=n(728),d=n(730),b=n(731),p=n(724),j=n(0),x=n(6),O=n(12),f=n(356),h=n.n(f),g=n(701),m=n(702),v=n(387);!function(e){e[e.OPTIMISM=10]="OPTIMISM",e[e.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI"}(r||(r={}));var C=r.OPTIMISM,w=n(3),y=c.a.createContext(null),k=function(){var e=Object(i.useContext)(y);if(!e)throw new Error("useWeb3Context() can only be used inside of <Web3ContextProvider />, please declare it at a higher level.");var t=e.onChainProvider;return Object(i.useMemo)((function(){return Object(o.a)({},t)}),[e])},S=function(e){var t=e.children,n=Object(i.useState)(!1),o=Object(l.a)(n,2),c=o[0],a=o[1],s=Object(i.useState)(C),u=Object(l.a)(s,2),d=u[0],b=(u[1],Object(i.useState)(C)),p=Object(l.a)(b,2),f=p[0],k=p[1],S=Object(i.useState)(""),P=Object(l.a)(S,2),I=P[0],M=P[1],F=Object(i.useState)("https://mainnet.optimism.io"),T=Object(l.a)(F,2),z=T[0],L=(T[1],Object(i.useState)(new g.a(z))),N=Object(l.a)(L,2),D=N[0],B=N[1],R=Object(i.useState)(new h.a({cacheProvider:!0,providerOptions:{walletconnect:{package:v.a,options:{rpc:Object(O.a)({},r.OPTIMISM,"https://mainnet.optimism.io")}}}})),A=Object(l.a)(R,1)[0],E=function(){return!!A&&!!A.cachedProvider},G=Object(i.useCallback)((function(e){e.on&&(e.on("accountsChanged",(function(){return setTimeout((function(){return window.location.reload()}),1)})),e.on("chainChanged",function(){var e=Object(x.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("network",(function(e,t){t&&window.location.reload()})))}),[D]),H=function(){var e=Object(x.a)(Object(j.a)().mark((function e(t){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Number(t),k(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=Object(i.useCallback)(Object(x.a)(Object(j.a)().mark((function e(){var t,n,o,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.connect();case 2:return t=e.sent,G(t),n=new m.a(t,"any"),e.next=7,n.getNetwork().then((function(e){return Number(e.chainId)}));case 7:return o=e.sent,e.next=10,n.getSigner().getAddress();case 10:return i=e.sent,M(i),k(o),o===r.OPTIMISM&&B(n),a(!0),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)}))),[D,A,c]),W=Object(i.useCallback)(Object(x.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.clearCachedProvider(),a(!1),setTimeout((function(){window.location.reload()}),1);case 3:case"end":return e.stop()}}),e)}))),[D,A,c]),q=Object(i.useMemo)((function(){return{connect:U,disconnect:W,hasCachedProvider:E,provider:D,connected:c,address:I,chainID:d,web3Modal:A,providerChainID:f}}),[U,W,E,D,c,I,d,A,f]);return Object(w.jsx)(y.Provider,{value:{onChainProvider:q},children:t})},P=n(371),I=n.n(P);var M=function(){var e=k(),t=e.connect,n=e.disconnect,r=e.connected,o=e.web3,c=(e.address,e.provider,e.providerChainID),a=e.checkWrongNetwork,s=Object(i.useState)(r),j=Object(l.a)(s,2),x=j[0],O=j[1],f="Connect",h=t;return x&&(f="Disconnect",h=n),x&&c!==C&&(f="Wrong network",h=function(){a()}),Object(i.useEffect)((function(){O(r)}),[o,r]),Object(w.jsx)(u.a,{position:"static",sx:{backgroundColor:"rgba(9, 9, 10, 1)",backgroundImage:"none",py:2,px:2,borderBottom:"1px solid rgba(255, 255, 255, 0.16)"},children:Object(w.jsxs)(d.a,{flexGrow:1,justifyContent:"space-between",alignItems:"center",sx:{ml:{xs:"20px",md:"60px"},display:"flex"},children:[Object(w.jsx)(b.a,{variant:"h4",fontWeight:"700",textAlign:"center",color:"white",children:"Perp V2"}),Object(w.jsxs)(p.a,{variant:"contained",sx:{cursor:"pointer",backgroundColor:"transparent",color:"rgba(101, 230, 255, 1)",fontSize:"16px","&:hover":{backgroundColor:"rgba(101, 239, 255, 0.12)"}},onClick:h,children:[Object(w.jsx)(I.a,{sx:{color:"rgba(101, 230, 255, 1)",pr:1}}),f]})]})})},F=n(732),T=n(44),z=n(204),L=n(715),N=n(146),D=n(23),B=n.n(D),R=Object(z.a)((function(){var e=Object(i.useState)(T.a.LONG),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(i.useState)(new B.a(.02)),c=Object(l.a)(o,2),a=c[0],s=c[1],u=Object(i.useState)(new B.a(0)),d=Object(l.a)(u,2),b=d[0],p=d[1],j=Object(i.useState)(""),x=Object(l.a)(j,2),O=x[0],f=x[1],h=Object(i.useState)(new L.a({chainId:N.c.OPTIMISM,providerConfigs:[{rpcUrl:"https://optimism-mainnet.infura.io/v3/dd583584ac144f7984ac22cb0595646e"}]})),g=Object(l.a)(h,2),m=g[0];g[1];return Object(i.useMemo)((function(){return{side:n,setPositionSide:r,slippage:a,setSlippage:s,collateral:b,setCollateral:p,_collateral:O,_setCollateral:f,perpetualObject:m}}),[n,a,b,O])}));var A=function(){var e=R.useContainer(),t=e.side,n=e.setPositionSide,r=Object(i.useCallback)((function(){t!==T.a.LONG&&n(T.a.LONG)}),[n,t]),o=Object(i.useCallback)((function(){t!==T.a.SHORT&&n(T.a.SHORT)}),[n,t]);return Object(w.jsxs)(F.a,{size:"large",sx:{py:"12px",border:"none",width:"100%"},children:[Object(w.jsx)(p.a,{sx:{width:"50%",fontSize:"12px",backgroundColor:t===T.a.LONG?"#52c41a":"gray",color:t===T.a.LONG?"white":"black",border:"1px solid transparent","&: hover":{backgroundColor:"#49bc10",border:"1px solid transparent"}},onClick:r,children:"Long"}),Object(w.jsx)(p.a,{sx:{width:"50%",fontSize:"12px",backgroundColor:t===T.a.SHORT?"#fa672d":"gray",color:t===T.a.SHORT?"white":"black",border:"1px solid transparent","&: hover":{backgroundColor:"#f85819",border:"1px solid transparent"}},onClick:o,children:"Short"})]})},E=n(721),G=n(720),H=n(733),U=n(717),W=Object(z.a)((function(){var e=Object(i.useState)("ETHUSD"),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(i.useMemo)((function(){return{marketticker:n,setMarketTicker:r}}),[n,r])}));var q=function(){var e=W.useContainer(),t=(e.marketticker,e.setMarketTicker),n=c.a.useState(!1),r=Object(l.a)(n,2),o=r[0],i=r[1];return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(H.a,{variant:"standard",sx:{m:1,width:"300px"},children:[Object(w.jsx)(E.a,{size:"small",shrink:!0,sx:{left:"120px",color:"rgba(145, 153, 167, 1)","&.Mui-focused":{color:"rgba(145, 153, 167, 1)"}},children:"Market"}),Object(w.jsx)(U.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",open:o,defaultValue:"ETHUSD",onClose:function(){i(!1)},onOpen:function(){i(!0)},label:"Market",onChange:function(e){t(e.target.value)},sx:{"&:hover:not(.Mui-disabled):before":{borderBottom:"none"},"& > svg":{color:"white"},"& ul":{backgroundColor:"rgba(9, 9, 10, 1)"},"&::before":{border:"none"},color:"white","&::after":{borderBottom:"none"}},children:["BTCUSD","ETHUSD","BNBUSD","AVAXUSD"].map((function(e){return Object(w.jsx)(G.a,{value:e,sx:{color:"black"},children:e},e)}))})]})})};var V=function(){return Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",backgroundColor:"rgba(29, 29, 29, 1)",flexDirection:{xs:"column",sm:"row"},borderRadius:"10px",py:"4px",mb:1},children:[Object(w.jsx)(q,{}),Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"flex-start",borderLeft:{sm:"1px solid rgba(145, 153, 167, 0.8)"},pl:{sm:2,md:3,xl:4},py:1},children:[Object(w.jsxs)(d.a,{sx:{pr:{xs:2,md:3,xl:4}},children:[Object(w.jsx)(b.a,{sx:{fontSize:"0.75rem",color:"rgba(145, 153, 167, 1)"},children:"Index Price"}),Object(w.jsx)(b.a,{sx:{color:"rgb(255, 255, 255)"},children:"1266.0"})]}),Object(w.jsxs)(d.a,{sx:{pr:{xs:2,md:3,xl:4}},children:[Object(w.jsx)(b.a,{sx:{fontSize:"0.75rem",color:"rgba(145, 153, 167, 1)"},children:"Volume (24h)"}),Object(w.jsx)(b.a,{sx:{color:"rgb(255, 255, 255)"},children:"5,798,410.3"})]}),Object(w.jsxs)(d.a,{sx:{pr:{xs:2,md:3,xl:4}},children:[Object(w.jsx)(b.a,{sx:{fontSize:"0.75rem",color:"rgba(145, 153, 167, 1)"},children:"Funding Rate (8h)"}),Object(w.jsx)(b.a,{sx:{color:"rgb(255, 255, 255)"},children:"0.0071%"})]})]})]})},Y=n(722),_=n(736);new D.Big(0),n(41),n(378);new RegExp(/\d(?=(\d{3})+\.)/g);function J(e,t){var n=e.indexOf("."),r=e.split("").filter((function(e,t){return"."!==e||t===n})).join("");return r.includes(".")&&r.length>r.indexOf(".")+(t+1)?r.substr(0,r.indexOf(".")+(t+1)):r}function $(e){var t=e.value,n=e.delay,r=void 0===n?200:n,o=e.onBeforeDebounce,c=e.onAfterDebounce,a=Object(i.useState)(t),s=Object(l.a)(a,2),u=s[0],d=s[1];return Object(i.useEffect)((function(){o&&o(t);var e=setTimeout((function(){d(t),c&&c(t)}),r);return function(){clearTimeout(e)}}),[t,r,o,c]),u}var X=function(){var e=R.useContainer(),t=e.collateral,n=e.setCollateral,r=R.useContainer(),o=r._collateral,c=r._setCollateral,a=$({value:o,delay:800}),s=Object(i.useCallback)((function(e){var t=e.target.value;if(t>=0){var n=J(t,2);c(n)}}),[c]);return Object(i.useEffect)((function(){if(""!==a){var e=new B.a(a);null!==t&&void 0!==t&&t.eq(e)||n(e)}}),[t,a,n]),Object(i.useMemo)((function(){return Object(w.jsx)(d.a,{sx:{my:2},children:Object(w.jsx)(Y.a,{id:"outlined-name",label:"Collateral",type:"number",value:o,placeholder:"0",InputLabelProps:{shrink:!0},InputProps:{endAdornment:Object(w.jsx)(_.a,{position:"end",children:"USDC"})},onChange:s,sx:{width:"100%","& > label, & .MuiFormLabel-root.Mui-focused":{color:"#a3a8b7"},"& > div":{color:"white"},"& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7",borderWidth:"1px"},"& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7"},"& .MuiTypography-root":{color:"#a3a8b7"},"& fieldset.MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.16)"}}})})}),[o,s])};var K=function(){var e=R.useContainer(),t=e.slippage,n=e.setSlippage,r=Object(i.useState)(""),o=Object(l.a)(r,2),c=o[0],a=o[1],s=$({value:c,delay:800}),u=Object(i.useCallback)((function(e){var t=e.target.value;if(t>=0){var n=J(t,2);a(n)}}),[a]);return Object(i.useEffect)((function(){if(""!==s){var e=new B.a(s);null!==t&&void 0!==t&&t.eq(e)||n(e)}}),[t,s,n]),Object(i.useMemo)((function(){return Object(w.jsx)(d.a,{sx:{my:2},children:Object(w.jsx)(Y.a,{id:"outlined-name",label:"Slippage",type:"number",value:c,placeholder:"0.02",InputLabelProps:{shrink:!0},InputProps:{endAdornment:Object(w.jsx)(_.a,{position:"end",children:"%"})},onChange:u,sx:{width:"100%","& > label, & .MuiFormLabel-root.Mui-focused":{color:"#a3a8b7"},"& > div":{color:"white"},"& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7",borderWidth:"1px"},"& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7"},"& .MuiTypography-root":{color:"#a3a8b7"},"& fieldset.MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.16)"}}})})}),[c,u])},Q=n(40),Z=n(114),ee=n(193),te=function(e,t){Object.keys(t).forEach((function(n){e[n]=t[n]}))},ne=Object(Z.b)("position/calcPositionDetails",function(){var e=Object(x.a)(Object(j.a)().mark((function e(t){var n,r,o,i,c,a,s,l,u,d,b,p,x,O,f;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.networkID,r=t.provider,o=t.perpetualObject,i=t.side,c=t.slippage,a=t.tickerSymbol,s=t.amountInput,l=!1,n!==C){e.next=30;break}if(null!==s){e.next=5;break}return e.abrupt("return",new Promise((function(e){e({oppositeAmount:"",newPositionDraft:void 0,entryPrice:"",tradingFee:"",priceImpact:"",buyingPower:""})})));case 5:if(!s.eq(0)){e.next=7;break}return e.abrupt("return",new Promise((function(e){e({oppositeAmount:"0",newPositionDraft:void 0,entryPrice:"",tradingFee:"",priceImpact:"",buyingPower:""})})));case 7:if(!1!==o.hasConnected()){e.next=13;break}return e.next=11,o.init();case 11:return e.next=13,o.connect({signer:r.getSigner()});case 13:return d=null===(f=o.clearingHouse)||void 0===f?void 0:f.createPositionDraft({tickerSymbol:a,side:i,amountInput:s,isAmountInputBase:l}),console.log("NewPosition::",d),e.next=17,d.getEntryPrice();case 17:return b=e.sent,e.next=20,d.getTransactionFee();case 20:return p=e.sent,e.next=23,d.getPriceImpact();case 23:return x=e.sent,e.next=26,d.getBuyingPower();case 26:return O=e.sent,e.next=29,d.getOppositeAmountBound(c);case 29:u=e.sent;case 30:return e.abrupt("return",{oppositeAmount:u.toFixed(7),newPositionDraft:d,entryPrice:b.toFixed(2),tradingFee:p.toFixed(8),priceImpact:x.toFixed(5),buyingPower:O.toFixed(4)});case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(Z.b)("position/openedPositionDetails",function(){var e=Object(x.a)(Object(j.a)().mark((function e(t,n){var r,o,i,c,a,s,l,u,d,b,p,x,O,f,h,g,m,v,w,y,k,S;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.networkID,o=t.provider,i=t.perpetualObject,c=t.tickerSymbol,a=n.dispatch,r!==C){e.next=41;break}if(!1!==i.hasConnected()){e.next=9;break}return e.next=7,i.init();case 7:return e.next=9,i.connect({signer:o.getSigner()});case 9:return e.next=11,null===i||void 0===i||null===(s=i.positions)||void 0===s?void 0:s.getTakerPositionByTickerSymbol(c);case 11:if(void 0===(p=e.sent)){e.next=16;break}a(ce()),e.next=18;break;case 16:return a(ae()),e.abrupt("return",new Promise((function(e){e({isLoss:!1,posSize:"",side:T.a.LONG,pendingValue:"",isProfit:!1,pnlValue:"",openPrice:"",indexPrice:"",liquidationPrice:"",marginRatio:"",leverage:""})})));case 18:return console.log("Position pass!"),x=p.sizeAbs.toFixed(8),O=p.side,e.next=23,null===i||void 0===i||null===(l=i.positions)||void 0===l?void 0:l.getTotalPendingFundingPayments();case 23:return f=e.sent,h=-1===f[c].s,e.next=27,null===i||void 0===i||null===(u=i.positions)||void 0===u?void 0:u.getTotalTakerUnrealizedPnlFromAllMarkets();case 27:return g=e.sent,m=-1!==g.s,v=p.entryPrice.toFixed(2),e.next=32,i.contractReader.getIndexPrice(p.market.baseAddress);case 32:return w=e.sent,y=p.liquidationPrice,e.next=36,null===i||void 0===i||null===(d=i.positions)||void 0===d?void 0:d.getAccountMarginRatio();case 36:return k=e.sent,e.next=39,null===i||void 0===i||null===(b=i.positions)||void 0===b?void 0:b.getAccountLeverage();case 39:return S=e.sent,e.abrupt("return",{isLoss:h,posSize:x,side:O,pendingValue:f[c].toFixed(4),isProfit:m,pnlValue:g.toFixed(4),openPrice:v,indexPrice:w.toFixed(2),liquidationPrice:y.toFixed(1),marginRatio:(100*Number(k.toFixed(4))).toFixed(1),leverage:S.toFixed(2)});case 41:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),oe=Object(Z.c)({name:"positions",initialState:{isPositionOpened:!1,isCalculated:!1,isOpenedPositionCalculated:!1},reducers:{open:function(e){e.isPositionOpened=!0,e.isCalculated=!1},close:function(e){e.isPositionOpened=!1,e.isOpenedPositionCalculated=!1}},extraReducers:function(e){e.addCase(ne.pending,(function(e){e.isCalculated=!1})).addCase(ne.fulfilled,(function(e,t){te(e,t.payload),e.isCalculated=!0})).addCase(ne.rejected,(function(e,t){var n=t.error;e.isCalculated=!1,console.log(n)})).addCase(re.pending,(function(e){e.isOpenedPositionCalculated=!1})).addCase(re.fulfilled,(function(e,t){te(e,t.payload),e.isOpenedPositionCalculated=!0})).addCase(re.rejected,(function(e,t){var n=t.error;e.isOpenedPositionCalculated=!1,console.log(n)}))}}),ie=oe.actions,ce=ie.open,ae=ie.close,se=oe.reducer,le=(Object(ee.a)((function(e){return e.positions}),(function(e){return e})),function(e,t,n){var r=Object(o.a)({severity:t},n);e.message=r}),ue=Object(Z.c)({name:"messages",initialState:{message:null},reducers:{error:function(e,t){le(e,"error",t.payload)},info:function(e,t){le(e,"info",t.payload)},warning:function(e,t){le(e,"warning",t.payload)},success:function(e,t){le(e,"success",t.payload)},close:function(e){e.message=null}}}),de=ue.actions,be=de.error,pe=de.info,je=de.close,xe=(de.warning,de.success),Oe=ue.reducer,fe="Your transaction was successfully sent",he="Your position was successfully updated",ge="Something went wrong",me="Your position will update soon",ve="Your position will close soon",Ce=function(e){return new Promise((function(t){return setTimeout((function(){return t(null)}),1e3*e)}))},we=function(e,t){var n=ge;return 4001===e.code&&e.message.includes("User denied transaction signature")&&(n="User denied transaction signature"),t(be({text:n}))};var ye=function(){var e=Object(Q.b)(),t=k(),n=t.provider,r=t.chainID,o=t.connected,c=W.useContainer().marketticker,a=R.useContainer().collateral,s=R.useContainer()._setCollateral,l=R.useContainer().side,u=R.useContainer().slippage,O=R.useContainer().perpetualObject,f=c.substring(0,c.length-3),h=new L.a({chainId:N.c.OPTIMISM,providerConfigs:[{rpcUrl:"https://optimism-mainnet.infura.io/v3/dd583584ac144f7984ac22cb0595646e"}]}),g=Object(Q.c)((function(e){return e.positions.isCalculated})),m=Object(Q.c)((function(e){return e.positions.newPositionDraft})),v=Object(Q.c)((function(e){return e.positions.oppositeAmount})),C=Object(Q.c)((function(e){return e.positions.entryPrice})),y=Object(Q.c)((function(e){return e.positions.tradingFee})),S=Object(Q.c)((function(e){return e.positions.priceImpact})),P=Object(Q.c)((function(e){return e.positions.buyingPower})),I=!g||null===a||a.eq(0),M=Object(i.useCallback)(Object(x.a)(Object(j.a)().mark((function t(){var o,i;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==O.hasConnected()){t.next=6;break}return t.next=4,O.init();case 4:return t.next=6,O.connect({signer:n.getSigner()});case 6:return t.prev=6,t.next=9,null===O||void 0===O||null===(i=O.clearingHouse)||void 0===i?void 0:i.openPosition(m,u);case 9:return o=t.sent,console.log("Open Transaction",o),t.next=13,o.transaction.wait();case 13:return e(xe({text:fe})),t.next=16,Ce(.1);case 16:return e(pe({text:me})),t.next=19,Ce(1);case 19:return t.next=21,e(re({networkID:r,provider:n,perpetualObject:h,tickerSymbol:c}));case 21:e(pe({text:he})),s(""),t.next=28;break;case 25:t.prev=25,t.t0=t.catch(6),we(t.t0,e);case 28:return t.prev=28,t.finish(28);case 30:case"end":return t.stop()}}),t,null,[[6,25,28,30]])}))),[m,u]),F=Object(i.useCallback)((function(t){console.log("Calling calc Position"),e(ne({networkID:r,provider:t,perpetualObject:O,side:l,slippage:u,tickerSymbol:c,amountInput:a}))}),[a,u,l,c]),z=Object(i.useCallback)((function(t){console.log("Calling calc openedPosition"),e(re({networkID:r,provider:t,perpetualObject:O,tickerSymbol:c}))}),[o,c]);return Object(i.useEffect)((function(){o&&F(n)}),[a,u,l,c]),Object(i.useEffect)((function(){z(n)}),[o,c]),Object(w.jsxs)(d.a,{sx:{mt:2},children:[Object(w.jsx)(d.a,{sx:{mb:2},children:Object(w.jsx)(Y.a,{id:"outlined-name",label:"Output",type:"number",disabled:!0,value:v,placeholder:"0",InputLabelProps:{shrink:!0},InputProps:{endAdornment:Object(w.jsx)(_.a,{position:"end",children:f})},sx:{width:"100%","& .MuiFormLabel-root.Mui-disabled, & .MuiFormLabel-root.Mui-focused, & .MuiTypography-root":{color:"#a3a8b7"},"& > div":{color:"white"},"& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled":{color:"#a3a8b7"},"& .MuiInputBase-root > input":{"-webkit-text-fill-color":"#a3a8b7"},"& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.16)"}}})}),Object(w.jsxs)(d.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Buying Power"}),Object(w.jsxs)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:["$",P]})]}),Object(w.jsx)(b.a,{sx:{mx:"auto",py:1,textAlign:"left",color:"white"},children:"Summary"}),Object(w.jsxs)(d.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Entry Price"}),Object(w.jsxs)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:["$",C]})]}),Object(w.jsxs)(d.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Trading Fee"}),Object(w.jsxs)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:["$",y]})]}),Object(w.jsxs)(d.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Price Impact"}),Object(w.jsxs)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:[S,"%"]})]}),Object(w.jsxs)(p.a,{variant:"contained",disabled:I,sx:{width:"100%",paddingY:"12px",backgroundColor:l===T.a.LONG?"success.light":"#ef5350",display:"block",mx:"auto","&: hover":{backgroundColor:l===T.a.LONG?"success.main":"#f44336"},"&: disabled":{backgroundColor:l===T.a.LONG?"success.light":"#ef5350",color:"black",opacity:.8}},onClick:M,children:["Confirm ",l]})]})},ke=n(113),Se=n(719),Pe=n(737);function Ie(){var e=Object(Q.b)(),t=k(),n=t.connected,r=t.provider,o=R.useContainer().perpetualObject,i=R.useContainer().slippage,c=W.useContainer().marketticker,a=c,s=c.substring(0,c.length-3),l=Object(Q.c)((function(e){return e.positions.isOpenedPositionCalculated})),u=Object(Q.c)((function(e){return e.positions.isLoss})),O=Object(Q.c)((function(e){return e.positions.posSize})),f=Object(Q.c)((function(e){return e.positions.side})),h=Object(Q.c)((function(e){return e.positions.pendingValue})),g=Object(Q.c)((function(e){return e.positions.isProfit})),m=Object(Q.c)((function(e){return e.positions.pnlValue})),v=Object(Q.c)((function(e){return e.positions.openPrice})),C=Object(Q.c)((function(e){return e.positions.indexPrice})),y=Object(Q.c)((function(e){return e.positions.liquidationPrice})),S=Object(Q.c)((function(e){return e.positions.marginRatio})),P=Object(Q.c)((function(e){return e.positions.leverage})),I=function(){var t=Object(x.a)(Object(j.a)().mark((function t(){var n,c,s,l;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==o.hasConnected()){t.next=6;break}return t.next=4,o.init();case 4:return t.next=6,o.connect({signer:r.getSigner()});case 6:return t.next=8,null===o||void 0===o||null===(n=o.positions)||void 0===n?void 0:n.getTakerPositionByTickerSymbol(a);case 8:if(void 0===(c=t.sent)){t.next=29;break}return t.prev=10,t.next=13,null===o||void 0===o||null===(l=o.clearingHouse)||void 0===l?void 0:l.closePosition(c,i);case 13:return s=t.sent,console.log("Close Transaction",s),t.next=17,s.transaction.wait();case 17:return e(xe({text:fe})),t.next=20,Ce(.5);case 20:e(pe({text:ve})),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(10),we(t.t0,e);case 26:return t.prev=26,e(ae()),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[10,23,26,29]])})));return function(){return t.apply(this,arguments)}}();return Object(w.jsx)(d.a,{children:l&&Object(w.jsxs)(d.a,{sx:{maxWidth:"360px"},children:[Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[Object(w.jsx)(b.a,{sx:{fontSize:"16px",mr:1,color:"white"},children:O}),Object(w.jsx)(b.a,{sx:{fontSize:"12px",color:"#a3a8b7"},children:s})]}),Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"LONG"===f?"rgba(94, 217, 151, 1)":"rgba(234, 98, 98, 1)"},children:f})]}),Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Pending Funding Payment"}),Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:!0===u?"rgba(234, 98, 98, 1)":"rgba(94, 217, 151, 1)"},children:h})]}),Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Profit / Loss"}),Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:!0===g?"rgba(94, 217, 151, 1)":"rgba(234, 98, 98, 1)"},children:m})]}),Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Avg. Open Price"}),Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"white"},children:v})]}),Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Index Price"}),Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"white"},children:C})]}),Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Liquidation Price"}),Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"white"},children:y})]}),Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Margin Ratio"}),Object(w.jsxs)(b.a,{sx:{fontSize:"14px",color:"white"},children:[S,"%"]})]}),Object(w.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(w.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Leverage"}),Object(w.jsxs)(b.a,{sx:{fontSize:"14px",color:"white"},children:[P,"x"]})]}),Object(w.jsx)(d.a,{sx:{display:"flex"},children:Object(w.jsx)(p.a,{variant:"contained",disabled:!1===n,sx:{paddingY:"8px",mt:1,backgroundColor:"rgb(255, 180, 89)",color:"black","&: hover":{backgroundColor:"rgb(255, 180, 89)",color:"white"},"&: disabled":{backgroundColor:"gray",color:"black",opacity:.8}},onClick:I,children:"Close"})})]})})}var Me=["children","value","index"];function Fe(e){var t=e.children,n=e.value,r=e.index,i=Object(ke.a)(e,Me);return Object(w.jsx)("div",Object(o.a)(Object(o.a)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},i),{},{children:n===r&&Object(w.jsx)(d.a,{sx:{py:2},children:t})}))}function Te(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function ze(){var e=Object(i.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(Q.c)((function(e){return e.positions.isPositionOpened}));console.log("OPened position",c);return Object(w.jsxs)(d.a,{sx:{width:"100%"},children:[Object(w.jsx)(d.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(w.jsxs)(Se.a,{value:n,onChange:function(e,t){r(t)},"aria-label":"basic tabs example",textColor:"primary",TabIndicatorProps:{style:{backgroundColor:"white"}},sx:{"& .MuiTab-root":{color:"#a3a8b7"},"& .MuiTab-root.Mui-selected":{color:"white"}},children:[Object(w.jsx)(Pe.a,Object(o.a)({label:"Position"},Te(0))),Object(w.jsx)(Pe.a,Object(o.a)({label:"Limit Orders"},Te(1))),Object(w.jsx)(Pe.a,Object(o.a)({label:"Fills"},Te(2)))]})}),Object(w.jsx)(Fe,{value:n,index:0,children:c?Object(w.jsx)(Ie,{}):Object(w.jsx)(b.a,{sx:{color:"#a3a8b7"},children:"You don't have any opened position yet"})}),Object(w.jsx)(Fe,{value:n,index:1,children:"Limit Orders"}),Object(w.jsx)(Fe,{value:n,index:2,children:"Fills"})]})}var Le=function(){return Object(w.jsxs)(d.a,{sx:{backgroundColor:"rgba(9, 9, 10, 1)",py:1,px:1,pb:"400px"},children:[Object(w.jsx)(V,{}),Object(w.jsxs)(d.a,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"}},children:[Object(w.jsx)(d.a,{sx:{boxSizing:"border-box",flexGrow:"1",backgroundColor:"rgba(29, 29, 29, 1)",borderRadius:"10px",p:"12px"},children:Object(w.jsx)(ze,{})}),Object(w.jsxs)(d.a,{sx:{width:{xs:"100%",md:"360px"},boxSizing:"border-box",backgroundColor:"rgba(29, 29, 29, 1)",borderRadius:"10px",px:"12px",pb:"12px",ml:{md:1},mt:{xs:1,md:"0px"}},children:[Object(w.jsx)(A,{}),Object(w.jsx)(X,{}),Object(w.jsx)(K,{}),Object(w.jsx)(ye,{})]})]})]})},Ne=(n(637),n(130));var De=function(){var e=Object(Ne.c)().enqueueSnackbar,t=Object(Q.c)((function(e){return e.messages})),n=Object(Q.b)();return Object(i.useEffect)((function(){t.message&&(e(JSON.stringify(t.message)),n(je()))}),[t.message]),Object(w.jsx)("div",{})};var Be=function(){return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(M,{}),Object(w.jsx)(Le,{}),Object(w.jsx)(De,{})]})},Re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,743)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),i(e),c(e)}))},Ae=Object(Z.a)({reducer:{messages:Oe,positions:se},middleware:function(e){return e({serializableCheck:!1})}}),Ee=n(213),Ge=n.n(Ee),He=n(738),Ue=n(739),We=n(740),qe=n(727),Ve=n(729),Ye=n(716),_e=n(385),Je=n.n(_e),$e=n(384),Xe=n.n($e),Ke=n(206),Qe=n.n(Ke),Ze=n(383),et=n.n(Ze),tt=n(381),nt=n.n(tt),rt=n(382),ot=n.n(rt),it=n(380),ct=Object(Ye.a)((function(){return{root:{"@media (min-width:600px)":{minWidth:"344px !important"}},card:{width:"100%"},error:{backgroundColor:"#d32f2f"},info:{backgroundColor:"#2979ff"},warning:{backgroundColor:"#ffa000"},success:{backgroundColor:"#43a047"},typography:{color:"#FFFFFF",fontFamily:"Montserrat SemiBold"},actionRoot:{padding:"8px 8px 8px 16px",justifyContent:"space-between",color:"#FFFFFF"},icons:{marginLeft:"auto"},expand:{padding:"8px 8px",transform:"rotate(0deg)",transition:"all .2s",color:"#FFFFFF"},expandOpen:{transform:"rotate(180deg)"},collapse:{padding:16},checkIcon:{fontSize:20,color:"#b3b3b3",paddingRight:4},checkIconCopy:{color:"#43a047"},button:{padding:0,textTransform:"none"},errorWrap:{marginTop:10},errorText:{whiteSpace:"pre-wrap",maxHeight:300,overflow:"auto",background:"rgba(0,0,0,0.1)",padding:5,borderRadius:5}}})),at=Object(i.forwardRef)((function(e,t){var n=ct(),r=Object(Ne.c)().closeSnackbar,o=Object(i.useState)(!1),c=Object(l.a)(o,2),a=c[0],s=c[1],u=Object(i.useState)(!1),d=Object(l.a)(u,2),j=d[0],x=d[1],f=Object(i.useCallback)((function(){s((function(e){return!e}))}),[]),h=Object(i.useCallback)((function(){r(e.id)}),[e.id,r]);return Object(w.jsx)(Ne.a,{ref:t,className:n.root,children:Object(w.jsxs)(He.a,{className:Ge()(n.card,n[e.message.severity]),children:[Object(w.jsxs)(Ue.a,{classes:{root:n.actionRoot},children:[function(e){switch(e){case"error":return Object(w.jsx)(nt.a,{color:"inherit"});case"info":return Object(w.jsx)(ot.a,{color:"inherit"});case"success":return Object(w.jsx)(Qe.a,{color:"inherit"});case"warning":return Object(w.jsx)(et.a,{color:"inherit"});default:return Object(w.jsx)("div",{})}}(e.message.severity),Object(w.jsx)(b.a,{variant:"subtitle2",className:n.typography,children:e.message.text}),Object(w.jsxs)("div",{className:n.icons,children:[e.message.error&&Object(w.jsx)(We.a,{"aria-label":"Show more",className:Ge()(n.expand,Object(O.a)({},n.expandOpen,a)),onClick:f,children:Object(w.jsx)(Xe.a,{color:"inherit"})}),Object(w.jsx)(We.a,{className:n.expand,onClick:h,children:Object(w.jsx)(Je.a,{color:"inherit"})})]})]}),Object(w.jsx)(qe.a,{in:a,timeout:"auto",unmountOnExit:!0,children:Object(w.jsxs)(Ve.a,{className:n.collapse,children:[Object(w.jsx)(it.CopyToClipboard,{text:JSON.stringify(e.message.error),onCopy:function(){return x(!0)},children:Object(w.jsxs)(p.a,{size:"small",className:n.button,children:[Object(w.jsx)(Qe.a,{className:Ge()(n.checkIcon,Object(O.a)({},n.checkIconCopy,j))}),"Copy to clipboard"]})}),Object(w.jsxs)("div",{className:n.errorWrap,children:[Object(w.jsx)(b.a,{children:"Error message: "}),Object(w.jsx)(b.a,{className:n.errorText,children:JSON.stringify(e.message.error,null,2)})]})]})})]})})})),st=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=e.children;return t.reduceRight((function(e,t){var n=t.component||t,r=t.props||{};return Object(w.jsx)(n,Object(o.a)(Object(o.a)({},r),{},{children:e}))}),n)}}(R.Provider,W.Provider);s.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(Ne.b,{maxSnack:4,anchorOrigin:{vertical:"bottom",horizontal:"right"},content:function(e,t){return Object(w.jsx)(at,{id:e,message:JSON.parse(t)})},autoHideDuration:1e4,children:Object(w.jsx)(Q.a,{store:Ae,children:Object(w.jsx)(S,{children:Object(w.jsx)(st,{children:Object(w.jsx)(Be,{})})})})})}),document.getElementById("root")),Re()}},[[639,1,2]]]);
//# sourceMappingURL=main.8b8c9058.chunk.js.map