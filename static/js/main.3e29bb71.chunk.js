(this.webpackJsonpwallpetint=this.webpackJsonpwallpetint||[]).push([[0],{407:function(e,t,n){},408:function(e,t){},448:function(e,t){},450:function(e,t){},474:function(e,t){},476:function(e,t){},488:function(e,t){},489:function(e,t){},512:function(e,t){},515:function(e,t){},517:function(e,t){},622:function(e,t){},623:function(e,t){},637:function(e,t,n){},639:function(e,t,n){"use strict";n.r(t);var r,o=n(25),a=n(1),c=n.n(a),i=n(69),s=n.n(i),l=(n(407),n(13)),u=n(728),b=n(730),d=n(731),j=n(724),x=n(0),p=n(6),O=n(12),f=n(356),h=n.n(f),g=n(701),m=n(702),v=n(387);!function(e){e[e.OPTIMISM=10]="OPTIMISM",e[e.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI"}(r||(r={}));var C=r.OPTIMISM,y=n(3),w=c.a.createContext(null),S=function(){var e=Object(a.useContext)(w);if(!e)throw new Error("useWeb3Context() can only be used inside of <Web3ContextProvider />, please declare it at a higher level.");var t=e.onChainProvider;return Object(a.useMemo)((function(){return Object(o.a)({},t)}),[e])},k=function(e){var t=e.children,n=Object(a.useState)(!1),o=Object(l.a)(n,2),c=o[0],i=o[1],s=Object(a.useState)(C),u=Object(l.a)(s,2),b=u[0],d=(u[1],Object(a.useState)(C)),j=Object(l.a)(d,2),f=j[0],S=j[1],k=Object(a.useState)(""),P=Object(l.a)(k,2),I=P[0],M=P[1],F=Object(a.useState)("https://mainnet.optimism.io"),T=Object(l.a)(F,2),z=T[0],N=(T[1],Object(a.useState)(new g.a(z))),L=Object(l.a)(N,2),B=L[0],D=L[1],R=Object(a.useState)(new h.a({cacheProvider:!0,providerOptions:{walletconnect:{package:v.a,options:{rpc:Object(O.a)({},r.OPTIMISM,"https://mainnet.optimism.io")}}}})),A=Object(l.a)(R,1)[0],E=function(){return!!A&&!!A.cachedProvider},U=Object(a.useCallback)((function(e){e.on&&(e.on("accountsChanged",(function(){return setTimeout((function(){return window.location.reload()}),1)})),e.on("chainChanged",function(){var e=Object(p.a)(Object(x.a)().mark((function e(t){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("network",(function(e,t){t&&window.location.reload()})))}),[B]),G=function(){var e=Object(p.a)(Object(x.a)().mark((function e(t){var n;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Number(t),S(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=Object(a.useCallback)(Object(p.a)(Object(x.a)().mark((function e(){var t,n,o,a;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.connect();case 2:return t=e.sent,U(t),n=new m.a(t,"any"),e.next=7,n.getNetwork().then((function(e){return Number(e.chainId)}));case 7:return o=e.sent,e.next=10,n.getSigner().getAddress();case 10:return a=e.sent,M(a),S(o),o===r.OPTIMISM&&D(n),i(!0),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)}))),[B,A,c]),W=Object(a.useCallback)(Object(p.a)(Object(x.a)().mark((function e(){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.clearCachedProvider(),i(!1),setTimeout((function(){window.location.reload()}),1);case 3:case"end":return e.stop()}}),e)}))),[B,A,c]),q=Object(a.useMemo)((function(){return{connect:H,disconnect:W,hasCachedProvider:E,provider:B,connected:c,address:I,chainID:b,web3Modal:A,providerChainID:f}}),[H,W,E,B,c,I,b,A,f]);return Object(y.jsx)(w.Provider,{value:{onChainProvider:q},children:t})},P=n(371),I=n.n(P);var M=function(){var e=S(),t=e.connect,n=e.disconnect,r=e.connected,o=e.web3,c=(e.address,e.provider,e.providerChainID),i=e.checkWrongNetwork,s=Object(a.useState)(r),x=Object(l.a)(s,2),p=x[0],O=x[1],f="Connect",h=t;return p&&(f="Disconnect",h=n),p&&c!==C&&(f="Wrong network",h=function(){i()}),Object(a.useEffect)((function(){O(r)}),[o,r]),Object(y.jsx)(u.a,{position:"static",sx:{backgroundColor:"rgba(9, 9, 10, 1)",backgroundImage:"none",py:2,px:2,borderBottom:"1px solid rgba(255, 255, 255, 0.16)"},children:Object(y.jsxs)(b.a,{flexGrow:1,justifyContent:"space-between",alignItems:"center",sx:{ml:{xs:"20px",md:"60px"},display:"flex"},children:[Object(y.jsx)(d.a,{variant:"h4",fontWeight:"700",textAlign:"center",color:"white",children:"Perp V2"}),Object(y.jsxs)(j.a,{variant:"contained",sx:{cursor:"pointer",backgroundColor:"transparent",color:"rgba(101, 230, 255, 1)",fontSize:"16px","&:hover":{backgroundColor:"rgba(101, 239, 255, 0.12)"}},onClick:h,children:[Object(y.jsx)(I.a,{sx:{color:"rgba(101, 230, 255, 1)",pr:1}}),f]})]})})},F=n(732),T=n(43),z=n(203),N=n(715),L=n(145),B=n(23),D=n.n(B),R=Object(z.a)((function(){var e=Object(a.useState)(T.a.LONG),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(new D.a(.02)),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(a.useState)(new D.a(0)),b=Object(l.a)(u,2),d=b[0],j=b[1],x=Object(a.useState)(new N.a({chainId:L.c.OPTIMISM,providerConfigs:[{rpcUrl:"https://optimism-mainnet.infura.io/v3/dd583584ac144f7984ac22cb0595646e"}]})),p=Object(l.a)(x,2),O=p[0];p[1];return Object(a.useMemo)((function(){return{side:n,setPositionSide:r,slippage:i,setSlippage:s,collateral:d,setCollateral:j,perpetualObject:O}}),[n,i,d])}));var A=function(){var e=R.useContainer(),t=e.side,n=e.setPositionSide,r=Object(a.useCallback)((function(){t!==T.a.LONG&&n(T.a.LONG)}),[n,t]),o=Object(a.useCallback)((function(){t!==T.a.SHORT&&n(T.a.SHORT)}),[n,t]);return Object(y.jsxs)(F.a,{size:"large",sx:{py:"12px",border:"none",width:"100%"},children:[Object(y.jsx)(j.a,{sx:{width:"50%",fontSize:"12px",backgroundColor:t===T.a.LONG?"#52c41a":"gray",color:t===T.a.LONG?"white":"black",border:"1px solid transparent","&: hover":{backgroundColor:"#49bc10",border:"1px solid transparent"}},onClick:r,children:"Long"}),Object(y.jsx)(j.a,{sx:{width:"50%",fontSize:"12px",backgroundColor:t===T.a.SHORT?"#fa672d":"gray",color:t===T.a.SHORT?"white":"black",border:"1px solid transparent","&: hover":{backgroundColor:"#f85819",border:"1px solid transparent"}},onClick:o,children:"Short"})]})},E=n(721),U=n(720),G=n(733),H=n(717),W=Object(z.a)((function(){var e=Object(a.useState)("ETHUSD"),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useMemo)((function(){return{marketticker:n,setMarketTicker:r}}),[n,r])}));var q=function(){var e=W.useContainer(),t=(e.marketticker,e.setMarketTicker),n=c.a.useState(!1),r=Object(l.a)(n,2),o=r[0],a=r[1];return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(G.a,{variant:"standard",sx:{m:1,width:"300px"},children:[Object(y.jsx)(E.a,{size:"small",shrink:!0,sx:{left:"120px",color:"rgba(145, 153, 167, 1)","&.Mui-focused":{color:"rgba(145, 153, 167, 1)"}},children:"Market"}),Object(y.jsx)(H.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",open:o,defaultValue:"ETHUSD",onClose:function(){a(!1)},onOpen:function(){a(!0)},label:"Market",onChange:function(e){t(e.target.value)},sx:{"&:hover:not(.Mui-disabled):before":{borderBottom:"none"},"& > svg":{color:"white"},"& ul":{backgroundColor:"rgba(9, 9, 10, 1)"},"&::before":{border:"none"},color:"white","&::after":{borderBottom:"none"}},children:["BTCUSD","ETHUSD","BNBUSD","AVAXUSD"].map((function(e){return Object(y.jsx)(U.a,{value:e,sx:{color:"black"},children:e},e)}))})]})})};var V=function(){return Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",backgroundColor:"rgba(29, 29, 29, 1)",flexDirection:{xs:"column",sm:"row"},borderRadius:"10px",py:"4px",mb:1},children:[Object(y.jsx)(q,{}),Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"flex-start",borderLeft:{sm:"1px solid rgba(145, 153, 167, 0.8)"},pl:{sm:2,md:3,xl:4},py:1},children:[Object(y.jsxs)(b.a,{sx:{pr:{xs:2,md:3,xl:4}},children:[Object(y.jsx)(d.a,{sx:{fontSize:"0.75rem",color:"rgba(145, 153, 167, 1)"},children:"Index Price"}),Object(y.jsx)(d.a,{sx:{color:"rgb(255, 255, 255)"},children:"1266.0"})]}),Object(y.jsxs)(b.a,{sx:{pr:{xs:2,md:3,xl:4}},children:[Object(y.jsx)(d.a,{sx:{fontSize:"0.75rem",color:"rgba(145, 153, 167, 1)"},children:"Volume (24h)"}),Object(y.jsx)(d.a,{sx:{color:"rgb(255, 255, 255)"},children:"5,798,410.3"})]}),Object(y.jsxs)(b.a,{sx:{pr:{xs:2,md:3,xl:4}},children:[Object(y.jsx)(d.a,{sx:{fontSize:"0.75rem",color:"rgba(145, 153, 167, 1)"},children:"Funding Rate (8h)"}),Object(y.jsx)(d.a,{sx:{color:"rgb(255, 255, 255)"},children:"0.0071%"})]})]})]})},J=n(722),Y=n(736);new B.Big(0),n(40),n(378);new RegExp(/\d(?=(\d{3})+\.)/g);function $(e,t){var n=e.indexOf("."),r=e.split("").filter((function(e,t){return"."!==e||t===n})).join("");return r.includes(".")&&r.length>r.indexOf(".")+(t+1)?r.substr(0,r.indexOf(".")+(t+1)):r}function _(e){var t=e.value,n=e.delay,r=void 0===n?200:n,o=e.onBeforeDebounce,c=e.onAfterDebounce,i=Object(a.useState)(t),s=Object(l.a)(i,2),u=s[0],b=s[1];return Object(a.useEffect)((function(){o&&o(t);var e=setTimeout((function(){b(t),c&&c(t)}),r);return function(){clearTimeout(e)}}),[t,r,o,c]),u}var X=function(){var e=R.useContainer(),t=e.collateral,n=e.setCollateral,r=Object(a.useState)(""),o=Object(l.a)(r,2),c=o[0],i=o[1],s=_({value:c,delay:800}),u=Object(a.useCallback)((function(e){var t=e.target.value;if(t>=0){var n=$(t,2);i(n)}}),[i]);return Object(a.useEffect)((function(){if(""!==s){var e=new D.a(s);null!==t&&void 0!==t&&t.eq(e)||n(e)}}),[t,s,n]),Object(a.useMemo)((function(){return Object(y.jsx)(b.a,{sx:{my:2},children:Object(y.jsx)(J.a,{id:"outlined-name",label:"Collateral",type:"number",value:c,placeholder:"0",InputLabelProps:{shrink:!0},InputProps:{endAdornment:Object(y.jsx)(Y.a,{position:"end",children:"USDC"})},onChange:u,sx:{width:"100%","& > label, & .MuiFormLabel-root.Mui-focused":{color:"#a3a8b7"},"& > div":{color:"white"},"& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7",borderWidth:"1px"},"& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7"},"& .MuiTypography-root":{color:"#a3a8b7"},"& fieldset.MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.16)"}}})})}),[c,u])};var K=function(){var e=R.useContainer(),t=e.slippage,n=e.setSlippage,r=Object(a.useState)(""),o=Object(l.a)(r,2),c=o[0],i=o[1],s=_({value:c,delay:800}),u=Object(a.useCallback)((function(e){var t=e.target.value;if(t>=0){var n=$(t,2);i(n)}}),[i]);return Object(a.useEffect)((function(){if(""!==s){var e=new D.a(s);null!==t&&void 0!==t&&t.eq(e)||n(e)}}),[t,s,n]),Object(a.useMemo)((function(){return Object(y.jsx)(b.a,{sx:{my:2},children:Object(y.jsx)(J.a,{id:"outlined-name",label:"Slippage",type:"number",value:c,placeholder:"0.02",InputLabelProps:{shrink:!0},InputProps:{endAdornment:Object(y.jsx)(Y.a,{position:"end",children:"%"})},onChange:u,sx:{width:"100%","& > label, & .MuiFormLabel-root.Mui-focused":{color:"#a3a8b7"},"& > div":{color:"white"},"& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7",borderWidth:"1px"},"& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7"},"& .MuiTypography-root":{color:"#a3a8b7"},"& fieldset.MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.16)"}}})})}),[c,u])},Q=n(65),Z=n(146),ee=function(e,t,n){var r=Object(o.a)({severity:t},n);e.message=r},te=Object(Z.b)({name:"messages",initialState:{message:null},reducers:{error:function(e,t){ee(e,"error",t.payload)},info:function(e,t){ee(e,"info",t.payload)},warning:function(e,t){ee(e,"warning",t.payload)},success:function(e,t){ee(e,"success",t.payload)},close:function(e){e.message=null}}}),ne=te.actions,re=ne.error,oe=ne.info,ae=ne.close,ce=(ne.warning,ne.success),ie=te.reducer,se=Object(Z.b)({name:"positions",initialState:{isPositionOpened:!1,isPositionUpdated:!1},reducers:{open:function(e){e.isPositionOpened=!0},close:function(e){e.isPositionOpened=!1},update:function(e){e.isPositionUpdated=!e.isPositionUpdated}}}),le=se.actions,ue=le.open,be=le.close,de=le.update,je=se.reducer,xe="Your transaction was successfully sent",pe="Something went wrong",Oe="Your position will update soon",fe="Your position will close soon",he=function(e){return new Promise((function(t){return setTimeout((function(){return t(null)}),1e3*e)}))};var ge=function(e,t){var n=pe;return 4001===e.code&&e.message.includes("User denied transaction signature")&&(n="User denied transaction signature"),t(re({text:n}))};var me=function(){var e=Object(Q.b)(),t=S().provider,n=W.useContainer().marketticker,r=R.useContainer(),o=r.collateral,c=r.setCollateral,i=R.useContainer().side,s=R.useContainer().slippage,u=R.useContainer().perpetualObject,O=n.substring(0,n.length-3),f=function(){var e,t=S(),n=t.connected,r=t.provider,o=t.providerChainID,c=Object(a.useState)(""),i=Object(l.a)(c,2),s=i[0],u=i[1],b=Object(a.useState)(""),d=Object(l.a)(b,2),j=d[0],O=d[1],f=Object(a.useState)(""),h=Object(l.a)(f,2),g=h[0],m=h[1],v=Object(a.useState)(""),y=Object(l.a)(v,2),w=y[0],k=y[1],P=Object(a.useState)(""),I=Object(l.a)(P,2),M=I[0],F=I[1],T=R.useContainer().perpetualObject,z=Object(a.useState)(),N=Object(l.a)(z,2),L=N[0],B=N[1],D=Object(a.useState)(!1),A=Object(l.a)(D,2),E=A[0],U=A[1],G=R.useContainer().side,H=W.useContainer().marketticker,q=R.useContainer().collateral,V=R.useContainer().slippage,J=H,Y=q;return Object(a.useEffect)((function(){function t(){return(t=Object(p.a)(Object(x.a)().mark((function t(){var a,c;return Object(x.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||o!==C){t.next=43;break}if(null!==q){t.next=4;break}return u(""),t.abrupt("return");case 4:if(!q.eq(0)){t.next=7;break}return u("0"),t.abrupt("return");case 7:if(U(!0),!1!==T.hasConnected()){t.next=14;break}return t.next=12,T.init();case 12:return t.next=14,T.connect({signer:r.getSigner()});case 14:if(e=null===(a=T.clearingHouse)||void 0===a?void 0:a.createPositionDraft({tickerSymbol:J,side:G,amountInput:Y,isAmountInputBase:!1}),console.log("NewPosition::",e),void 0===e||void 0!==L){t.next=27;break}return t.t0=O,t.next=20,e.getEntryPrice();case 20:return t.t1=t.sent.toFixed(2),(0,t.t0)(t.t1),t.t2=F,t.next=25,e.getBuyingPower();case 25:t.t3=t.sent.toFixed(4),(0,t.t2)(t.t3);case 27:return t.t4=m,t.next=30,e.getTransactionFee();case 30:return t.t5=t.sent.toFixed(8),(0,t.t4)(t.t5),t.t6=k,t.next=35,e.getPriceImpact();case 35:return t.t7=t.sent.toFixed(5),(0,t.t6)(t.t7),t.next=39,e.getOppositeAmountBound(V);case 39:c=t.sent,u(c.toFixed(7)),B(e),U(!1);case 43:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n,o,H,G,q,V]),{oppositeAmount:s,isCalculating:E,newPositionDraft:L,entryPrice:j,tradingFee:g,priceImpact:w,buyingPower:M}}(),h=f.oppositeAmount,g=f.isCalculating,m=f.newPositionDraft,v=f.entryPrice,w=f.tradingFee,k=f.priceImpact,P=f.buyingPower,I=Object(Q.c)((function(e){return e.positions.isPositionOpened})),M=g||null===o||o.eq(0),F=Object(a.useCallback)(Object(p.a)(Object(x.a)().mark((function n(){var r,o;return Object(x.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!1!==u.hasConnected()){n.next=6;break}return n.next=4,u.init();case 4:return n.next=6,u.connect({signer:t.getSigner()});case 6:return n.prev=6,n.next=9,null===u||void 0===u||null===(o=u.clearingHouse)||void 0===o?void 0:o.openPosition(m,s);case 9:return r=n.sent,console.log("Open Transaction",r),n.next=13,r.transaction.wait();case 13:return e(ce({text:xe})),n.next=16,he(.1);case 16:e(oe({text:Oe})),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(6),ge(n.t0,e);case 22:if(n.prev=22,!I){n.next=27;break}e(de()),n.next=31;break;case 27:return e(de()),n.next=30,he(.1);case 30:c(new D.a(0));case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[6,19,22,32]])}))),[m,s]);return Object(y.jsxs)(b.a,{sx:{mt:2},children:[Object(y.jsx)(b.a,{sx:{mb:2},children:Object(y.jsx)(J.a,{id:"outlined-name",label:"Output",type:"number",disabled:!0,value:h,placeholder:"0",InputLabelProps:{shrink:!0},InputProps:{endAdornment:Object(y.jsx)(Y.a,{position:"end",children:O})},sx:{width:"100%","& .MuiFormLabel-root.Mui-disabled, & .MuiFormLabel-root.Mui-focused, & .MuiTypography-root":{color:"#a3a8b7"},"& > div":{color:"white"},"& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled":{color:"#a3a8b7"},"& .MuiInputBase-root > input":{"-webkit-text-fill-color":"#a3a8b7"},"& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.16)"}}})}),Object(y.jsxs)(b.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Buying Power"}),Object(y.jsxs)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:["$",P]})]}),Object(y.jsx)(d.a,{sx:{mx:"auto",py:1,textAlign:"left",color:"white"},children:"Summary"}),Object(y.jsxs)(b.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Entry Price"}),Object(y.jsxs)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:["$",v]})]}),Object(y.jsxs)(b.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Trading Fee"}),Object(y.jsxs)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:["$",w]})]}),Object(y.jsxs)(b.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Price Impact"}),Object(y.jsxs)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:[k,"%"]})]}),Object(y.jsxs)(j.a,{variant:"contained",disabled:M,sx:{width:"100%",paddingY:"12px",backgroundColor:i===T.a.LONG?"success.light":"#ef5350",display:"block",mx:"auto","&: hover":{backgroundColor:i===T.a.LONG?"success.main":"#f44336"},"&: disabled":{backgroundColor:i===T.a.LONG?"success.light":"#ef5350",color:"black",opacity:.8}},onClick:F,children:["Confirm ",i]})]})},ve=n(113),Ce=n(719),ye=n(737);function we(){var e=Object(Q.b)(),t=S(),n=t.connected,r=t.provider,o=t.providerChainID,c=Object(a.useState)(!1),i=Object(l.a)(c,2),s=i[0],u=i[1],b=Object(a.useState)(!1),d=Object(l.a)(b,2),j=d[0],O=d[1],f=Object(a.useState)(""),h=Object(l.a)(f,2),g=h[0],m=h[1],v=Object(a.useState)(""),y=Object(l.a)(v,2),w=y[0],k=y[1],P=Object(a.useState)(""),I=Object(l.a)(P,2),M=I[0],F=I[1],T=Object(a.useState)(""),z=Object(l.a)(T,2),N=z[0],L=z[1],B=Object(a.useState)(""),D=Object(l.a)(B,2),A=D[0],E=D[1],U=Object(a.useState)(""),G=Object(l.a)(U,2),H=G[0],q=G[1],V=Object(a.useState)(""),J=Object(l.a)(V,2),Y=J[0],$=J[1],_=Object(a.useState)(""),X=Object(l.a)(_,2),K=X[0],Z=X[1],ee=Object(a.useState)(""),te=Object(l.a)(ee,2),ne=te[0],re=te[1],oe=R.useContainer().perpetualObject,ae=W.useContainer().marketticker,ce=Object(Q.c)((function(e){return e.positions.isPositionOpened})),ie=Object(Q.c)((function(e){return e.positions.isPositionUpdated}));return Object(a.useEffect)((function(){function t(){return(t=Object(p.a)(Object(x.a)().mark((function t(){var a,c,i,s,l,b,d,j,p,f,h,g,v,y,w,S;return Object(x.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||o!==C){t.next=50;break}if(b=oe.hasConnected(),console.log("Before Pos"),console.log("Position Opened",ce),!1!==b){t.next=9;break}return t.next=7,oe.init();case 7:return t.next=9,oe.connect({signer:r.getSigner()});case 9:return t.next=11,null===oe||void 0===oe||null===(a=oe.positions)||void 0===a?void 0:a.getTakerPositionByTickerSymbol(ae);case 11:if(d=t.sent,console.log("Position",d),void 0===d){t.next=17;break}e(ue()),t.next=19;break;case 17:return e(be()),t.abrupt("return");case 19:return j=d.sizeAbs.toFixed(8),m(j),p=d.side,k(p),t.next=25,null===oe||void 0===oe||null===(c=oe.positions)||void 0===c?void 0:c.getTotalPendingFundingPayments();case 25:return-1!==(f=t.sent)[ae].s?u(!1):u(!0),F(f[ae].toFixed(4)),t.next=30,null===oe||void 0===oe||null===(i=oe.positions)||void 0===i?void 0:i.getTotalTakerUnrealizedPnlFromAllMarkets();case 30:return-1!==(h=t.sent).s?O(!0):O(!1),L(h.toFixed(4)),g=d.entryPrice.toFixed(2),t.next=36,oe.contractReader.getIndexPrice(d.market.baseAddress);case 36:return v=t.sent,y=d.liquidationPrice,E(g),q(v.toFixed(2)),$(y.toFixed(1)),console.log("Position num",d),t.next=44,null===oe||void 0===oe||null===(s=oe.positions)||void 0===s?void 0:s.getAccountMarginRatio();case 44:return w=t.sent,t.next=47,null===oe||void 0===oe||null===(l=oe.positions)||void 0===l?void 0:l.getAccountLeverage();case 47:S=t.sent,Z((100*Number(w.toFixed(4))).toFixed(1)),re(S.toFixed(2));case 50:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n,o,ae,ie]),{isPositionOpened:ce,isLoss:s,posSize:g,side:w,pendingValue:M,isProfit:j,pnlValue:N,openPrice:A,indexPrice:H,liquidationPrice:Y,marginRatio:K,leverage:ne}}function Se(){var e=Object(Q.b)(),t=S(),n=t.connected,r=t.provider,o=R.useContainer().perpetualObject,a=R.useContainer().slippage,c=W.useContainer().marketticker,i=c,s=c.substring(0,c.length-3),l=we(),u=l.isLoss,O=l.posSize,f=l.side,h=l.pendingValue,g=l.isProfit,m=l.pnlValue,v=l.openPrice,C=l.indexPrice,w=l.liquidationPrice,k=l.marginRatio,P=l.leverage,I=function(){var t=Object(p.a)(Object(x.a)().mark((function t(){var n,c,s,l;return Object(x.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==o.hasConnected()){t.next=6;break}return t.next=4,o.init();case 4:return t.next=6,o.connect({signer:r.getSigner()});case 6:return t.next=8,null===o||void 0===o||null===(n=o.positions)||void 0===n?void 0:n.getTakerPositionByTickerSymbol(i);case 8:if(void 0===(c=t.sent)){t.next=29;break}return t.prev=10,t.next=13,null===o||void 0===o||null===(l=o.clearingHouse)||void 0===l?void 0:l.closePosition(c,a);case 13:return s=t.sent,console.log("Close Transaction",s),t.next=17,s.transaction.wait();case 17:return e(ce({text:xe})),t.next=20,he(.5);case 20:e(oe({text:fe})),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(10),ge(t.t0,e);case 26:return t.prev=26,e(be()),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[10,23,26,29]])})));return function(){return t.apply(this,arguments)}}();return Object(y.jsxs)(b.a,{sx:{maxWidth:"360px"},children:[Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[Object(y.jsx)(d.a,{sx:{fontSize:"16px",mr:1,color:"white"},children:O}),Object(y.jsx)(d.a,{sx:{fontSize:"12px",color:"#a3a8b7"},children:s})]}),Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"LONG"===f?"rgba(94, 217, 151, 1)":"rgba(234, 98, 98, 1)"},children:f})]}),Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Pending Funding Payment"}),Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:!0===u?"rgba(234, 98, 98, 1)":"rgba(94, 217, 151, 1)"},children:h})]}),Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Profit / Loss"}),Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:!0===g?"rgba(94, 217, 151, 1)":"rgba(234, 98, 98, 1)"},children:m})]}),Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Avg. Open Price"}),Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"white"},children:v})]}),Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Index Price"}),Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"white"},children:C})]}),Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Liquidation Price"}),Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"white"},children:w})]}),Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Margin Ratio"}),Object(y.jsxs)(d.a,{sx:{fontSize:"14px",color:"white"},children:[k,"%"]})]}),Object(y.jsxs)(b.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(y.jsx)(d.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Leverage"}),Object(y.jsxs)(d.a,{sx:{fontSize:"14px",color:"white"},children:[P,"x"]})]}),Object(y.jsx)(b.a,{sx:{display:"flex"},children:Object(y.jsx)(j.a,{variant:"contained",disabled:!1===n,sx:{paddingY:"8px",mt:1,backgroundColor:"rgb(255, 180, 89)",color:"black","&: hover":{backgroundColor:"rgb(255, 180, 89)",color:"white"},"&: disabled":{backgroundColor:"gray",color:"black",opacity:.8}},onClick:I,children:"Close"})})]})}var ke=["children","value","index"];function Pe(e){var t=e.children,n=e.value,r=e.index,a=Object(ve.a)(e,ke);return Object(y.jsx)("div",Object(o.a)(Object(o.a)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},a),{},{children:n===r&&Object(y.jsx)(b.a,{sx:{py:2},children:t})}))}function Ie(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function Me(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1],c=we().isPositionOpened;return Object(y.jsxs)(b.a,{sx:{width:"100%"},children:[Object(y.jsx)(b.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(y.jsxs)(Ce.a,{value:n,onChange:function(e,t){r(t)},"aria-label":"basic tabs example",textColor:"primary",TabIndicatorProps:{style:{backgroundColor:"white"}},sx:{"& .MuiTab-root":{color:"#a3a8b7"},"& .MuiTab-root.Mui-selected":{color:"white"}},children:[Object(y.jsx)(ye.a,Object(o.a)({label:"Position"},Ie(0))),Object(y.jsx)(ye.a,Object(o.a)({label:"Limit Orders"},Ie(1))),Object(y.jsx)(ye.a,Object(o.a)({label:"Fills"},Ie(2)))]})}),Object(y.jsx)(Pe,{value:n,index:0,children:c?Object(y.jsx)(Se,{}):Object(y.jsx)(d.a,{sx:{color:"#a3a8b7"},children:"You don't have any opened position yet"})}),Object(y.jsx)(Pe,{value:n,index:1,children:"Limit Orders"}),Object(y.jsx)(Pe,{value:n,index:2,children:"Fills"})]})}var Fe=function(){return Object(y.jsxs)(b.a,{sx:{backgroundColor:"rgba(9, 9, 10, 1)",py:1,px:1,pb:"400px"},children:[Object(y.jsx)(V,{}),Object(y.jsxs)(b.a,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"}},children:[Object(y.jsx)(b.a,{sx:{boxSizing:"border-box",flexGrow:"1",backgroundColor:"rgba(29, 29, 29, 1)",borderRadius:"10px",p:"12px"},children:Object(y.jsx)(Me,{})}),Object(y.jsxs)(b.a,{sx:{width:{xs:"100%",md:"360px"},boxSizing:"border-box",backgroundColor:"rgba(29, 29, 29, 1)",borderRadius:"10px",px:"12px",pb:"12px",ml:{md:1},mt:{xs:1,md:"0px"}},children:[Object(y.jsx)(A,{}),Object(y.jsx)(X,{}),Object(y.jsx)(K,{}),Object(y.jsx)(me,{})]})]})]})},Te=(n(637),n(129));var ze=function(){var e=Object(Te.c)().enqueueSnackbar,t=Object(Q.c)((function(e){return e.messages})),n=Object(Q.b)();return Object(a.useEffect)((function(){t.message&&(e(JSON.stringify(t.message)),n(ae()))}),[t.message]),Object(y.jsx)("div",{})};var Ne=function(){return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(M,{}),Object(y.jsx)(Fe,{}),Object(y.jsx)(ze,{})]})},Le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,743)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)}))},Be=Object(Z.a)({reducer:{messages:ie,positions:je},middleware:function(e){return e({serializableCheck:!1})}}),De=n(212),Re=n.n(De),Ae=n(738),Ee=n(739),Ue=n(740),Ge=n(727),He=n(729),We=n(716),qe=n(385),Ve=n.n(qe),Je=n(384),Ye=n.n(Je),$e=n(205),_e=n.n($e),Xe=n(383),Ke=n.n(Xe),Qe=n(381),Ze=n.n(Qe),et=n(382),tt=n.n(et),nt=n(380),rt=Object(We.a)((function(){return{root:{"@media (min-width:600px)":{minWidth:"344px !important"}},card:{width:"100%"},error:{backgroundColor:"#d32f2f"},info:{backgroundColor:"#2979ff"},warning:{backgroundColor:"#ffa000"},success:{backgroundColor:"#43a047"},typography:{color:"#FFFFFF",fontFamily:"Montserrat SemiBold"},actionRoot:{padding:"8px 8px 8px 16px",justifyContent:"space-between",color:"#FFFFFF"},icons:{marginLeft:"auto"},expand:{padding:"8px 8px",transform:"rotate(0deg)",transition:"all .2s",color:"#FFFFFF"},expandOpen:{transform:"rotate(180deg)"},collapse:{padding:16},checkIcon:{fontSize:20,color:"#b3b3b3",paddingRight:4},checkIconCopy:{color:"#43a047"},button:{padding:0,textTransform:"none"},errorWrap:{marginTop:10},errorText:{whiteSpace:"pre-wrap",maxHeight:300,overflow:"auto",background:"rgba(0,0,0,0.1)",padding:5,borderRadius:5}}})),ot=Object(a.forwardRef)((function(e,t){var n=rt(),r=Object(Te.c)().closeSnackbar,o=Object(a.useState)(!1),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(a.useState)(!1),b=Object(l.a)(u,2),x=b[0],p=b[1],f=Object(a.useCallback)((function(){s((function(e){return!e}))}),[]),h=Object(a.useCallback)((function(){r(e.id)}),[e.id,r]);return Object(y.jsx)(Te.a,{ref:t,className:n.root,children:Object(y.jsxs)(Ae.a,{className:Re()(n.card,n[e.message.severity]),children:[Object(y.jsxs)(Ee.a,{classes:{root:n.actionRoot},children:[function(e){switch(e){case"error":return Object(y.jsx)(Ze.a,{color:"inherit"});case"info":return Object(y.jsx)(tt.a,{color:"inherit"});case"success":return Object(y.jsx)(_e.a,{color:"inherit"});case"warning":return Object(y.jsx)(Ke.a,{color:"inherit"});default:return Object(y.jsx)("div",{})}}(e.message.severity),Object(y.jsx)(d.a,{variant:"subtitle2",className:n.typography,children:e.message.text}),Object(y.jsxs)("div",{className:n.icons,children:[e.message.error&&Object(y.jsx)(Ue.a,{"aria-label":"Show more",className:Re()(n.expand,Object(O.a)({},n.expandOpen,i)),onClick:f,children:Object(y.jsx)(Ye.a,{color:"inherit"})}),Object(y.jsx)(Ue.a,{className:n.expand,onClick:h,children:Object(y.jsx)(Ve.a,{color:"inherit"})})]})]}),Object(y.jsx)(Ge.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(y.jsxs)(He.a,{className:n.collapse,children:[Object(y.jsx)(nt.CopyToClipboard,{text:JSON.stringify(e.message.error),onCopy:function(){return p(!0)},children:Object(y.jsxs)(j.a,{size:"small",className:n.button,children:[Object(y.jsx)(_e.a,{className:Re()(n.checkIcon,Object(O.a)({},n.checkIconCopy,x))}),"Copy to clipboard"]})}),Object(y.jsxs)("div",{className:n.errorWrap,children:[Object(y.jsx)(d.a,{children:"Error message: "}),Object(y.jsx)(d.a,{className:n.errorText,children:JSON.stringify(e.message.error,null,2)})]})]})})]})})})),at=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=e.children;return t.reduceRight((function(e,t){var n=t.component||t,r=t.props||{};return Object(y.jsx)(n,Object(o.a)(Object(o.a)({},r),{},{children:e}))}),n)}}(R.Provider,W.Provider);s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(Te.b,{maxSnack:4,anchorOrigin:{vertical:"bottom",horizontal:"right"},content:function(e,t){return Object(y.jsx)(ot,{id:e,message:JSON.parse(t)})},autoHideDuration:1e4,children:Object(y.jsx)(Q.a,{store:Be,children:Object(y.jsx)(k,{children:Object(y.jsx)(at,{children:Object(y.jsx)(Ne,{})})})})})}),document.getElementById("root")),Le()}},[[639,1,2]]]);
//# sourceMappingURL=main.3e29bb71.chunk.js.map