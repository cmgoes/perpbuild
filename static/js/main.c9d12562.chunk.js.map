{"version":3,"sources":["constants/blockchain.ts","hooks/web3Context.tsx","hooks/helpers/index.tsx","Header/index.tsx","helpers/set-all.ts","store/slices/markets-slice.ts","container/trade/index.tsx","container/amm/index.tsx","Pages/Trade/components/Marketselector.tsx","Pages/Trade/components/PriceHeader.tsx","Pages/Trade/components/Sideswitcher.tsx","constants/number.ts","util/format.ts","hooks/useDebounce.ts","Pages/Trade/components/Collateral.tsx","Pages/Trade/components/Slippage.tsx","store/slices/position-slice.ts","store/slices/messages-slice.ts","constants/messages.ts","helpers/sleep.ts","helpers/metamask-error-wrap.ts","Pages/Trade/components/SendTransaction.tsx","Pages/Positions/components/PositionList.tsx","Pages/Positions/index.tsx","Pages/Trade/index.tsx","store/slices/user-slice.ts","Pages/Home/components/CollateralBalance.tsx","Pages/Home/components/CollateralBoard.tsx","Pages/Home/index.tsx","components/Messages/index.tsx","App.tsx","reportWebVitals.ts","store/store.ts","components/Messages/snackbar.tsx","index.tsx"],"names":["Networks","DEFAULD_NETWORK","OPTIMISM","Web3Context","React","createContext","useWeb3Context","web3Context","useContext","Error","onChainProvider","useMemo","Web3ContextProvider","children","useState","connected","setConnected","chainID","providerChainID","setProviderChainID","address","setAddress","uri","StaticJsonRpcProvider","provider","setProvider","Web3Modal","cacheProvider","providerOptions","walletconnect","package","WalletConnectProvider","options","rpc","web3Modal","hasCachedProvider","cachedProvider","_initListeners","useCallback","rawProvider","on","setTimeout","window","location","reload","chain","changeNetwork","_newNetwork","oldNetwork","otherChainID","network","Number","connect","connectedProvider","Web3Provider","getNetwork","then","chainId","getSigner","getAddress","connectedAddress","disconnect","clearCachedProvider","Provider","value","menuLists","link","text","ConnectMenu","web3","checkWrongNetwork","isConnected","navigate","useNavigate","buttonText","clickFunc","useEffect","AppBar","position","sx","backgroundColor","backgroundImage","py","px","borderBottom","Box","flexGrow","justifyContent","alignItems","ml","xs","md","display","Typography","variant","fontWeight","textAlign","Link","href","textDecoration","color","map","list","key","pl","cursor","fontFamily","onClick","Button","fontSize","pr","setAll","state","properties","Object","keys","forEach","calcMarketDetails","createAsyncThunk","perpetualObject","tickerSymbol","init","Marketmap","markets","marketMap","contractReader","getIndexPrice","baseAddress","_marketIndexPrice","console","log","toFixed","marketIndexPrice","marketsSlice","createSlice","name","initialState","isMarketInfoCalculated","isMarketInfoInitialized","reducers","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","error","actions","createSelector","Trade","createContainer","PositionSide","LONG","side","setPositionSide","Big","slippage","setSlippage","collateral","setCollateral","_collateral","_setCollateral","PerpetualProtocol","SupportedChainIds","providerConfigs","rpcUrl","AMM","marketticker","setMarketTicker","MarketSelector","useContainer","open","setOpen","FormControl","m","width","InputLabel","size","shrink","left","Select","labelId","id","defaultValue","onClose","onOpen","label","onChange","event","target","border","market","MenuItem","PriceHeader","dispatch","useDispatch","useSelector","CalcMarketDetails","timer","setInterval","clearInterval","flexDirection","sm","borderRadius","borderLeft","xl","SideSwitcher","handleLongOnClick","handleShortOnClick","SHORT","ButtonGroup","RegExp","formatInput","input","digits","firstDotIndex","indexOf","formattedString","split","filter","alphabet","index","join","includes","length","substr","useDebounce","delay","onBeforeDebounce","onAfterDebounce","debouncedValue","setDebouncedValue","handler","clearTimeout","Collateral","debouncedCollateral","handleOnInput","e","formattedValue","b_debouncedCollateral","eq","my","TextField","type","placeholder","InputLabelProps","InputProps","endAdornment","InputAdornment","borderColor","borderWidth","Slippage","_slippage","_setSlippage","debouncedSlippage","b_debouncedSlippage","calcPositionDetails","networkID","amountInput","isAmountInputBase","Promise","resevle","oppositeAmount","newPositionDraft","undefined","entryPrice","tradingFee","priceImpact","buyingPower","clearingHouse","createPositionDraft","getEntryPrice","entryPriceBound","getTransactionFee","tradingFeeBound","getPriceImpact","priceImpactBound","getOppositeAmountBound","oppositeAmountBound","signer","getBuyingPower","buyingPowerBound","openedPositionDetails","hasConnected","positions","getTakerPositionByTickerSymbol","close","isLoss","posSize","pendingValue","isProfit","pnlValue","openPrice","indexPrice","liquidationPrice","marginRatio","leverage","_posSize","sizeAbs","_side","getVaultBalanceOfSettlementToken","VaultBalanceSettlement","getNativeBalance","NativeValue","getAllowanceByToken","AllowanceValue","wallet","settlementToken","balanceOf","positionActions","getTotalPendingFundingPayments","_pendingValue","_isLoss","s","pnlValueCalc","getUnrealizedPnl","_pnlValue","_isProfit","_openPrice","_indexPrice","_liquidationPrice","getAccountMarginRatio","_marginRatio","getAccountLeverage","_leverage","positionsSlice","isPositionOpened","isCalculated","isOpenedPositionCalculated","createMessage","severity","message","messagesSlice","info","warning","success","messages","sleep","seconds","resolve","metamaskErrorWrap","err","code","SendTransaction","outputSymbol","substring","_perpetualObject","isDisabled","handleOpen","openPosition","openTx","transaction","wait","CalcPosition","loadProvider","CalcOpenedPosition","mt","mb","disabled","mx","pb","paddingY","opacity","PositionList","handleClose","closePosition","closeTx","maxWidth","mr","backgroundSize","boxShadow","backgroundPosition","TabPanel","props","other","role","hidden","a11yProps","Positions","setValue","Tabs","newValue","textColor","TabIndicatorProps","style","textTransform","Tab","boxSizing","p","calcUserCollateralDetails","getFreeCollateral","_freeCollateral","getAccountValue","_accountValue","vault","getBalanceList","_collateralBalanceList","getFreeCollateralList","_collateralFreeCollateralList","freeCollateral","accountValue","collateralBalanceList","collateralFreeCollateralList","calcUserAccountDetails","getAllowanceList","_allowanceList","_balanceList","getBalanceEth","_balanceEth","getCollateralTokenPriceList","_collateraltokenpricelist","_collateralTokenList","collateralTokenList","allowanceList","balanceList","balanceEth","collateralTokenPriceList","changeApproval","tokenIndex","approve","approveTx","changeDepositCollateral","amount","deposit","depositTx","depositETH","withdrawCollateral","withdraw","withdrawTx","withdrawETH","userSlice","isUserCollateralCalculated","isUserCollateralInitialized","isUserAccountCalculated","user","CollateralBoard","CalcUserCollateralDetails","background","Grid","container","spacing","marginTop","marginLeft","item","lg","modalStyle","top","transform","bgcolor","outline","outlineOffset","TokenList","openDepositModal","setDepositModalOpen","openWithdrawModal","setWithdrawModalOpen","modalIndex","setModalIndex","tokenValue","setTokenValue","handleDepositModalOpen","handleWithdrawModalOpen","handleModalClose","handleTokenValueChange","floatRegExp","dotRegExp","test","filteredValue","Math","floor","handleMaxValue","onSeekApproval","onSeekDeposit","onSeekWithdraw","TableContainer","component","Paper","Table","minWidth","TableHead","TableRow","TableCell","align","TableBody","scope","lineHeight","padding","Modal","IconButton","OutlinedInput","toNumber","height","Home","pt","CollateralBalance","Messages","enqueueSnackbar","useSnackbar","JSON","stringify","App","className","path","element","replace","to","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","store","configureStore","reducer","messagesReducer","positionsReducer","middleware","getDefaultMiddleware","serializableCheck","useStyles","makeStyles","root","card","typography","actionRoot","icons","expand","transition","expandOpen","collapse","checkIcon","paddingRight","checkIconCopy","button","errorWrap","errorText","whiteSpace","maxHeight","overflow","SnackMessage","forwardRef","ref","classes","closeSnackbar","expanded","setExpanded","isCopy","setIsCopy","handleExpandClick","oldExpanded","handleDismiss","Card","classnames","CardActions","getIcon","Collapse","in","timeout","unmountOnExit","onCopy","Providers","providers","reduceRight","ReactDOM","render","StrictMode","maxSnack","anchorOrigin","vertical","horizontal","content","parse","autoHideDuration","document","getElementById"],"mappings":"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","file":"static/js/main.c9d12562.chunk.js","sourcesContent":["export const TOKEN_DECIMALS = 9;\r\n\r\nexport enum Networks {\r\n    // AVAX = 43114,\r\n    OPTIMISM = 10, // for mainnet\r\n    OPTIMISM_GOERLI = 420, // for optimism goerli\r\n}\r\n\r\nexport const DEFAULD_NETWORK = Networks.OPTIMISM;\r\n// export const DEFAULD_NETWORK = Networks.OPTIMISM_GOERLI;\r\n","import React, { useState, ReactElement, useContext, useMemo, useCallback } from \"react\";\r\nimport Web3Modal from \"web3modal\";\r\nimport { StaticJsonRpcProvider, JsonRpcProvider, Web3Provider } from \"@ethersproject/providers\";\r\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\r\nimport { getMainnetURI } from \"./helpers\";\r\n// import { DEFAULD_NETWORK } from \"../constants\";\r\nimport { Networks, DEFAULD_NETWORK } from \"../constants/blockchain\";\r\n// import { messages } from \"../../constants/messages\";\r\n// import { useDispatch } from \"react-redux\";\r\n// import { swithNetwork } from \"../helpers/switch-network\";\r\n\r\ntype onChainProvider = {\r\n    connect: () => Promise<Web3Provider>;\r\n    disconnect: () => void;\r\n    checkWrongNetwork: () => Promise<boolean>;\r\n    provider: JsonRpcProvider;\r\n    address: string;\r\n    connected: Boolean;\r\n    web3Modal: Web3Modal;\r\n    chainID: number;\r\n    web3?: any;\r\n    providerChainID: number;\r\n    hasCachedProvider: () => boolean;\r\n};\r\n\r\nexport type Web3ContextData = {\r\n    onChainProvider: onChainProvider;\r\n} | null;\r\n\r\nconst Web3Context = React.createContext<Web3ContextData>(null);\r\n\r\nexport const useWeb3Context = () => {\r\n    const web3Context = useContext(Web3Context);\r\n    if (!web3Context) {\r\n        throw new Error(\"useWeb3Context() can only be used inside of <Web3ContextProvider />, \" + \"please declare it at a higher level.\");\r\n    }\r\n    const { onChainProvider } = web3Context;\r\n    return useMemo(() => {\r\n        return { ...onChainProvider };\r\n    }, [web3Context]);\r\n};\r\n\r\nexport const useAddress = () => {\r\n    const { address } = useWeb3Context();\r\n    return address;\r\n};\r\n\r\nexport const Web3ContextProvider: React.FC<{ children: ReactElement }> = ({ children }) => {\r\n    // const dispatch = useDispatch();\r\n\r\n    const [connected, setConnected] = useState(false);\r\n    const [chainID, setChainID] = useState(DEFAULD_NETWORK);\r\n    const [providerChainID, setProviderChainID] = useState(DEFAULD_NETWORK);\r\n    const [address, setAddress] = useState(\"\");\r\n\r\n    const [uri, setUri] = useState(getMainnetURI());\r\n    const [provider, setProvider] = useState<JsonRpcProvider>(new StaticJsonRpcProvider(uri));\r\n\r\n    const [web3Modal] = useState<Web3Modal>(\r\n        new Web3Modal({\r\n            cacheProvider: true,\r\n            providerOptions: {\r\n                walletconnect: {\r\n                    package: WalletConnectProvider,\r\n                    options: {\r\n                        rpc: {\r\n                            [Networks.OPTIMISM]: getMainnetURI(),\r\n                            // [Networks.OPTIMISM_GOERLI]: getMainnetURI(),\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n    );\r\n\r\n    const hasCachedProvider = (): boolean => {\r\n        if (!web3Modal) return false;\r\n        if (!web3Modal.cachedProvider) return false;\r\n        return true;\r\n    };\r\n\r\n    const _initListeners = useCallback(\r\n        (rawProvider: JsonRpcProvider) => {\r\n            if (!rawProvider.on) {\r\n                return;\r\n            }\r\n\r\n            rawProvider.on(\"accountsChanged\", () => setTimeout(() => window.location.reload(), 1));\r\n\r\n            rawProvider.on(\"chainChanged\", async (chain: number) => {\r\n                changeNetwork(chain);\r\n            });\r\n\r\n            rawProvider.on(\"network\", (_newNetwork, oldNetwork) => {\r\n                if (!oldNetwork) return;\r\n                window.location.reload();\r\n            });\r\n        },\r\n        [provider],\r\n    );\r\n\r\n    const changeNetwork = async (otherChainID: number) => {\r\n        const network = Number(otherChainID);\r\n\r\n        setProviderChainID(network);\r\n    };\r\n\r\n    const connect = useCallback(async () => {\r\n        const rawProvider = await web3Modal.connect();\r\n\r\n        _initListeners(rawProvider);\r\n\r\n        const connectedProvider = new Web3Provider(rawProvider, \"any\");\r\n\r\n        const chainId = await connectedProvider.getNetwork().then(network => Number(network.chainId));\r\n        const connectedAddress = await connectedProvider.getSigner().getAddress();\r\n\r\n        setAddress(connectedAddress);\r\n\r\n        setProviderChainID(chainId);\r\n\r\n        if (chainId === Networks.OPTIMISM) {\r\n            setProvider(connectedProvider);\r\n        }\r\n        // if (chainId === Networks.OPTIMISM_GOERLI) {\r\n        //     setProvider(connectedProvider);\r\n        // }\r\n\r\n        setConnected(true);\r\n\r\n        return connectedProvider;\r\n    }, [provider, web3Modal, connected]);\r\n\r\n    // const checkWrongNetwork = async (): Promise<boolean> => {\r\n    //     if (providerChainID !== DEFAULD_NETWORK) {\r\n    //         const shouldSwitch = window.confirm(messages.switch_to_avalanche);\r\n    //         if (shouldSwitch) {\r\n    //             await swithNetwork();\r\n    //             window.location.reload();\r\n    //         }\r\n    //         return true;\r\n    //     }\r\n\r\n    //     return false;\r\n    // };\r\n\r\n    const disconnect = useCallback(async () => {\r\n        web3Modal.clearCachedProvider();\r\n        setConnected(false);\r\n\r\n        setTimeout(() => {\r\n            window.location.reload();\r\n        }, 1);\r\n    }, [provider, web3Modal, connected]);\r\n\r\n    const onChainProvider = useMemo(\r\n        () => ({\r\n            connect,\r\n            disconnect,\r\n            hasCachedProvider,\r\n            provider,\r\n            connected,\r\n            address,\r\n            chainID,\r\n            web3Modal,\r\n            providerChainID,            \r\n        }),\r\n        [connect, disconnect, hasCachedProvider, provider, connected, address, chainID, web3Modal, providerChainID],\r\n    );\r\n    //@ts-ignore\r\n    return <Web3Context.Provider value={{ onChainProvider }}>{children}</Web3Context.Provider>;\r\n};\r\n","export const getMainnetURI = (): string => {\r\n  return \"https://mainnet.optimism.io\";  \r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport {\r\n\tAppBar,\r\n\tBox,\r\n\tButton,\r\n\tLink,       \r\n\tTypography,\r\n} from \"@mui/material\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useWeb3Context } from \"../hooks/web3Context\";\r\nimport { DEFAULD_NETWORK } from \"../constants/blockchain\";\r\nimport WalletIcon from '@mui/icons-material/Wallet';\r\n\r\nconst menuLists = [\r\n  {\r\n    link: \"/trade\",\r\n    text: \"Trade\",\r\n  },\r\n  {\r\n    link: \"/pools\",\r\n    text: \"Pools\",\r\n  },  \r\n];\r\n\r\nfunction ConnectMenu() {\r\n\tconst { connect, disconnect, connected, web3, address, provider, providerChainID, checkWrongNetwork } = useWeb3Context();    \r\n\tconst [isConnected, setConnected] = useState(connected);   \r\n\tlet navigate = useNavigate();     \r\n\r\n\tlet buttonText = \"Connect\";\r\n\tlet clickFunc: any = connect;   \r\n\r\n\tif (isConnected) {\r\n\t\tbuttonText = \"Disconnect\";\r\n\t\tclickFunc = disconnect;\r\n\t}    \r\n\r\n\tif (isConnected && providerChainID !== DEFAULD_NETWORK) {\r\n\t\tbuttonText = \"Wrong network\";\r\n\t\t// buttonStyle = { backgroundColor: \"rgb(255, 67, 67)\" };\r\n\t\tclickFunc = () => {\r\n\t\t\tcheckWrongNetwork();\r\n\t\t};\r\n\t}\r\n\r\n\tconst handleClickMenu = (link: string) => {    \r\n    navigate(link);\r\n  };\r\n\r\n\tuseEffect(() => {\r\n\t\tsetConnected(connected);\r\n\t}, [web3, connected]);    \r\n\r\n\treturn (\r\n\t\t<AppBar\r\n\t\t\tposition=\"static\"\r\n\t\t\tsx={{\r\n\t\t\t\tbackgroundColor: 'rgba(9, 9, 10, 1)',\r\n\t\t\t\tbackgroundImage: \"none\",\r\n\t\t\t\tpy: 2,\r\n\t\t\t\tpx: 2,\r\n\t\t\t\tborderBottom: '1px solid rgba(255, 255, 255, 0.16)'\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t\r\n\t\t\t<Box\r\n\t\t\t\tflexGrow={1}          \r\n\t\t\t\tjustifyContent=\"space-between\"         \r\n\t\t\t\talignItems=\"center\" \r\n\t\t\t\tsx={{ ml: { xs: \"20px\", md: \"60px\" }, display: \"flex\"                        \r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"h4\"\r\n\t\t\t\t\tfontWeight=\"700\"\r\n\t\t\t\t\ttextAlign=\"center\"\t\t\t\t\t                   \r\n\t\t\t\t>\r\n\t\t\t\t\t<Link href=\"/\" sx={{textDecoration: 'none', color: 'white'}}>\r\n\t\t\t\t\t\tPerp V2\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexGrow: '1'}}>\r\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', '& .MuiTypography-root:hover': {color: '#00ec96'}}}>\r\n\t\t\t\t\t\t{menuLists.map((list, key) => (\r\n\t\t\t\t\t\t\t<Typography key={key} sx={{pl: 4, cursor: 'pointer', fontFamily: 'Montserrat Bold', color: 'rgba(145, 153, 167, 1)'}} \r\n\t\t\t\t\t\t\t\tonClick={() => handleClickMenu(list.link)}>\r\n\t\t\t\t\t\t\t\t{list.text}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\tcursor: 'pointer', backgroundColor: 'transparent', \r\n\t\t\t\t\t\t\tcolor: 'rgba(101, 230, 255, 1)', fontSize: '16px',                            \r\n\t\t\t\t\t\t\t'&:hover': {backgroundColor: 'rgba(101, 239, 255, 0.12)'}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={clickFunc}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<WalletIcon sx={{color: 'rgba(101, 230, 255, 1)', pr: 1}}/>\r\n\t\t\t\t\t\t{buttonText}\r\n\t\t\t\t\t</Button>  \r\n\t\t\t\t</Box>              \r\n\t\t\t</Box>            \r\n\t\t</AppBar>\r\n\t);\r\n}\r\n\r\nexport default ConnectMenu;\r\n","export const setAll = (state: any, properties: any) => {\n    const props = Object.keys(properties);\n    props.forEach(key => {\n        state[key] = properties[key];\n    });\n};\n","import { createSlice,createAsyncThunk, createSelector } from \"@reduxjs/toolkit\";\r\nimport { JsonRpcProvider, StaticJsonRpcProvider } from \"@ethersproject/providers\";\r\nimport { Networks, DEFAULD_NETWORK } from \"../../constants/blockchain\";\r\nimport { setAll } from \"../../helpers/set-all\";\r\nimport { PerpetualProtocol } from \"@perp/sdk-curie\";\r\nimport Big from \"big.js\";\r\nimport { RootState } from \"../store\";\r\n\r\ninterface ICalcMarketDetails { \r\n\tperpetualObject: PerpetualProtocol;\t\r\n\ttickerSymbol: string;\r\n}\r\n\r\nexport const calcMarketDetails = createAsyncThunk(\"market/calcMarketDetails\", \r\n\tasync({ perpetualObject, tickerSymbol }: ICalcMarketDetails) => {\r\n\t\tawait perpetualObject.init();\r\n\t\tconst Marketmap = perpetualObject.markets.marketMap;\t\r\n\t\tconst _marketIndexPrice = await perpetualObject.contractReader.getIndexPrice(Marketmap[tickerSymbol].baseAddress);\r\n\t\tconsole.log(\"Update index price\", _marketIndexPrice.toFixed(2));\r\n\t\treturn {\r\n\t\t\tmarketIndexPrice: _marketIndexPrice.toFixed(2)\r\n\t\t}\r\n});\r\n\r\nconst initialState = {\r\n\tisMarketInfoCalculated: false,\r\n\tisMarketInfoInitialized: false,\t\r\n}\r\n\r\nexport interface IMarketsSlice {\t\r\n\tisMarketInfoCalculated: boolean,\r\n\tisMarketInfoInitialized: boolean,\t\t\r\n\tmarketIndexPrice: string,\t\r\n}\r\n\r\nconst marketsSlice = createSlice({\r\n\tname: \"markets\",\r\n\tinitialState,\r\n\treducers: {\t\t\t\r\n\t},\r\n\textraReducers: builder => {\r\n\t\tbuilder\t\t\t\r\n\t\t\t.addCase(calcMarketDetails.pending, state => {\t\t\t\r\n\t\t\t\tstate.isMarketInfoCalculated = false;\r\n\t\t\t})\r\n\t\t\t.addCase(calcMarketDetails.fulfilled, (state, action) => {\r\n\t\t\t\tsetAll(state, action.payload);\r\n\t\t\t\tstate.isMarketInfoCalculated = true;\t\r\n\t\t\t\tstate.isMarketInfoInitialized = true;\r\n\t\t\t})\r\n\t\t\t.addCase(calcMarketDetails.rejected, (state, { error }) => {\r\n\t\t\t\tstate.isMarketInfoCalculated = false;\t\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t})\t\t\t\r\n\t},    \r\n});\r\n\r\nconst baseInfo = (state: RootState) => state.markets;\r\nexport const { } = marketsSlice.actions;\r\n\r\nexport default marketsSlice.reducer;\r\n\r\nexport const getAppState = createSelector(baseInfo, markets => markets);","import { useMemo, useState } from \"react\"\nimport { createContainer } from \"unstated-next\"\nimport { PerpetualProtocol, PositionSide, SupportedChainIds } from \"@perp/sdk-curie\";\nimport Big from \"big.js\"\n\nexport const Trade = createContainer(useTrade)\n\nfunction useTrade() {\n    /* long = 1, short = 0 */\n    const [side, setPositionSide] = useState<PositionSide>(PositionSide.LONG);\n\n    /* min: 1, max: 10 */\n    // const [leverage, setLeverage] = useState<number>(1)\n\n    /* min: 0% */\n    const [slippage, setSlippage] = useState<Big>(new Big(0.02));\n\n    const [collateral, setCollateral] = useState<Big>(new Big(0));  \n    const [_collateral, _setCollateral] = useState<string>('');    \n\n    const [perpetualObject, setPerpetualObject] = useState<PerpetualProtocol>(new PerpetualProtocol({\n\t\t// chainId: SupportedChainIds.OPTIMISM_GOERLI,\n\t\tchainId: SupportedChainIds.OPTIMISM,   \n\t\t// chainId: 420,                 \n\t\tproviderConfigs: [\n\t\t\t{\n\t\t\t\t// rpcUrl: \"https://mainnet.optimism.io\",\n                rpcUrl: \"https://optimism-mainnet.infura.io/v3/dd583584ac144f7984ac22cb0595646e\",\n                // rpcUrl: \"https://optimism-mainnet.infura.io\",                \n                // rpcUrl: \"https://opt-mainnet.g.alchemy.com/v2/NqisNVbk-thJAQJMZKXdtIy-Vlyfryj-\",                \n\t\t\t\t// rpcUrl: \"https://goerli.optimism.io/\",\t\t\t\t\t\t\t\t\n\t\t\t},\n\t\t],\n\t}));\n\n    return useMemo(\n        () => ({\n            side,\n            setPositionSide,            \n            slippage,\n            setSlippage,\n            collateral,\n            setCollateral, \n            _collateral,\n            _setCollateral,            \n            perpetualObject,            \n        }),\n        [side, slippage, collateral, _collateral],\n    )\n}\n","import { useMemo, useState } from \"react\"\nimport { createContainer } from \"unstated-next\"\n\nexport const AMM = createContainer(useAMM)\n\nfunction useAMM() {    \n    const [marketticker, setMarketTicker] = useState<string>('ETHUSD');   \n\n    return useMemo(\n        () => ({\n            marketticker,\n            setMarketTicker\n        }),\n        [marketticker, setMarketTicker],\n    )\n}\n","import React, { useEffect } from \"react\"\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Box from '@mui/material/Box';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport {AMM} from \"../../../container/amm\";\n\nfunction MarketSelector() {\n\tconst MarketList = [\"BTCUSD\", \"ETHUSD\", \"BNBUSD\", \"AVAXUSD\"];  \t\n\n\tconst {marketticker, setMarketTicker} = AMM.useContainer();\n\tconst [open, setOpen] = React.useState(false);\n\n  const handleChange = (event: SelectChangeEvent<typeof marketticker>) => {\n    setMarketTicker(event.target.value);\t\t\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  return (\n    <>      \n      <FormControl variant=\"standard\" sx={{ m: 1, width: '300px' }}>\n        <InputLabel size=\"small\" shrink sx={{\n          left: '120px',\n          color: 'rgba(145, 153, 167, 1)', fontFamily: 'Montserrat',\n          '&.Mui-focused': {color: 'rgba(145, 153, 167, 1)'}\n        }}>\n          Market\n        </InputLabel>\n        <Select\n          labelId=\"demo-controlled-open-select-label\"\n          id=\"demo-controlled-open-select\"\n          open={open}\n          defaultValue={\"ETHUSD\"}\n          onClose={handleClose}\n          onOpen={handleOpen}        \n          label=\"Market\"\n          onChange={handleChange}\n          sx={{'&:hover:not(.Mui-disabled):before': {borderBottom: 'none'},\n            fontFamily: 'Montserrat Medium',\n            '& > svg': {color: 'white'},\n            '& ul': {backgroundColor: 'rgba(9, 9, 10, 1)'},\n            '&::before': {border: 'none'}, color: 'white',\n            '&::after': {borderBottom: 'none'}\n          }}          \n        >          \n\t\t\t\t\t{MarketList.map((market) => (\n\t\t\t\t\t\t<MenuItem key={market} value={market} sx={{color: 'black'}}>{market}</MenuItem>\t\n\t\t\t\t\t))}\n        </Select>\n      </FormControl>\n    </>\n  );\n}\n\nexport default MarketSelector\n","import {useState, useCallback, useEffect} from \"react\";\nimport { useSelector } from 'react-redux';\nimport { IReduxState } from \"../../../store/slices/state.interface\";\nimport { calcMarketDetails } from '../../../store/slices/markets-slice';\nimport { useDispatch } from \"react-redux\";\nimport {Trade} from '../../../container/trade';\nimport {AMM} from \"../../../container/amm\";\nimport {AppDispatch} from \"../../../store/store\";\n\nimport {\t\n\tBox,\t    \n\tTypography,\n} from \"@mui/material\";\n\nimport MarketSelector from \"./Marketselector\";\n\nfunction PriceHeader() {\n\tconst dispatch = useDispatch<AppDispatch>();\n\tconst {perpetualObject} = Trade.useContainer();\n\tconst {marketticker} = AMM.useContainer();\n\tconst isMarketInfoCalculated = useSelector<IReduxState, boolean>(state => {\n\t\treturn state.markets.isMarketInfoCalculated;\n\t});\t\n\n\tconst isMarketInfoInitialized = useSelector<IReduxState, boolean>(state => {\n\t\treturn state.markets.isMarketInfoInitialized;\n\t});\t\n\n\tconst marketIndexPrice = useSelector<IReduxState, string>(state => {\n\t\treturn state.markets.marketIndexPrice;\n\t});\n\n\tconst CalcMarketDetails = function() {\n\t\tdispatch(calcMarketDetails({ perpetualObject: perpetualObject, tickerSymbol: marketticker }));\n\t}\t \n\n\tuseEffect(() => {\n\t\tCalcMarketDetails();\n\t\tconst timer = setInterval(() => CalcMarketDetails(), 300000);\t\n\t\treturn () => clearInterval(timer);\t\n\t}, [marketticker]);\n\n\treturn (\n\t\t<Box sx={{backgroundColor: 'rgba(9, 9, 10, 1)', py: 1, px: 1}}>\n\t\t\t<Box sx={{display: 'flex', justifyContent: 'flex-start', alignItems: 'center', \n\t\t\t\tbackgroundColor: 'rgba(29, 29, 29, 1)',\n\t\t\t\tflexDirection: {xs: 'column', sm: 'row'},\n\t\t\t\tborderRadius: '10px',\n\t\t\t\tpy: '4px'\t\t\t\t\t\t\t\n\t\t\t}}>\n\t\t\t\t<MarketSelector />\n\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'flex-start',\n\t\t\t\t\tborderLeft: {sm: '1px solid rgba(145, 153, 167, 0.8)'},\n\t\t\t\t\tpl: {sm: 2, md: 3, xl: 4},\n\t\t\t\t\tpy: 1\n\t\t\t\t}}>\n\t\t\t\t\t<Box sx={{pr: {xs: 2, md: 3, xl: 4}}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '0.75rem', color: 'rgba(145, 153, 167, 1)', fontFamily: 'Montserrat'}}>Index Price</Typography>\n\t\t\t\t\t\t{isMarketInfoCalculated? <Typography sx={{color: 'rgb(255, 255, 255)', fontFamily: 'Montserrat Medium'}}>{marketIndexPrice}</Typography> :\n\t\t\t\t\t\t\t[isMarketInfoInitialized? <Typography sx={{color: 'rgb(255, 255, 255)', fontFamily: 'Montserrat Medium'}}>{marketIndexPrice}</Typography> : \n\t\t\t\t\t\t\t<Typography sx={{color: 'rgb(255, 255, 255)', fontFamily: 'Montserrat Medium'}}>0.0</Typography>]\n\t\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{pr: {xs: 2, md: 3, xl: 4}}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '0.75rem', color: 'rgba(145, 153, 167, 1)', fontFamily: 'Montserrat'}}>Volume (24h)</Typography>\n\t\t\t\t\t\t<Typography sx={{color: 'rgb(255, 255, 255)', fontFamily: 'Montserrat Medium'}}>5,798,410.3</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{pr: {xs: 2, md: 3, xl: 4}}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '0.75rem', color: 'rgba(145, 153, 167, 1)', fontFamily: 'Montserrat'}}>Funding Rate (8h)</Typography>\n\t\t\t\t\t\t<Typography sx={{color: 'rgb(255, 255, 255)', fontFamily: 'Montserrat Medium'}}>0.0071%</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Box>\n\t)\n}\n\nexport default PriceHeader;","import {useState, useCallback, useEffect} from \"react\";\n\nimport {\n\tAppBar,\n\tBox,\n\tButtonGroup,\n\tButton,\n\tContainer,    \n\tTypography,\n} from \"@mui/material\";\n\nimport { PositionSide } from \"@perp/sdk-curie\";\nimport {Trade} from '../../../container/trade';\n\n\nfunction SideSwitcher() {\n\tconst {side, setPositionSide} = Trade.useContainer();\t\n\tconst handleLongOnClick = useCallback(() => {\n\t\tif (side !== PositionSide.LONG) {\n\t\t\tsetPositionSide(PositionSide.LONG);\t\t\t\n\t\t}\t\t\n\t}, [setPositionSide, side])\n\n\tconst handleShortOnClick = useCallback(() => {\n\t\tif (side !== PositionSide.SHORT) {\n\t\t\tsetPositionSide(PositionSide.SHORT);\t\t\t\n\t\t}\t\t\t\t\n\t}, [setPositionSide, side])\t\n\n\treturn (\n\t\t<ButtonGroup size=\"large\" sx={{py: '12px', border: 'none', width: '100%'}}>\n\t\t\t<Button \n\t\t\t\tsx={{\n\t\t\t\t\twidth: '50%',\t\t\t\t\t\n\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\tfontFamily: 'Montserrat SemiBold',\n\t\t\t\t\tbackgroundColor: \n\t\t\t\t\t\tside === PositionSide.LONG? '#52c41a' : 'gray',\n\t\t\t\t\tcolor: \n\t\t\t\t\t\tside === PositionSide.LONG? 'white' : 'black',\n\t\t\t\t\tborder: '1px solid transparent',\n\t\t\t\t\t'&: hover': {\n\t\t\t\t\t\tbackgroundColor: '#49bc10',\t\n\t\t\t\t\t\tborder: '1px solid transparent'\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t}}\n\t\t\t\tonClick={handleLongOnClick}\n\t\t\t>\n\t\t\t\tLong\n\t\t\t</Button>\n\t\t\t<Button \n\t\t\t\tsx={{\n\t\t\t\t\twidth: '50%',\t\t\t\t\t\n\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\tfontFamily: 'Montserrat SemiBold',\n\t\t\t\t\tbackgroundColor: \n\t\t\t\t\t\tside === PositionSide.SHORT? '#fa672d' : 'gray',\n\t\t\t\t\tcolor: \n\t\t\t\t\t\tside === PositionSide.SHORT? 'white' : 'black',\n\t\t\t\t\tborder: '1px solid transparent',\n\t\t\t\t\t'&: hover': {\n\t\t\t\t\t\tbackgroundColor: '#f85819',\t\n\t\t\t\t\t\tborder: '1px solid transparent'\t\t\t\t\t\n\t\t\t\t\t}\t\t\n\t\t\t\t}}\n\t\t\t\tonClick={handleShortOnClick}\n\t\t\t>\n\t\t\t\tShort\n\t\t\t</Button>\t\t\t\n\t\t</ButtonGroup>\n\n\t\t\n\t)\n}\n\nexport default SideSwitcher;","import { Big } from \"big.js\"\nimport { BigNumber } from \"ethers\"\n\nexport const ERC20_DECIMAL_DIGITS = 18\nexport const USDC_DECIMAL_DIGITS = 6\n\nexport const USDC_PRECISION = 2\nexport const Slippage_PRECISION = 2\n\nexport const BIG_ZERO = new Big(0)\n\nexport interface Decimal {\n    d: BigNumber\n}\n","import { ERC20_DECIMAL_DIGITS, USDC_PRECISION } from \"../constants/number\"\n\nimport Big from \"big.js\"\nimport { BigNumber } from \"ethers\"\nimport { formatUnits } from \"ethers/lib/utils\"\n\nexport interface Decimal {\n    d: BigNumber\n}\n\n// Big Number to...\nexport function bigNum2FixedStr(\n    val: BigNumber,\n    decimals: number = ERC20_DECIMAL_DIGITS,\n    digits: number = USDC_PRECISION,\n): string {\n    return Number.parseFloat(formatUnits(val, decimals)).toFixed(digits)\n}\n\nexport function bigNum2Big(val: BigNumber, decimals: number = ERC20_DECIMAL_DIGITS): Big {\n    return new Big(val.toString()).div(new Big(10).pow(decimals))\n}\n\nexport function bigNum2Decimal(val: BigNumber): Decimal {\n    return { d: val }\n}\n\n// Big to...\nexport function big2BigNum(val: Big, decimals: number = ERC20_DECIMAL_DIGITS): BigNumber {\n    return BigNumber.from(val.mul(new Big(10).pow(decimals)).toFixed(0))\n}\n\nexport function big2Decimal(val: Big): Decimal {\n    return {\n        d: big2BigNum(val, ERC20_DECIMAL_DIGITS),\n    }\n}\n\n// Decimal to...\nexport function decimal2Big(decimal: Decimal): Big {\n    return bigNum2Big(decimal.d)\n}\n\n// check regex 101 online, https://regex101.com/r/EeneAE/1\n// to understand this regex\nconst regexUSLocaleNumber = new RegExp(/\\d(?=(\\d{3})+\\.)/g)\n\n// format number like 1000 => 1,000\nexport function numberWithCommas(number: string = \"\") {\n    return number.replace(regexUSLocaleNumber, \"$&,\")\n}\n\nexport function numberWithCommasUsdc(number: Big = new Big(0)) {\n    return numberWithCommas(number.toFixed(USDC_PRECISION))\n}\n\n// TODO: check is valid number\n// TODO: check is positive\n// TODO: use in slippage if possible\n// ex: if the input is 1.005 and the digits is 2, the function will return 1.00\nexport function formatInput(input: string, digits: number): string {\n    const firstDotIndex = input.indexOf(\".\")\n    const formattedString = input\n        .split(\"\")\n        .filter((alphabet, index) => {\n            return alphabet !== \".\" || index === firstDotIndex\n        })\n        .join(\"\")\n    return formattedString.includes(\".\") && formattedString.length > formattedString.indexOf(\".\") + (digits + 1)\n        ? formattedString.substr(0, formattedString.indexOf(\".\") + (digits + 1))\n        : formattedString\n}\n","import { useEffect, useState } from \"react\"\n\nconst DEFAULT_DELAY = 200\n\ninterface DebounceArgs<T> {\n    value: T\n    delay?: number\n    onBeforeDebounce?: Function\n    onAfterDebounce?: Function\n}\n\nexport function useDebounce<T>({ value, delay = DEFAULT_DELAY, onBeforeDebounce, onAfterDebounce }: DebounceArgs<T>) {\n    const [debouncedValue, setDebouncedValue] = useState<T>(value)\n\n    useEffect(() => {\n        if (onBeforeDebounce) {\n            onBeforeDebounce(value)\n        }\n\n        const handler = setTimeout(() => {\n            setDebouncedValue(value)\n            if (onAfterDebounce) {\n                onAfterDebounce(value)\n            }\n        }, delay)\n\n        return () => {\n            clearTimeout(handler)\n        }\n    }, [value, delay, onBeforeDebounce, onAfterDebounce])\n\n    return debouncedValue\n}\n","import {useState, useMemo, useCallback, useEffect} from \"react\";\n\nimport {\t\n\tBox,\t\t \n\tTextField,\n\tInputAdornment\t\n} from \"@mui/material\";\n\nimport Big from \"big.js\"\n\nimport {Trade} from '../../../container/trade';\nimport { USDC_PRECISION } from \"../../../constants/number\";\nimport { formatInput } from \"../../../util/format\"\n\nimport { useDebounce } from \"../../../hooks/useDebounce\"\n\nfunction Collateral() {\n\tconst {collateral, setCollateral} = Trade.useContainer();\t\n\tconst {_collateral, _setCollateral} = Trade.useContainer();\t\n\n\tconst debouncedCollateral = useDebounce({ value: _collateral, delay: 800 });\n\t\n\tconst handleOnInput = useCallback(\n\t\te => {\n\t\t\tconst value = e.target.value;\n\t\t\tif (value >= 0) {\n\t\t\t\tconst formattedValue = formatInput(value, USDC_PRECISION);\n\t\t\t\t_setCollateral(formattedValue);\n\t\t\t}\n\t\t},\n\t\t[_setCollateral],\n\t)\n\n\tuseEffect(() => {\n\t\t/* reset collateral to null */\n\t\tif (debouncedCollateral === \"\") {\n\t\t\t// setCollateral(null);\n\t\t\treturn;\n\t\t}\n\t\t/* detect if the value is different */\n\t\tconst b_debouncedCollateral = new Big(debouncedCollateral);\n\t\tif (!collateral?.eq(b_debouncedCollateral)) {\n\t\t\tsetCollateral(b_debouncedCollateral);\n\t\t}\n\t}, [collateral, debouncedCollateral, setCollateral]);\n\t\n\n\treturn useMemo(\n\t\t() => (\n\t\t<Box sx={{my: 2}}>\n\t\t\t<TextField\n\t\t\t\tid=\"outlined-name\"\n\t\t\t\tlabel=\"Collateral\"\n\t\t\t\ttype=\"number\"\n\t\t\t\tvalue={_collateral}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\t\t\t\t\n\t\t\t\tInputProps={{\n\t\t\t\t\tendAdornment: <InputAdornment position=\"end\" \n\t\t\t\t\tsx={{'& .MuiTypography-root': {fontSize: '12px', fontFamily: 'Montserrat'}}}>USDC</InputAdornment>,\n\t\t\t\t}}\n\t\t\t\tonChange={handleOnInput}\n\t\t\t\tsx={{width: '100%',\n\t\t\t\t\t'& > label, & .MuiFormLabel-root.Mui-focused': {color: '#a3a8b7', fontFamily: 'Montserrat'},\n\t\t\t\t\t'& > div': {color: 'white', fontSize: '18px', fontFamily: 'Montserrat Medium'},\n\t\t\t\t\t'& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7',\n\t\t\t\t\t\tborderWidth: '1px'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiTypography-root': {color: '#a3a8b7'},\n\t\t\t\t\t'& fieldset.MuiOutlinedInput-notchedOutline': {borderColor: 'rgba(255, 255, 255, 0.16)'}\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Box>\t\t\n\t\t), [_collateral, handleOnInput]\n\t)\n}\n\nexport default Collateral;","import {useState, useMemo, useCallback, useEffect} from \"react\";\n\nimport {\t\n\tBox,\t\t \n\tTextField,\n\tInputAdornment\t\n} from \"@mui/material\";\n\nimport Big from \"big.js\"\n\nimport {Trade} from '../../../container/trade';\nimport { Slippage_PRECISION } from \"../../../constants/number\";\nimport { formatInput } from \"../../../util/format\"\n\nimport { useDebounce } from \"../../../hooks/useDebounce\"\n\nfunction Slippage() {\n\tconst {slippage, setSlippage} = Trade.useContainer();\t\n\tconst [_slippage, _setSlippage] = useState<string>(\"\");\t\n\n\tconst debouncedSlippage = useDebounce({ value: _slippage, delay: 800 });\n\t\n\tconst handleOnInput = useCallback(\n\t\te => {\n\t\t\tconst value = e.target.value;\n\t\t\tif (value >= 0) {\n\t\t\t\tconst formattedValue = formatInput(value, Slippage_PRECISION);\n\t\t\t\t_setSlippage(formattedValue);\n\t\t\t}\n\t\t},\n\t\t[_setSlippage],\n\t)\n\n\tuseEffect(() => {\n\t\t/* reset collateral to null */\n\t\tif (debouncedSlippage === \"\") {\n\t\t\t// setSlippage(null);\n\t\t\treturn;\n\t\t}\n\t\t/* detect if the value is different */\n\t\tconst b_debouncedSlippage = new Big(debouncedSlippage);\n\t\tif (!slippage?.eq(b_debouncedSlippage)) {\n\t\t\tsetSlippage(b_debouncedSlippage);\n\t\t}\n\t}, [slippage, debouncedSlippage, setSlippage]);\n\t\n\n\treturn useMemo(\n\t\t() => (\n\t\t<Box sx={{my: 2}}>\n\t\t\t<TextField\n\t\t\t\tid=\"outlined-name\"\n\t\t\t\tlabel=\"Slippage\"\n\t\t\t\ttype=\"number\"\n\t\t\t\tvalue={_slippage}\n\t\t\t\tplaceholder=\"0.02\"\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\t\t\t\t\n\t\t\t\tInputProps={{\n\t\t\t\t\tendAdornment: <InputAdornment position=\"end\" \n\t\t\t\t\tsx={{'& .MuiTypography-root': {fontSize: '12px', fontFamily: 'Montserrat'}}}>%</InputAdornment>,\n\t\t\t\t}}\n\t\t\t\tonChange={handleOnInput}\n\t\t\t\tsx={{width: '100%',\n\t\t\t\t\t'& > label, & .MuiFormLabel-root.Mui-focused': {color: '#a3a8b7', fontFamily: 'Montserrat'},\n\t\t\t\t\t'& > div': {color: 'white', fontSize: '18px', fontFamily: 'Montserrat Medium'},\n\t\t\t\t\t'& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7',\n\t\t\t\t\t\tborderWidth: '1px'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiTypography-root': {color: '#a3a8b7'},\n\t\t\t\t\t'& fieldset.MuiOutlinedInput-notchedOutline': {borderColor: 'rgba(255, 255, 255, 0.16)'}\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Box>\t\t\n\t\t), [_slippage, handleOnInput]\n\t)\n}\n\nexport default Slippage;","import { createSlice,createAsyncThunk, createSelector } from \"@reduxjs/toolkit\";\nimport { JsonRpcProvider, StaticJsonRpcProvider } from \"@ethersproject/providers\";\nimport { Networks, DEFAULD_NETWORK } from \"../../constants/blockchain\";\nimport { setAll } from \"../../helpers/set-all\";\nimport { PerpetualProtocol, PositionSide, PositionDraft } from \"@perp/sdk-curie\";\nimport Big from \"big.js\";\nimport { RootState } from \"../store\";\n\ninterface ICalcPositionDetails { \n\tconnected: Boolean;   \n  networkID: Networks;  \n\tprovider: StaticJsonRpcProvider | JsonRpcProvider;\n\tperpetualObject: PerpetualProtocol;\n\tside: PositionSide;\n\tslippage: Big;\n\ttickerSymbol: string;\n\tamountInput: Big;\t\n}\n\nexport const calcPositionDetails = createAsyncThunk(\"position/calcPositionDetails\", \n\tasync({connected, networkID, provider, perpetualObject, side, slippage, tickerSymbol, amountInput}: ICalcPositionDetails) => {\t\n\t\tconst isAmountInputBase = false;\t\n\t\tlet buyingPowerBound: Big;\n\t\t\t\t\t\t\t\n\t\tif(amountInput === null) {\n\t\t\treturn new Promise<any>(resevle => {\n\t\t\t\tresevle({\n\t\t\t\t\toppositeAmount: \"\",\t\t\t\t\t\n\t\t\t\t\tnewPositionDraft: undefined,\n\t\t\t\t\tentryPrice: \"\",\n\t\t\t\t\ttradingFee: \"\",\n\t\t\t\t\tpriceImpact: \"\",\n\t\t\t\t\tbuyingPower: \"\",\t\t\t\t\t\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tif(amountInput.eq(0)) {\n\t\t\treturn new Promise<any>(resevle => {\n\t\t\t\tresevle({\n\t\t\t\t\toppositeAmount: \"0\",\t\t\t\t\t\n\t\t\t\t\tnewPositionDraft: undefined,\n\t\t\t\t\tentryPrice: \"\",\n\t\t\t\t\ttradingFee: \"\",\n\t\t\t\t\tpriceImpact: \"\",\n\t\t\t\t\tbuyingPower: \"\",\t\t\t\t\t\n\t\t\t\t});\n\t\t\t});\n\t\t}\t\n\t\t\n\t\tawait perpetualObject.init();\t\t\n\n\t\tconst newPositionDraft = perpetualObject.clearingHouse?.createPositionDraft({\n\t\t\ttickerSymbol,\n\t\t\tside,\n\t\t\tamountInput,\n\t\t\tisAmountInputBase\n\t\t});\t\n\t\tconsole.log(\"NewPosition::\", newPositionDraft);\t\n\t\t\n\t\tconst entryPriceBound = await newPositionDraft!.getEntryPrice();\n\t\tconst tradingFeeBound = await newPositionDraft!.getTransactionFee();\n\t\tconst priceImpactBound = await newPositionDraft!.getPriceImpact();\t\t\n\t\tconst oppositeAmountBound = await newPositionDraft!.getOppositeAmountBound(slippage);\t\t\t\t\t\n\n\t\tif( connected === true && networkID === DEFAULD_NETWORK ) {\n\t\t\tawait perpetualObject.connect({ signer: provider.getSigner() });\n\t\t\tbuyingPowerBound = await newPositionDraft!.getBuyingPower();\t\n\t\t\treturn {\n\t\t\t\toppositeAmount: oppositeAmountBound!.toFixed(7),\t\t\n\t\t\t\tnewPositionDraft,\n\t\t\t\tentryPrice: entryPriceBound!.toFixed(2),\n\t\t\t\ttradingFee: tradingFeeBound!.toFixed(8),\n\t\t\t\tpriceImpact: priceImpactBound!.toFixed(5),\n\t\t\t\tbuyingPower: buyingPowerBound!.toFixed(4),\n\t\t\t};\n\t\t}\t\t\t\n\t\t\n\t\treturn {\n\t\t\toppositeAmount: oppositeAmountBound!.toFixed(7),\t\t\n\t\t\tnewPositionDraft,\n\t\t\tentryPrice: entryPriceBound!.toFixed(2),\n\t\t\ttradingFee: tradingFeeBound!.toFixed(8),\n\t\t\tpriceImpact: priceImpactBound!.toFixed(5),\n\t\t\tbuyingPower: '',\n\t\t};\n});\n\ninterface IOpenedPositionDetails {   \n\taddress: string; \n  networkID: Networks;\n  provider: StaticJsonRpcProvider | JsonRpcProvider;\n\tperpetualObject: PerpetualProtocol;\t\n\ttickerSymbol: string;\t\n}\n\nexport const openedPositionDetails = createAsyncThunk(\"position/openedPositionDetails\", \n\tasync({address, networkID, provider, perpetualObject, tickerSymbol}: IOpenedPositionDetails, { dispatch }) => {\n\t\tif( networkID === DEFAULD_NETWORK ) {        \n\t\t\tconst hasconnected = perpetualObject.hasConnected(); \t\t\t\n\t\t\tif(hasconnected === false) {\n\t\t\t\tawait perpetualObject.init();\n\t\t\t\tawait perpetualObject.connect({ signer: provider.getSigner() });\n\t\t\t}\t\t\n\t\t\tconst position = await perpetualObject?.positions?.getTakerPositionByTickerSymbol(tickerSymbol);  \n\t\t\tif(position !== undefined) {\n\t\t\t\tdispatch(open());          \n\t\t\t} else {\n\t\t\t\tdispatch(close());\t\t\t\t\n\t\t\t\treturn new Promise<any>(resevle => {\n\t\t\t\t\tresevle({\n\t\t\t\t\t\tisLoss: false,\t\t\t\t\t\n\t\t\t\t\t\tposSize: '',\n\t\t\t\t\t\tside: PositionSide.LONG,\n\t\t\t\t\t\tpendingValue: '',\n\t\t\t\t\t\tisProfit: false,\n\t\t\t\t\t\tpnlValue: '',\n\t\t\t\t\t\topenPrice: '',\n\t\t\t\t\t\tindexPrice: '',\n\t\t\t\t\t\tliquidationPrice: '',\n\t\t\t\t\t\tmarginRatio: '',\n\t\t\t\t\t\tleverage: ''\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t});\t\t\t\t\n\t\t\t}\t\t\n\t\t\t\n\t\t\tconst _posSize = position!.sizeAbs.toFixed(8);\t\t\t\n\t\t\tconst _side = position!.side;\t\n\t\t\tconst VaultBalanceSettlement = await perpetualObject.contractReader.getVaultBalanceOfSettlementToken(address); \t \n\t\t\tconsole.log(\"Vault Balance of Settlement\", VaultBalanceSettlement);\n\t\t\tconst NativeValue = await perpetualObject.contractReader.getNativeBalance(address); \t \n\t\t\tconsole.log(\"Native Value\", NativeValue);\n\t\t\tconst spender = \"0xAD7b4C162707E0B2b5f6fdDbD3f8538A5fbA0d60\";\n\t\t\tconst tokenaddress = \"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58\";\n\t\t\tconst AllowanceValue = await perpetualObject.contractReader.getAllowanceByToken(address, spender, tokenaddress); \t \n\t\t\tconsole.log(\"Allowance Value\", AllowanceValue);\n\t\t\tconst positionActions = await perpetualObject.wallet!.settlementToken.balanceOf(address); \t \n\t\t\tconsole.log(\"Position Actions\", positionActions);\n\n\t\t\t// const pendingValue_ = await perpetualObject.contractReader.getPendingFundingPayments(Marketmap, address); \t \n\t\t\t// console.log(\"Pending value\", pendingValue_);\n\t\t\tconst _pendingValue = await perpetualObject!.positions!.getTotalPendingFundingPayments(); \n\t\t\tlet _isLoss;      \n\t\t\tif(_pendingValue![tickerSymbol].s !== -1) {\n\t\t\t\t_isLoss = false;\n\t\t\t} else {\n\t\t\t\t_isLoss = true;         \n\t\t\t}\t\n\n\t\t\tconst pnlValueCalc = await perpetualObject!.positions!.getTakerPositionByTickerSymbol(tickerSymbol);\n\t\t\tconst _pnlValue = await pnlValueCalc!.getUnrealizedPnl();\n\t\t\tlet _isProfit;  \n\t\t\tif(_pnlValue.s !== -1) {\n\t\t\t\t_isProfit = true;\n\t\t\t} else {\n\t\t\t\t_isProfit = false;         \n\t\t\t}  \n\t\t\tconst _openPrice = position!.entryPrice.toFixed(2);\n\t\t\tconst _indexPrice = await perpetualObject.contractReader.getIndexPrice(position!.market.baseAddress);         \n\t\t\tconst _liquidationPrice = position!.liquidationPrice; \t\t\t\n\t\t\t\n\t\t\tconst _marginRatio = await perpetualObject?.positions?.getAccountMarginRatio();\n\t\t\tconst _leverage = await perpetualObject?.positions?.getAccountLeverage();\n\n\t\t\treturn {\n\t\t\t\tisLoss: _isLoss,\n\t\t\t\tposSize: _posSize,\n\t\t\t\tside: _side,\n\t\t\t\tpendingValue: _pendingValue![tickerSymbol].toFixed(4),\n\t\t\t\tisProfit: _isProfit,\n\t\t\t\tpnlValue: _pnlValue.toFixed(4),\n\t\t\t\topenPrice: _openPrice,\n\t\t\t\tindexPrice: _indexPrice.toFixed(2),\n\t\t\t\tliquidationPrice: _liquidationPrice!.toFixed(1),\n\t\t\t\tmarginRatio: (Number(_marginRatio!.toFixed(4))*100).toFixed(1),\n\t\t\t\tleverage: _leverage!.toFixed(2)\n\t\t\t}\n\t\t}\n});\t\n\nconst initialState = {\n\tisPositionOpened: false,\t\n\tisCalculated: false,\n\tisOpenedPositionCalculated: false,\n}\n\nexport interface IPositionSlice {\n\tisPositionOpened: boolean,\t\n\tisCalculated: boolean,\n\tisOpenedPositionCalculated: boolean,\t\n\toppositeAmount: string,\t\n\tnewPositionDraft: PositionDraft<string> | undefined,\n\tentryPrice: string,\n\ttradingFee: string,\n\tpriceImpact: string,\n\tbuyingPower: string,\n\tisLoss: boolean,\n\tposSize: string,\n\tside: PositionSide,\n\tpendingValue: string,\n\tisProfit: boolean,\n\tpnlValue: string,\n\topenPrice: string,\n\tindexPrice: string,\n\tliquidationPrice: string,\n\tmarginRatio: string,\n\tleverage: string,\t\t\n}\n\nconst positionsSlice = createSlice({\n\tname: \"positions\",\n\tinitialState,\n\treducers: {\n\t\topen(state)\t{\n\t\t\tstate.isPositionOpened = true;\n\t\t\tstate.isCalculated = false;\n\t\t},\t\t\n\t\tclose(state) {\n\t\t\tstate.isPositionOpened = false;\n\t\t\tstate.isOpenedPositionCalculated = false;\n\t\t}\t\t\n\t},\n\textraReducers: builder => {\n\t\tbuilder\n\t\t\t.addCase(calcPositionDetails.pending, state => {\n\t\t\t\tstate.isCalculated = false;\n\t\t\t})\n\t\t\t.addCase(calcPositionDetails.fulfilled, (state, action) => {\n\t\t\t\tsetAll(state, action.payload);\n\t\t\t\tstate.isCalculated = true;\n\t\t\t})\n\t\t\t.addCase(calcPositionDetails.rejected, (state, { error }) => {\n\t\t\t\tstate.isCalculated = false;\n\t\t\t\tconsole.log(error);\n\t\t\t})\n\t\t\t.addCase(openedPositionDetails.pending, state => {\t\t\t\n\t\t\t\tstate.isOpenedPositionCalculated = false;\t\n\t\t\t})\n\t\t\t.addCase(openedPositionDetails.fulfilled, (state, action) => {\n\t\t\t\tsetAll(state, action.payload);\t\t\t\t\n\t\t\t\tstate.isOpenedPositionCalculated = true;\t\t\t\t\n\t\t\t})\n\t\t\t.addCase(openedPositionDetails.rejected, (state, { error }) => {\t\t\t\t\n\t\t\t\tstate.isOpenedPositionCalculated = false;\n\t\t\t\tconsole.log(error);\n\t\t\t})\t\t\t\t\n\t},    \n});\n\nconst baseInfo = (state: RootState) => state.positions;\nexport const { open, close } = positionsSlice.actions;\n\nexport default positionsSlice.reducer;\n\nexport const getAppState = createSelector(baseInfo, positions => positions);","import { AlertColor } from \"@mui/material/Alert\";\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport type Message = IMessage & {\n    severity: AlertColor;\n};\n\nexport interface MessagesState {\n    message: Message | null;\n}\n\ninterface IMessage {\n    text: string;\n    error?: any;\n}\n\n// Adds a message to the store\nconst createMessage = function (state: MessagesState, severity: AlertColor, text: IMessage) {\n    const message: Message = {\n        severity,\n        ...text,\n    };\n    state.message = message;\n};\nconst initialState: MessagesState = {\n    message: null,\n};\nconst messagesSlice = createSlice({\n    name: \"messages\",\n    initialState,\n    reducers: {\n        // Creates an error message\n        error(state, action: PayloadAction<IMessage>) {\n            createMessage(state, \"error\", action.payload);\n        },\n        // Creates an information message\n        info(state, action: PayloadAction<IMessage>) {\n            createMessage(state, \"info\", action.payload);\n        },\n        warning(state, action: PayloadAction<IMessage>) {\n            createMessage(state, \"warning\", action.payload);\n        },\n        success(state, action: PayloadAction<IMessage>) {\n            createMessage(state, \"success\", action.payload);\n        },\n        // Closes a message\n        close(state) {\n            state.message = null;\n        },\n    },\n});\n\nexport const { error, info, close, warning, success } = messagesSlice.actions;\n\nexport default messagesSlice.reducer;\n","export const messages = {\n    please_connect: \"Please connect your wallet to the Optimism network to use kandyland.\",\n    please_connect_wallet: \"Please connect your wallet.\",    \n    tx_successfully_send: \"Your transaction was successfully sent\",\n    your_allowance_updated: \"Your allowance was successfully updated\",\n    your_deposit_updated: \"Your deposit was successfully updated\",\n    your_position_updated: \"Your position was successfully updated\",\n    your_collateral_withdrawed: \"Your collateral was successfully withdrawed\",    \n    something_wrong: \"Something went wrong\",\n    switch_to_avalanche: \"Switch to the Optimism network?\",\n    slippage_too_small: \"Slippage too small\",\n    slippage_too_big: \"Slippage too big\",\n    your_position_update_soon: \"Your position will update soon\",  \n    your_position_close_soon: \"Your position will close soon\",    \n    not_enough_profit: \"Your position is not profit now\",\n};\n","export const sleep = (seconds: number) => {\n    return new Promise(resolve => setTimeout(() => resolve(null), seconds * 1000));\n};\n","import { Dispatch } from \"redux\";\nimport { error } from \"../store/slices/messages-slice\";\nimport { messages } from \"../constants/messages\";\n\nexport const metamaskErrorWrap = (err: any, dispatch: Dispatch) => {\n    let text = messages.something_wrong;    \n\n    if (err.code === 4001) {\n        if (err.message.includes(\"User denied transaction signature\")) {\n            text = \"User denied transaction signature\";            \n        }\n    }\n    return dispatch(error({ text: text }));\n\n    \n};\n","import {useState, useMemo, useCallback, useEffect} from \"react\";\nimport { useSelector } from 'react-redux';\nimport { calcPositionDetails, openedPositionDetails } from '../../../store/slices/position-slice';\nimport { IReduxState } from \"../../../store/slices/state.interface\";\nimport { useDispatch } from \"react-redux\";\nimport { warning, success, info, error } from \"../../../store/slices/messages-slice\";\nimport { messages } from \"../../../constants/messages\";\nimport { sleep } from \"../../../helpers/sleep\";\nimport { PerpetualProtocol, PositionDraft, SupportedChainIds } from \"@perp/sdk-curie\";\nimport {AppDispatch} from \"../../../store/store\";\n\nimport {\t\n\tBox,\t\t \n\tButton,\n\tTextField,\n\tTypography,\n\tInputAdornment\t\n} from \"@mui/material\";\n\nimport { useWeb3Context } from \"../../../hooks/web3Context\";\nimport {Trade} from '../../../container/trade';\nimport {AMM} from \"../../../container/amm\";\nimport { PositionSide } from \"@perp/sdk-curie\";\nimport { metamaskErrorWrap } from \"../../../helpers/metamask-error-wrap\";\n\nfunction SendTransaction() {\t\n\tconst dispatch = useDispatch<AppDispatch>();\n\tconst { address, provider, chainID, connected } = useWeb3Context();\n\tconst {marketticker} = AMM.useContainer();\n\tconst { collateral } = Trade.useContainer();\n\tconst { _setCollateral} = Trade.useContainer();\n\tconst {side} = Trade.useContainer();\n\tconst {slippage} = Trade.useContainer();\n\tconst {perpetualObject} = Trade.useContainer();\n\tconst outputSymbol = marketticker.substring(0, marketticker.length - 3);\t\n\tconst _perpetualObject: PerpetualProtocol = new PerpetualProtocol({\n\t\tchainId: SupportedChainIds.OPTIMISM,   \t\t                \n\t\tproviderConfigs: [\n\t\t\t{\t\t\t\t\n\t\t\t\trpcUrl: \"https://optimism-mainnet.infura.io/v3/dd583584ac144f7984ac22cb0595646e\",                \t\t\t\t\t\t\t\n\t\t\t},\n\t\t],\n\t});\n\n\t\n\tconst isCalculated = useSelector<IReduxState, boolean>((state) => state.positions.isCalculated);\n\tconst newPositionDraft = useSelector<IReduxState, PositionDraft<string> | undefined>(state => {\n\t\treturn state.positions.newPositionDraft;\n\t});\n\tconst oppositeAmount = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.oppositeAmount;\n\t});\n\tconst entryPrice = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.entryPrice;\n\t});\n\tconst tradingFee = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.tradingFee;\n\t});\n\tconst priceImpact = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.priceImpact;\n\t});\n\tconst buyingPower = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.buyingPower;\n\t});\n\n\tconst isDisabled = !isCalculated || collateral === null || collateral.eq(0) || !connected;\n\n\tconst handleOpen = useCallback(async () => {\n\t\tconst hasconnected = perpetualObject.hasConnected();  \n\t\tif(hasconnected === false) {\n\t\t\tawait perpetualObject.init();\n\t\t\tawait perpetualObject.connect({ signer: provider.getSigner() });\t\n\t\t\tconsole.log(\"Pepr connected\")\n\t\t}\t\n\t\tlet openTx;\n\t\ttry {\n\t\t\topenTx = await perpetualObject?.clearingHouse?.openPosition(newPositionDraft!, slippage);\n\t\t\tconsole.log(\"Open Transaction\", openTx);\n\t\t\tawait openTx!.transaction.wait();\n\t\t\tdispatch(success({ text: messages.tx_successfully_send }));\n\t\t\tawait sleep(0.1);\n\t\t\tdispatch(info({ text: messages.your_position_update_soon }));\t\t\t\t\t\n\t\t\tawait dispatch(openedPositionDetails({ address: address, networkID: chainID, provider: provider, perpetualObject: _perpetualObject,\n\t\t\t\ttickerSymbol: marketticker}));\n\t\t\tdispatch(info({ text: messages.your_position_updated }));\n\t\t\t_setCollateral('');\t\t\t\n\t\t} catch (err: any) {\n\t\t\tmetamaskErrorWrap(err, dispatch);\n\t\t} finally {\t\t\t\n\t\t\t\n\t\t}\t\n\t\t\n  }, [newPositionDraft, slippage]);\n\n\tconst CalcPosition = useCallback(\n\t\t(loadProvider) => {\n\t\t\tconsole.log(\"Calling calc Position\");\n\t\t\tdispatch(calcPositionDetails({ connected: connected, networkID: chainID, provider: loadProvider, perpetualObject: perpetualObject,\n\t\t\tside: side, slippage: slippage, tickerSymbol: marketticker, amountInput: collateral}));\n\t\t},\n\t\t[collateral, slippage, side, marketticker],\n\t);\n\n\tconst CalcOpenedPosition = useCallback(\n\t\tloadProvider => {\n\t\t\tconsole.log(\"Calling calc openedPosition\");\n\t\t\tdispatch(openedPositionDetails({ address: address, networkID: chainID, provider: loadProvider, perpetualObject: perpetualObject,\n\t\t\ttickerSymbol: marketticker}));\n\t\t},\n\t\t[connected, marketticker],\n\t);\t\n\n  useEffect(() => {\t\n\t\tCalcPosition(provider);\t\t\n\t}, [collateral, slippage, side, marketticker]);\n\n\tuseEffect(() => {\n\t\tCalcOpenedPosition(provider);\n\t}, [connected, marketticker]);\t\n\n\treturn (\n\t\t<Box sx={{mt: 2}}>\n\t\t\t<Box sx={{mb: 2}}>\n\t\t\t\t<TextField\n\t\t\t\t\tid=\"outlined-name\"\n\t\t\t\t\tlabel=\"Output\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tdisabled\n\t\t\t\t\tvalue={oppositeAmount}\n\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\t\t\t\t\n\t\t\t\t\tInputProps={{\t\t\t\t\t\t\n\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\"\n\t\t\t\t\t\tsx={{'& .MuiTypography-root': {fontSize: '12px', fontFamily: 'Montserrat'}}}>{outputSymbol}</InputAdornment>,\n\t\t\t\t\t}}\n\t\t\t\t\tsx={{width: '100%',\n\t\t\t\t\t\t'& .MuiFormLabel-root.Mui-disabled, & .MuiFormLabel-root.Mui-focused, & .MuiTypography-root': {color: '#a3a8b7', \n\t\t\t\t\t\tfontFamily: 'Montserrat'},\n\t\t\t\t\t\t'& > div': {color: 'white', fontSize: '18px', fontFamily: 'Montserrat Medium'},\n\t\t\t\t\t\t'& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled': {color: '#a3a8b7'},\t\t\t\t\t\t\n\t\t\t\t\t\t'& .MuiInputBase-root > input': {'-webkit-text-fill-color': '#a3a8b7'},\n\t\t\t\t\t\t'& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline': {borderColor: 'rgba(255, 255, 255, 0.16)'}\t\t\t\t\t\t\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Buying Power</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: 'white', fontFamily: 'Montserrat Medium'}}>${buyingPower}</Typography>\n\t\t\t</Box>\n\t\t\t<Typography sx={{mx: 'auto', py: 1, textAlign: 'left', color: 'white', \n\t\t\t\tfontFamily: 'Montserrat Bold', fontSize: '18px'}}>\n\t\t\t\tSummary\n\t\t\t</Typography>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Entry Price</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: 'white', fontFamily: 'Montserrat Medium'}}>${entryPrice}</Typography>\n\t\t\t</Box>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Trading Fee</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: 'white', fontFamily: 'Montserrat Medium'}}>${tradingFee}</Typography>\n\t\t\t</Box>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Price Impact</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: 'white', fontFamily: 'Montserrat Medium'}}>{priceImpact}%</Typography>\n\t\t\t</Box>\n\t\t\t<Button variant=\"contained\" \n\t\t\t\tdisabled={isDisabled}\n\t\t\t\tsx={{width: '100%', paddingY: '12px', mt: 1,\n\t\t\t\t\tbackgroundColor: side === PositionSide.LONG? 'success.light': '#ef5350', \n\t\t\t\t\tdisplay: 'block',\t\t\t\t\t\t\t\n\t\t\t\t\tfontFamily: 'Montserrat SemiBold',\t\t\t\t\t\n\t\t\t\t\tmx: 'auto',\n\t\t\t\t\t'&: hover': {backgroundColor: side === PositionSide.LONG? 'success.main': '#f44336'},\n\t\t\t\t\t'&: disabled': {backgroundColor: side === PositionSide.LONG? 'success.light': '#ef5350', color: 'black', opacity: 0.8} \n\t\t\t\t}}\n\t\t\t\tonClick={handleOpen}\t\t\t\n\t\t\t>\n\t\t\t\tConfirm {side}\n\t\t\t</Button>\t\t\t\n\t\t</Box>\n\t)\n}\n\nexport default SendTransaction;","import * as React from 'react';\nimport { useSelector } from 'react-redux';\nimport { IReduxState } from \"../../../store/slices/state.interface\";\nimport { useDispatch } from \"react-redux\";\nimport { warning, success, info, error } from \"../../../store/slices/messages-slice\";\nimport { close } from \"../../../store/slices/position-slice\";\nimport { messages } from \"../../../constants/messages\";\nimport { sleep } from \"../../../helpers/sleep\";\nimport { PositionSide } from \"@perp/sdk-curie\";\n\nimport {\t\n\tBox,\t\n\tButton,\t   \n\tTypography  \n} from \"@mui/material\";\n\nimport { useWeb3Context } from \"../../../hooks/web3Context\";\nimport {Trade} from '../../../container/trade';\nimport {AMM} from \"../../../container/amm\";\nimport { metamaskErrorWrap } from \"../../../helpers/metamask-error-wrap\";\n\nexport function PositionList() {\n\tconst dispatch = useDispatch();\n  const { connected, provider } = useWeb3Context();   \n  const {perpetualObject} = Trade.useContainer();\n  const {slippage} = Trade.useContainer();\n  const {marketticker} = AMM.useContainer();\n  let tickerSymbol = marketticker;\n  const outputSymbol = marketticker.substring(0, marketticker.length - 3);\n\n\tconst isOpenedPositionCalculated = useSelector<IReduxState, boolean>((state) => state.positions.isOpenedPositionCalculated);\n\n\tconst isLoss = useSelector<IReduxState, boolean>(state => {\n\t\treturn state.positions.isLoss;\n\t});\n\n\tconst posSize = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.posSize;\n\t});\n\n\n\tconst side = useSelector<IReduxState, PositionSide>(state => {\n\t\treturn state.positions.side;\n\t});\n\n\tconst pendingValue = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.pendingValue;\n\t});\n\n\tconst isProfit = useSelector<IReduxState, boolean>(state => {\n\t\treturn state.positions.isProfit;\n\t});\n\n\tconst pnlValue = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.pnlValue;\n\t});\n\n\tconst openPrice = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.openPrice;\n\t});\n\n\tconst indexPrice = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.indexPrice;\n\t});\n\n\tconst liquidationPrice = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.liquidationPrice;\n\t});\n\n\tconst marginRatio = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.marginRatio;\n\t});\n\n\tconst leverage = useSelector<IReduxState, string>(state => {\n\t\treturn state.positions.leverage;\n\t}); \n\n\tconst handleClose = async () => {\t\t\n\t\tconst hasconnected = perpetualObject.hasConnected();  \n\t\tif(hasconnected === false) {\n\t\t\tawait perpetualObject.init();\n\t\t\tawait perpetualObject.connect({ signer: provider.getSigner() });\t\n\t\t}\n\t\tconst position = await perpetualObject?.positions?.getTakerPositionByTickerSymbol(tickerSymbol);\n\t\tif(position !== undefined) {\t\t\t\n\t\t\tlet closeTx;\n\t\t\ttry {\n\t\t\t\tcloseTx = await perpetualObject?.clearingHouse?.closePosition(position!, slippage);\n\t\t\t\tconsole.log(\"Close Transaction\", closeTx);\n\t\t\t\tawait closeTx!.transaction.wait();\n        dispatch(success({ text: messages.tx_successfully_send }));\n        await sleep(0.5);\n        dispatch(info({ text: messages.your_position_close_soon }));\n\t\t\t} catch (err: any) {\n\t\t\t\tmetamaskErrorWrap(err, dispatch);\n\t\t\t} finally {\n\t\t\t\tdispatch(close());\t\t\t\t\n\t\t\t}\t\t\t\n\t\t} \n\t};\n\n\treturn (\n\t\t<Box>\n\t\t\t{isOpenedPositionCalculated && \n\t\t\t\t<Box sx={{maxWidth: '360px'}}>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'flex-start', alignItems: 'center'}}>              \n\t\t\t\t\t\t\t<Typography sx={{fontSize: '16px', mr: 1, color: 'white', fontFamily: 'Montserrat'}}>{posSize}</Typography>\n\t\t\t\t\t\t\t<Typography sx={{fontSize: '12px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>{outputSymbol}</Typography>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Typography sx={{fontSize: '16px', \n\t\t\t\t\t\tcolor: side==='LONG'? 'rgba(94, 217, 151, 1)': 'rgba(234, 98, 98, 1)', fontFamily: 'Montserrat Medium'}}>{side}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Pending Funding Payment</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '16px', color: isLoss===true? 'rgba(234, 98, 98, 1)': 'rgba(94, 217, 151, 1)', \n\t\t\t\t\t\tfontFamily: 'Montserrat Medium'}}>{pendingValue}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Profit / Loss</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '16px', color: isProfit===true? 'rgba(94, 217, 151, 1)': 'rgba(234, 98, 98, 1)', \n\t\t\t\t\t\tfontFamily: 'Montserrat Medium'}}>{pnlValue}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Avg. Open Price</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '16px', color: 'white', fontFamily: 'Montserrat Medium'}}>{openPrice}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Index Price</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '16px', color: 'white', fontFamily: 'Montserrat Medium'}}>{indexPrice}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Liquidation Price</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '16px', color: 'white', fontFamily: 'Montserrat Medium'}}>{liquidationPrice}</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Margin Ratio</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '16px', color: 'white', fontFamily: 'Montserrat Medium'}}>{marginRatio}%</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n\t\t\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7', fontFamily: 'Montserrat'}}>Leverage</Typography>\n\t\t\t\t\t\t<Typography sx={{fontSize: '16px', color: 'white', fontFamily: 'Montserrat Medium'}}>{leverage}x</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box sx={{display: 'flex'}}>\n\t\t\t\t\t\t<Button variant=\"contained\" \n\t\t\t\t\t\t\tdisabled={connected === false}\n\t\t\t\t\t\t\tsx={{paddingY: '8px', mt: 1, px: 4,\n\t\t\t\t\t\t\t\tbackgroundColor: '#185993',\n\t\t\t\t\t\t\t\tfontFamily: 'Montserrat SemiBold', \n\t\t\t\t\t\t\t\tbackgroundImage: 'linear-gradient(to right,#185993 0,#236dae 51%,#185993 100%)',\n\t\t\t\t\t\t\t\tbackgroundSize: '200%',\n\t\t\t\t\t\t\t\tboxShadow: '5px 5px 10px 0 rgba(24,89,147,0.25)',\n\t\t\t\t\t\t\t\tcolor: '#a3a8b7',\n\t\t\t\t\t\t\t\t'&: hover': {backgroundColor: '#2376c0', color: 'white', backgroundPosition: 'right center'}\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={handleClose}\t\t\t\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t}\n\t\t</Box>\n\t);\n}","import * as React from 'react';\nimport {useState, useMemo, useCallback} from \"react\";\nimport { useSelector } from 'react-redux';\nimport { IPositionSlice } from \"../../store/slices/position-slice\";\nimport { IReduxState } from \"../../store/slices/state.interface\";\n\nimport {\t\n\tBox,\t\n\tButton,\t   \n\tTypography,\n  Tabs,\n  Tab\n} from \"@mui/material\";\n\nimport { PositionList } from './components/PositionList';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ py: 2 }}>\n          {children}\n        </Box>\n      )}\n    </div>\n  );\n}\n\nfunction a11yProps(index: number) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`,\n  };\n}\n\nexport default function Positions() {   \n  const [value, setValue] = useState(0); \n  const isPositionOpened = useSelector<IReduxState, boolean>((state) => state.positions.isPositionOpened);  \n  console.log(\"OPened position\", isPositionOpened);\n  const handleChange = (event: React.SyntheticEvent, newValue: number) => {    \n    setValue(newValue);\n  }; \n\n  return (\n    <Box sx={{ width: '100%' }}>\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={value} onChange={handleChange} aria-label=\"basic tabs example\" textColor='primary'\n          TabIndicatorProps={{\n            style: {\n              backgroundColor: \"white\"              \n            }\n          }}\n            sx={{ \n              '& .MuiTab-root': {color: '#a3a8b7', fontFamily: 'Montserrat SemiBold', \n              fontSize: '18px', textTransform: 'none'},\n              '& .MuiTab-root.Mui-selected': {color: 'white'}          \n            }}\n        >\n          <Tab label=\"Position\" {...a11yProps(0)} />\n          <Tab label=\"Limit Orders\" {...a11yProps(1)} />\n          <Tab label=\"Fills\" {...a11yProps(2)} />\n        </Tabs>\n      </Box>\n      <TabPanel value={value} index={0}>        \n        {isPositionOpened ? <PositionList /> :\n          <Typography sx={{color: '#a3a8b7'}}>You don't have any opened position yet</Typography>\n        }\n      </TabPanel>\n      <TabPanel value={value} index={1}>\n        Limit Orders\n      </TabPanel>\n      <TabPanel value={value} index={2}>\n        Fills\n      </TabPanel>\n    </Box>\n  );\n}","import {useState, useEffect} from \"react\";\n\nimport {\n\tAppBar,\n\tBox,\n\tButton,\n\tContainer,    \n\tTypography,\n} from \"@mui/material\";\n\nimport SideSwitcher from \"./components/Sideswitcher\";\n// import PriceHeader from \"./components/PriceHeader\";\nimport Collateral from \"./components/Collateral\";\nimport Slippage from \"./components/Slippage\";\nimport SendTransaction from \"./components/SendTransaction\";\nimport Positions from \"../Positions\";\n\nfunction Trade() {\t\n\treturn (\t\t\n\t\t<Box sx={{backgroundColor: 'rgba(9, 9, 10, 1)', px: 1, pb: '400px'}}>\t\t\n\t\t\t{/* <PriceHeader />\t */}\n\t\t\t<Box sx={{display: 'flex', flexDirection: {xs: 'column', md: 'row'}}}>\n\t\t\t\t<Box sx={{boxSizing: 'border-box', flexGrow: '1',\n\t\t\t\t\tbackgroundColor: \"rgba(29, 29, 29, 1)\", borderRadius: '10px', p: '12px'}}\n\t\t\t\t>\n\t\t\t\t\t<Positions />\n\t\t\t\t</Box>\n\t\t\t\t<Box sx={{width: {xs: '100%', md: '360px'}, \n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t\tbackgroundColor: \"rgba(29, 29, 29, 1)\",\n\t\t\t\t\tborderRadius: '10px', px: '12px', pb: '12px', ml: {md: 1}, mt: {xs: 1, md: '0px'}}}\n\t\t\t\t>\n\t\t\t\t\t<SideSwitcher />\t\t\t\n\t\t\t\t\t<Collateral />\n\t\t\t\t\t<Slippage />\n\t\t\t\t\t<SendTransaction />\n\t\t\t\t</Box>\t\t\t\t\n\t\t\t</Box>\n\t\t</Box>\t\t\n\t)\n}\n\nexport default Trade;","import { createSlice,createAsyncThunk, createSelector } from \"@reduxjs/toolkit\";\r\nimport { JsonRpcProvider, StaticJsonRpcProvider } from \"@ethersproject/providers\";\r\nimport { ethers } from \"ethers\";\r\nimport { Networks, DEFAULD_NETWORK } from \"../../constants/blockchain\";\r\nimport { warning, success, info, error } from \"./messages-slice\";\r\nimport { messages } from \"../../constants/messages\";\r\nimport { setAll } from \"../../helpers/set-all\";\r\nimport { PerpetualProtocol, PositionSide, PositionDraft } from \"@perp/sdk-curie\";\r\nimport { metamaskErrorWrap } from \"../../helpers/metamask-error-wrap\";\r\nimport { sleep } from \"../../helpers/sleep\";\r\nimport Big from \"big.js\";\r\nimport { RootState } from \"../store\";\r\n\r\ninterface ICalcUserCollateralDetails { \r\n\taddress: string;\r\n\tnetworkID: Networks;\r\n\tperpetualObject: PerpetualProtocol;\t\t\r\n}\r\n\r\nexport const calcUserCollateralDetails = createAsyncThunk(\"user/calcUserCollateralDetails\", \r\n\tasync({ address, networkID, perpetualObject }: ICalcUserCollateralDetails) => {\r\n\t\tif( networkID === DEFAULD_NETWORK ) {  \r\n\t\t\tawait perpetualObject.init();\r\n\t\t\tconst _freeCollateral = await perpetualObject.contractReader.getFreeCollateral(address); \r\n\t\t\tconst _accountValue = await perpetualObject.contractReader.getAccountValue(address); \r\n\t\t\tconst _collateralBalanceList = await perpetualObject.vault!.getBalanceList();\t\t\t\t\r\n\t\t\tconst _collateralFreeCollateralList = await perpetualObject.vault!.getFreeCollateralList();\t\t\r\n\t\t\tconsole.log(\"Collateral Balance List\", _collateralBalanceList);\t\t\t\r\n\t\t\tconsole.log(\"Collateral Free Collateral List\", _collateralFreeCollateralList);\r\n\t\t\treturn {\r\n\t\t\t\tfreeCollateral: _freeCollateral.toFixed(4),\r\n\t\t\t\taccountValue: _accountValue.toFixed(4),\r\n\t\t\t\tcollateralBalanceList: _collateralBalanceList,\r\n\t\t\t\tcollateralFreeCollateralList: _collateralFreeCollateralList,\r\n\t\t\t}\r\n\t\t}\r\n});\r\n\r\ninterface ICalcUserAccountDetails {\r\n\tnetworkID: Networks;\r\n  provider: StaticJsonRpcProvider | JsonRpcProvider;\r\n\tperpetualObject: PerpetualProtocol;\t\t\r\n}\r\n\r\nexport const calcUserAccountDetails = createAsyncThunk(\"user/calcUserAccountlDetails\", \r\n\tasync({ networkID, provider, perpetualObject }: ICalcUserAccountDetails) => {\r\n\t\tif( networkID === DEFAULD_NETWORK ) {  \r\n\t\t\tawait perpetualObject.init();\r\n      await perpetualObject.connect({ signer: provider.getSigner() });\t\t\t\r\n      const _allowanceList = await perpetualObject.wallet!.getAllowanceList();      \r\n      const _balanceList = await perpetualObject.wallet!.getBalanceList(); \r\n      const _balanceEth = await perpetualObject.wallet!.getBalanceEth();    \r\n      const _collateraltokenpricelist = await perpetualObject.wallet!.getCollateralTokenPriceList();  \r\n      const _collateralTokenList = perpetualObject.wallet!.collateralTokenList; \r\n      console.log(\"Collateral Token List\", _collateralTokenList);  \r\n\t\t\t\r\n\t\t\tconsole.log(\"Allowance List\", _allowanceList);\r\n\t\t\treturn {\t\t\r\n        allowanceList: _allowanceList,\t\t\t\r\n        balanceList: _balanceList,\r\n        balanceEth: _balanceEth.toFixed(3),\r\n        collateralTokenPriceList: _collateraltokenpricelist,        \r\n\t\t\t}\r\n\t\t}\r\n});\r\n\r\nexport interface IChangeApproval {\r\n\tprovider: StaticJsonRpcProvider | JsonRpcProvider;\t\r\n\tnetworkID: Networks;\t\r\n\ttokenIndex: number;\r\n\tperpetualObject: PerpetualProtocol;\r\n}\r\n\r\nexport const changeApproval = createAsyncThunk(\"user/changeApproval\", async ({ provider, networkID, tokenIndex, perpetualObject }: IChangeApproval, { dispatch }) => {\r\n\tif (!provider) {\r\n\t\tdispatch(warning({ text: messages.please_connect_wallet }));\r\n\t\treturn;\r\n\t}\r\n\r\n\tif( networkID === DEFAULD_NETWORK ) {\r\n\t\tawait perpetualObject.init();\r\n    await perpetualObject.connect({ signer: provider.getSigner() });\r\n\r\n\t\tlet approveTx;\r\n\t\ttry {\t\t\t\t\t\r\n\t\t\tconst collateralTokenList = perpetualObject.wallet!.collateralTokenList;\t\t\t\r\n\t\t\tapproveTx = await perpetualObject.wallet!.approve(collateralTokenList[tokenIndex]);\t\t\t\t\r\n\t\t\tawait approveTx.transaction.wait();\r\n\t\t\tdispatch(success({ text: messages.tx_successfully_send }));\r\n\t\t} catch (err: any) {\t\t\t\r\n\t\t\treturn metamaskErrorWrap(err, dispatch);\r\n\t\t} finally {\t\t\t\t\r\n\t\t}\r\n\t\tawait sleep(4);\r\n\t\tawait dispatch(calcUserAccountDetails({networkID, provider, perpetualObject}));\t\r\n\t\tdispatch(info({ text: messages.your_allowance_updated }));\r\n\t\treturn;\r\n\t}\t\r\n});\r\n\r\nexport interface IChangeCollateral {\r\n\taddress: string;\r\n\tprovider: StaticJsonRpcProvider | JsonRpcProvider;\t\r\n\tnetworkID: Networks;\t\r\n\ttokenIndex?: number;\r\n\tamount: Big;\r\n\tperpetualObject: PerpetualProtocol;\r\n}\r\n\r\nexport const changeDepositCollateral = createAsyncThunk(\"user/changeDepositCollateral\", async ({address, provider, networkID, tokenIndex, amount, perpetualObject }: IChangeCollateral, { dispatch }) => {\r\n\tif (!provider) {\r\n\t\tdispatch(warning({ text: messages.please_connect_wallet }));\r\n\t\treturn;\r\n\t}\r\n\r\n\tif( networkID === DEFAULD_NETWORK ) {\r\n\t\tawait perpetualObject.init();\r\n    await perpetualObject.connect({ signer: provider.getSigner() });\r\n\r\n\t\tlet depositTx;\r\n\t\ttry {\t\t\t\r\n\t\t\tif(tokenIndex !== undefined) {\r\n\t\t\t\tconst collateralTokenList = perpetualObject.wallet!.collateralTokenList;\t\t\t\r\n\t\t\t\tdepositTx = await perpetualObject.vault!.deposit(collateralTokenList[tokenIndex], amount);\r\n\t\t\t\tawait depositTx.transaction.wait();\r\n\t\t\t}\telse {\r\n\t\t\t\tdepositTx = await perpetualObject.vault!.depositETH(amount);\r\n\t\t\t\tawait depositTx.transaction.wait();\r\n\t\t\t}\t\t\t\t\r\n\t\t\tdispatch(success({ text: messages.tx_successfully_send }));\r\n\t\t} catch (err: any) {\r\n\t\t\tconsole.log(\"Error\", err);\r\n\t\t\t\treturn metamaskErrorWrap(err, dispatch);\r\n\t\t} finally {\t\t\t\t\r\n\t\t}\r\n\t\tawait sleep(4);\r\n\t\tawait dispatch(calcUserAccountDetails({networkID, provider, perpetualObject}));\t\r\n\t\tawait dispatch(calcUserCollateralDetails({address, networkID, perpetualObject}));\t\r\n\t\tdispatch(info({ text: messages.your_deposit_updated }));\r\n\t\treturn;\r\n\t}\t\r\n});\r\n\r\nexport const withdrawCollateral = createAsyncThunk(\"user/withdrawCollateral\", async ({address, provider, networkID, \r\n\ttokenIndex, amount, perpetualObject }: IChangeCollateral, { dispatch }) => {\r\n\tif (!provider) {\r\n\t\tdispatch(warning({ text: messages.please_connect_wallet }));\r\n\t\treturn;\r\n\t}\r\n\r\n\tif( networkID === DEFAULD_NETWORK ) {\r\n\t\tawait perpetualObject.init();\r\n    await perpetualObject.connect({ signer: provider.getSigner() });\r\n\r\n\t\tlet withdrawTx;\r\n\t\ttry {\t\t\t\r\n\t\t\tif(tokenIndex !== undefined) {\r\n\t\t\t\tconst collateralTokenList = perpetualObject.wallet!.collateralTokenList;\t\t\t\r\n\t\t\t\twithdrawTx = await perpetualObject.vault!.withdraw(collateralTokenList[tokenIndex], amount);\r\n\t\t\t\tawait withdrawTx.transaction.wait();\r\n\t\t\t}\telse {\r\n\t\t\t\twithdrawTx = await perpetualObject.vault!.withdrawETH(amount);\r\n\t\t\t\tawait withdrawTx.transaction.wait();\r\n\t\t\t}\t\t\t\t\r\n\t\t\tdispatch(success({ text: messages.tx_successfully_send }));\r\n\t\t} catch (err: any) {\r\n\t\t\tconsole.log(\"Error\", err);\r\n\t\t\t\treturn metamaskErrorWrap(err, dispatch);\r\n\t\t} finally {\t\t\t\t\r\n\t\t}\r\n\t\tawait sleep(4);\r\n\t\tawait dispatch(calcUserAccountDetails({networkID, provider, perpetualObject}));\t\r\n\t\tawait dispatch(calcUserCollateralDetails({address, networkID, perpetualObject}));\t\r\n\t\tdispatch(info({ text: messages.your_collateral_withdrawed }));\r\n\t\treturn;\r\n\t}\t\r\n});\r\n\r\nconst initialState = {\t\r\n\tisUserCollateralCalculated: false,\r\n\tisUserCollateralInitialized: false,\r\n  isUserAccountCalculated: false,\r\n}\r\n\r\nexport interface IUserSlice {\r\n\tisUserCollateralCalculated: boolean;\r\n\tisUserCollateralInitialized: boolean;\t\r\n  isUserAccountCalculated: boolean;\r\n\tfreeCollateral: string;\r\n\taccountValue: string;\r\n\tcollateralBalanceList: Big[];\r\n\tcollateralFreeCollateralList: Big[]; \r\n  allowanceList: Big[];\r\n  balanceList: Big[];\r\n  balanceEth: string; \r\n  collateralTokenPriceList: number[];  \r\n}\r\n\r\nconst userSlice = createSlice({\r\n\tname: \"user\",\r\n\tinitialState,\r\n\treducers: {\t\t\t\r\n\t},\r\n\textraReducers: builder => {\r\n\t\tbuilder\t\t\t\r\n\t\t\t.addCase(calcUserCollateralDetails.pending, state => {\t\t\t\r\n\t\t\t\tstate.isUserCollateralCalculated = false;\r\n\t\t\t})\r\n\t\t\t.addCase(calcUserCollateralDetails.fulfilled, (state, action) => {\r\n\t\t\t\tsetAll(state, action.payload);\r\n\t\t\t\tstate.isUserCollateralCalculated = true;\t\r\n\t\t\t\tstate.isUserCollateralInitialized = true;\r\n\t\t\t})\r\n\t\t\t.addCase(calcUserCollateralDetails.rejected, (state, { error }) => {\r\n\t\t\t\tstate.isUserCollateralInitialized = false;\t\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t})\r\n      .addCase(calcUserAccountDetails.pending, state => {\t\t\t\r\n\t\t\t\tstate.isUserAccountCalculated = false;\r\n\t\t\t})\r\n\t\t\t.addCase(calcUserAccountDetails.fulfilled, (state, action) => {\r\n\t\t\t\tsetAll(state, action.payload);\r\n\t\t\t\tstate.isUserAccountCalculated = true;\t\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.addCase(calcUserAccountDetails.rejected, (state, { error }) => {\r\n\t\t\t\tstate.isUserAccountCalculated = false;\t\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t})\r\n\t},    \r\n});\r\n\r\nconst baseInfo = (state: RootState) => state.user;\r\nexport const { } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n\r\nexport const getAppState = createSelector(baseInfo, user => user);","import { useEffect } from \"react\";\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { IReduxState } from \"../../../store/slices/state.interface\";\r\nimport { calcUserCollateralDetails } from \"../../../store/slices/user-slice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Trade } from \"../../../container/trade\";\r\nimport { AppDispatch } from \"../../../store/store\";\r\n\r\nimport { useWeb3Context } from \"../../../hooks/web3Context\";\r\n\r\nimport { Box, Grid, Typography } from \"@mui/material\";\r\n\r\nfunction CollateralBoard() {\r\n  const dispatch = useDispatch<AppDispatch>();\r\n  const { address, chainID, connected } = useWeb3Context();\r\n  const { perpetualObject } = Trade.useContainer();\r\n\r\n  const isUserCollateralCalculated = useSelector<IReduxState, boolean>(\r\n    (state) => {\r\n      return state.user.isUserCollateralCalculated;\r\n    }\r\n  );\r\n\r\n  const isUserCollateralInitialized = useSelector<IReduxState, boolean>(\r\n    (state) => {\r\n      return state.user.isUserCollateralInitialized;\r\n    }\r\n  );\r\n\r\n  const freeCollateral = useSelector<IReduxState, string>((state) => {\r\n    return state.user.freeCollateral;\r\n  });\r\n\r\n  const accountValue = useSelector<IReduxState, string>((state) => {\r\n    return state.user.accountValue;\r\n  });\r\n\r\n  const CalcUserCollateralDetails = function () {\r\n    if (connected === true) {\r\n      dispatch(\r\n        calcUserCollateralDetails({\r\n          address: address,\r\n          networkID: chainID,\r\n          perpetualObject: perpetualObject,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    CalcUserCollateralDetails();\r\n    const timer = setInterval(() => CalcUserCollateralDetails(), 60000);\r\n    return () => clearInterval(timer);\r\n  }, [connected]);\r\n\r\n  return (\r\n    <>\r\n      <Typography\r\n        sx={{\r\n          color: \"#fff\",\r\n          fontSize: \"16px\",\r\n          background:\r\n            \"linear-gradient(180deg,rgba(61,105,101,.15),rgba(143,222,224, 0.15))\",\r\n          paddingY: \"14px\",\r\n          width: \"100%\",\r\n          borderRadius: \"20px\",\r\n          fontFamily: \"Montserrat Medium\",\r\n        }}\r\n      >\r\n         Perpetual Protocol \r\n      </Typography>\r\n      <Grid\r\n        container\r\n        spacing={4}\r\n        sx={{\r\n          marginTop: \"12px\",\r\n          marginLeft: \"-16px\",\r\n          \"& > .MuiGrid-item\": { p: 2 },\r\n        }}\r\n      >\r\n        <Grid item lg={6} md={6} sm={6} xs={12}>\r\n          <Box\r\n            sx={{\r\n              paddingY: \"12px\",\r\n              borderRadius: \"10px\",\r\n              backgroundColor: \"rgba(29, 29, 29, 1)\",\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                color: \"rgba(145, 153, 167, 1)\",\r\n                fontSize: \"20px\",\r\n                fontFamily: \"Montserrat Medium\",\r\n              }}\r\n            >\r\n              Total Collateral\r\n            </Typography>\r\n            {isUserCollateralCalculated ? (\r\n              <Typography\r\n                sx={{\r\n                  color: \"white\",\r\n                  fontSize: \"24px\",\r\n                  fontFamily: \"Montserrat Bold\",\r\n                }}\r\n              >\r\n                ${accountValue}\r\n              </Typography>\r\n            ) : (\r\n              [\r\n                isUserCollateralInitialized ? (\r\n                  <Typography\r\n                    sx={{\r\n                      color: \"white\",\r\n                      fontSize: \"24px\",\r\n                      fontFamily: \"Montserrat Bold\",\r\n                    }}\r\n                  >\r\n                    ${accountValue}\r\n                  </Typography>\r\n                ) : (\r\n                  <Typography\r\n                    sx={{\r\n                      color: \"white\",\r\n                      fontSize: \"24px\",\r\n                      fontFamily: \"Montserrat Bold\",\r\n                    }}\r\n                  >\r\n                    $0.0\r\n                  </Typography>\r\n                ),\r\n              ]\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item lg={6} md={6} sm={6} xs={12}>\r\n          <Box\r\n            sx={{\r\n              paddingY: \"12px\",\r\n              borderRadius: \"10px\",\r\n              backgroundColor: \"rgba(29, 29, 29, 1)\",\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                color: \"rgba(145, 153, 167, 1)\",\r\n                fontSize: \"20px\",\r\n                fontFamily: \"Montserrat Medium\",\r\n              }}\r\n            >\r\n              Free Collateral\r\n            </Typography>\r\n            {isUserCollateralCalculated ? (\r\n              <Typography\r\n                sx={{\r\n                  color: \"white\",\r\n                  fontSize: \"24px\",\r\n                  fontFamily: \"Montserrat Bold\",\r\n                }}\r\n              >\r\n                ${freeCollateral}\r\n              </Typography>\r\n            ) : (\r\n              [\r\n                isUserCollateralInitialized ? (\r\n                  <Typography\r\n                    sx={{\r\n                      color: \"white\",\r\n                      fontSize: \"24px\",\r\n                      fontFamily: \"Montserrat Bold\",\r\n                    }}\r\n                  >\r\n                    ${freeCollateral}\r\n                  </Typography>\r\n                ) : (\r\n                  <Typography\r\n                    sx={{\r\n                      color: \"white\",\r\n                      fontSize: \"24px\",\r\n                      fontFamily: \"Montserrat Bold\",\r\n                    }}\r\n                  >\r\n                    $0.0\r\n                  </Typography>\r\n                ),\r\n              ]\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CollateralBoard;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { IReduxState } from \"../../../store/slices/state.interface\";\r\nimport {\r\n  calcUserAccountDetails,\r\n  changeApproval,\r\n  changeDepositCollateral,\r\n  withdrawCollateral,\r\n} from \"../../../store/slices/user-slice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Trade } from \"../../../container/trade\";\r\nimport { AppDispatch } from \"../../../store/store\";\r\n\r\nimport Big from \"big.js\";\r\nimport { useWeb3Context } from \"../../../hooks/web3Context\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  FormControl,\r\n  IconButton,\r\n  InputAdornment,\r\n  Modal,\r\n  OutlinedInput,\r\n  Table,\r\n  TableContainer,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n  TableHead,\r\n  Paper,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { makeStyles } from '@mui/styles';\r\n\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\n\r\nconst modalStyle = {\r\n  position: \"absolute\" as \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  maxWidth: \"28rem\",\r\n  bgcolor: \"background.paper\",\r\n  background: \"rgb(38, 40, 42)\",\r\n  borderRadius: \"24px\",\r\n  outline: \"transparent solid 2px\",\r\n  outlineOffset: \"2px\",\r\n  boxShadow:\r\n    \"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px,rgba(0, 0, 0, 0.2) 0px 5px 10px,rgba(0, 0, 0, 0.4) 0px 15px 40px\",\r\n  p: 2,\r\n};\r\n\r\nconst TokenList = [\"USDC\", \"WETH\", \"FRAX\", \"OP\", \"USDT\", \"ETH\"];\r\n\r\nfunction CollateralBoard() {\r\n  const dispatch = useDispatch<AppDispatch>();\r\n  const { address, provider, chainID, connected } = useWeb3Context();\r\n  const { perpetualObject } = Trade.useContainer();\r\n  const [openDepositModal, setDepositModalOpen] = useState(false);\r\n  const [openWithdrawModal, setWithdrawModalOpen] = useState(false);\r\n  const [modalIndex, setModalIndex] = useState(0);\r\n\r\n  const [tokenValue, setTokenValue] = useState<number>(0);\r\n\r\n  const isUserAccountCalculated = useSelector<IReduxState, boolean>((state) => {\r\n    return state.user.isUserAccountCalculated;\r\n  });\r\n\r\n  const collateralBalanceList = useSelector<IReduxState, Big[]>((state) => {\r\n    return state.user.collateralBalanceList;\r\n  });\r\n\r\n  const collateralFreeCollateralList = useSelector<IReduxState, Big[]>(\r\n    (state) => {\r\n      return state.user.collateralFreeCollateralList;\r\n    }\r\n  );\r\n\r\n  const allowanceList = useSelector<IReduxState, Big[]>((state) => {\r\n    return state.user.allowanceList;\r\n  });\r\n\r\n  const collateralTokenPriceList = useSelector<IReduxState, number[]>(\r\n    (state) => {\r\n      return state.user.collateralTokenPriceList;\r\n    }\r\n  );\r\n\r\n  const balanceList = useSelector<IReduxState, Big[]>((state) => {\r\n    return state.user.balanceList;\r\n  });\r\n\r\n  const balanceEth = useSelector<IReduxState, string>((state) => {\r\n    return state.user.balanceEth;\r\n  });\r\n\r\n  const handleDepositModalOpen = (index: number) => {\r\n    setDepositModalOpen(true);\r\n    setModalIndex(index);\r\n  };\r\n\r\n  const handleWithdrawModalOpen = (index: number) => {\r\n    setWithdrawModalOpen(true);\r\n    setModalIndex(index);\r\n  };\r\n\r\n  const handleModalClose = () => {\r\n    setDepositModalOpen(false);\r\n    setWithdrawModalOpen(false);\r\n    setTokenValue(0);\r\n  };\r\n\r\n  const handleTokenValueChange = (e: any) => {\r\n    const floatRegExp = new RegExp(\"([0-9]+([.][0-9]*)?|[.][0-9]+)$\");\r\n    const dotRegExp = new RegExp(\"^([0-9]+[.][0]*)$\");\r\n    if (e.target.value === \"\" || floatRegExp.test(e.target.value)) {\r\n      let filteredValue = e.target.value;\r\n      if (dotRegExp.test(e.target.value)) {\r\n        setTokenValue(filteredValue);\r\n      } else {\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        filteredValue = Math.floor(filteredValue * 1000) / 1000;\r\n        if (openDepositModal) {\r\n          if (\r\n            (modalIndex < 5 &&\r\n              filteredValue <= Number(balanceList[modalIndex].toFixed(3))) ||\r\n            (modalIndex === 5 && filteredValue <= Number(balanceEth))\r\n          ) {\r\n            setTokenValue(filteredValue);\r\n          } else {\r\n            if (modalIndex < 5) {\r\n              setTokenValue(Number(balanceList[modalIndex].toFixed(2)));\r\n            } else {\r\n              setTokenValue(Number(balanceEth));\r\n            }\r\n          }\r\n        } else {\r\n          if (\r\n            (modalIndex < 5 &&\r\n              filteredValue <=\r\n                Number(collateralFreeCollateralList[modalIndex].toFixed(3))) ||\r\n            (modalIndex === 5 &&\r\n              filteredValue <=\r\n                Number(collateralFreeCollateralList[1].toFixed(3)))\r\n          ) {\r\n            setTokenValue(filteredValue);\r\n          } else {\r\n            if (modalIndex < 5) {\r\n              setTokenValue(\r\n                Number(collateralFreeCollateralList[modalIndex].toFixed(3))\r\n              );\r\n            } else {\r\n              setTokenValue(Number(collateralFreeCollateralList[1].toFixed(3)));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleMaxValue = () => {\r\n    if (openDepositModal) {\r\n      if (modalIndex < 5) {\r\n        setTokenValue(Number(balanceList[modalIndex].toFixed(3)));\r\n      } else {\r\n        setTokenValue(Number(balanceEth));\r\n      }\r\n    } else {\r\n      if (modalIndex < 5) {\r\n        setTokenValue(\r\n          Number(collateralFreeCollateralList[modalIndex].toFixed(3))\r\n        );\r\n      } else {\r\n        setTokenValue(Number(collateralFreeCollateralList[1].toFixed(3)));\r\n      }\r\n    }\r\n  };\r\n\r\n  const CalcUserAccountDetails = function () {\r\n    if (connected === true) {\r\n      dispatch(\r\n        calcUserAccountDetails({\r\n          networkID: chainID,\r\n          provider: provider,\r\n          perpetualObject: perpetualObject,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const onSeekApproval = async () => {\r\n    await dispatch(\r\n      changeApproval({\r\n        provider: provider,\r\n        networkID: chainID,\r\n        tokenIndex: modalIndex,\r\n        perpetualObject: perpetualObject,\r\n      })\r\n    );\r\n  };\r\n\r\n  const onSeekDeposit = async () => {\r\n    if (modalIndex === 5) {\r\n      await dispatch(\r\n        changeDepositCollateral({\r\n          address: address,\r\n          provider: provider,\r\n          networkID: chainID,\r\n          amount: new Big(tokenValue),\r\n          perpetualObject: perpetualObject,\r\n        })\r\n      );\r\n    } else {\r\n      await dispatch(\r\n        changeDepositCollateral({\r\n          address: address,\r\n          provider: provider,\r\n          networkID: chainID,\r\n          tokenIndex: modalIndex,\r\n          amount: new Big(tokenValue),\r\n          perpetualObject: perpetualObject,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const onSeekWithdraw = async () => {\r\n    if (modalIndex === 5) {\r\n      await dispatch(\r\n        withdrawCollateral({\r\n          address: address,\r\n          provider: provider,\r\n          networkID: chainID,\r\n          amount: new Big(tokenValue),\r\n          perpetualObject: perpetualObject,\r\n        })\r\n      );\r\n    } else {\r\n      await dispatch(\r\n        withdrawCollateral({\r\n          address: address,\r\n          provider: provider,\r\n          networkID: chainID,\r\n          tokenIndex: modalIndex,\r\n          amount: new Big(tokenValue),\r\n          perpetualObject: perpetualObject,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    CalcUserAccountDetails();\r\n  }, [connected]);\r\n\r\n  return (\r\n    <Box sx={{}}>\r\n      <TableContainer\r\n        component={Paper}\r\n        sx={{\r\n          mt: 2,\r\n          borderRadius: \"10px\",\r\n          backgroundColor: \"rgba(29, 29, 29, 1)\",\r\n        }}\r\n      >\r\n        <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell\r\n                sx={{\r\n                  fontSize: \"18px\",\r\n                  fontFamily: \"Montserrat Medium\",\r\n                  borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                  color: \"rgba(145, 153, 167, 1)\",\r\n                }}\r\n              >\r\n                COIN\r\n              </TableCell>\r\n              <TableCell\r\n                sx={{\r\n                  fontSize: \"18px\",\r\n                  fontFamily: \"Montserrat Medium\",\r\n                  borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                  color: \"rgba(145, 153, 167, 1)\",\r\n                }}\r\n                align=\"right\"\r\n              >\r\n                WALLET\r\n              </TableCell>\r\n              <TableCell\r\n                sx={{\r\n                  fontSize: \"18px\",\r\n                  fontFamily: \"Montserrat Medium\",\r\n                  borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                  color: \"rgba(145, 153, 167, 1)\",\r\n                }}\r\n                align=\"right\"\r\n              >\r\n                AMOUNT\r\n              </TableCell>\r\n              <TableCell\r\n                sx={{\r\n                  fontSize: \"18px\",\r\n                  fontFamily: \"Montserrat Medium\",\r\n                  borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                  color: \"rgba(145, 153, 167, 1)\",\r\n                }}\r\n                align=\"right\"\r\n              >\r\n                WITHDRAWABLE\r\n              </TableCell>\r\n              <TableCell\r\n                sx={{\r\n                  fontSize: \"18px\",\r\n                  fontFamily: \"Montserrat Medium\",\r\n                  borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                  color: \"rgba(145, 153, 167, 1)\",\r\n                }}\r\n                align=\"right\"\r\n              >\r\n                ACTION\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          {isUserAccountCalculated && (\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell\r\n                  component=\"th\"\r\n                  scope=\"row\"\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                >\r\n                  <Box>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"22px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat Bold\",\r\n                      }}\r\n                    >\r\n                      USDC\r\n                    </Typography>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"18px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat\",\r\n                        color: \"rgba(145, 153, 167, 1)\",\r\n                      }}\r\n                    >\r\n                      ${collateralTokenPriceList[0].toFixed(2)}\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {balanceList[0].toFixed(2)} USD\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralBalanceList[0].toFixed(2)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralFreeCollateralList[0].toFixed(2)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        color: \"rgb(238, 233, 226)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"transparent\",\r\n                        boxSizing: \"border-box\",\r\n                        border: \"1px solid rgb(238, 233, 226)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"transparent\",\r\n                          color: \"rgb(238, 233, 226)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleWithdrawModalOpen(0)}\r\n                    >\r\n                      Withdraw\r\n                    </Button>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        ml: 1,\r\n                        color: \"rgb(44, 46, 55)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"rgb(248, 204, 130)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"rgb(248, 204, 130)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleDepositModalOpen(0)}\r\n                    >\r\n                      Deposit\r\n                    </Button>\r\n                  </Box>\r\n                </TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell\r\n                  component=\"th\"\r\n                  scope=\"row\"\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                >\r\n                  <Box>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"22px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat Bold\",\r\n                      }}\r\n                    >\r\n                      ETH\r\n                    </Typography>\r\n\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"18px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat\",\r\n                        color: \"rgba(145, 153, 167, 1)\",\r\n                      }}\r\n                    >\r\n                      ${collateralTokenPriceList[1].toFixed(2)}\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {balanceEth} ETH\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralBalanceList[1].toFixed(3)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralFreeCollateralList[1].toFixed(3)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        color: \"rgb(238, 233, 226)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"transparent\",\r\n                        boxSizing: \"border-box\",\r\n                        border: \"1px solid rgb(238, 233, 226)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"transparent\",\r\n                          color: \"rgb(238, 233, 226)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleWithdrawModalOpen(5)}\r\n                    >\r\n                      Withdraw\r\n                    </Button>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        ml: 1,\r\n                        color: \"rgb(44, 46, 55)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"rgb(248, 204, 130)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"rgb(248, 204, 130)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleDepositModalOpen(5)}\r\n                    >\r\n                      Deposit\r\n                    </Button>\r\n                  </Box>\r\n                </TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell\r\n                  component=\"th\"\r\n                  scope=\"row\"\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                >\r\n                  <Box>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"22px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat Bold\",\r\n                      }}\r\n                    >\r\n                      WETH\r\n                    </Typography>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"18px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat\",\r\n                        color: \"rgba(145, 153, 167, 1)\",\r\n                      }}\r\n                    >\r\n                      ${collateralTokenPriceList[1].toFixed(2)}\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {balanceList[1].toFixed(3)} WETH\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralBalanceList[1].toFixed(3)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralFreeCollateralList[1].toFixed(3)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        color: \"rgb(238, 233, 226)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"transparent\",\r\n                        boxSizing: \"border-box\",\r\n                        border: \"1px solid rgb(238, 233, 226)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"transparent\",\r\n                          color: \"rgb(238, 233, 226)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleWithdrawModalOpen(1)}\r\n                    >\r\n                      Withdraw\r\n                    </Button>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        ml: 1,\r\n                        color: \"rgb(44, 46, 55)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"rgb(248, 204, 130)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"rgb(248, 204, 130)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleDepositModalOpen(1)}\r\n                    >\r\n                      Deposit\r\n                    </Button>\r\n                  </Box>\r\n                </TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell\r\n                  component=\"th\"\r\n                  scope=\"row\"\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                >\r\n                  <Box>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"22px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat Bold\",\r\n                      }}\r\n                    >\r\n                      FRAX\r\n                    </Typography>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"18px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat\",\r\n                        color: \"rgba(145, 153, 167, 1)\",\r\n                      }}\r\n                    >\r\n                      ${collateralTokenPriceList[2].toFixed(2)}\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {balanceList[2].toFixed(2)} FRAX\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralBalanceList[2].toFixed(2)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralFreeCollateralList[2].toFixed(2)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        color: \"rgb(238, 233, 226)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"transparent\",\r\n                        boxSizing: \"border-box\",\r\n                        border: \"1px solid rgb(238, 233, 226)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"transparent\",\r\n                          color: \"rgb(238, 233, 226)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleWithdrawModalOpen(2)}\r\n                    >\r\n                      Withdraw\r\n                    </Button>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        ml: 1,\r\n                        color: \"rgb(44, 46, 55)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"rgb(248, 204, 130)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"rgb(248, 204, 130)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleDepositModalOpen(2)}\r\n                    >\r\n                      Deposit\r\n                    </Button>\r\n                  </Box>\r\n                </TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell\r\n                  component=\"th\"\r\n                  scope=\"row\"\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                >\r\n                  <Box>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"22px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat Bold\",\r\n                      }}\r\n                    >\r\n                      OP\r\n                    </Typography>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"18px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat\",\r\n                        color: \"rgba(145, 153, 167, 1)\",\r\n                      }}\r\n                    >\r\n                      ${collateralTokenPriceList[3].toFixed(2)}\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {balanceList[3].toFixed(2)} OP\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralBalanceList[3].toFixed(2)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralFreeCollateralList[3].toFixed(2)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        color: \"rgb(238, 233, 226)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"transparent\",\r\n                        boxSizing: \"border-box\",\r\n                        border: \"1px solid rgb(238, 233, 226)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"transparent\",\r\n                          color: \"rgb(238, 233, 226)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleWithdrawModalOpen(3)}\r\n                    >\r\n                      Withdraw\r\n                    </Button>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        ml: 1,\r\n                        color: \"rgb(44, 46, 55)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"rgb(248, 204, 130)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"rgb(248, 204, 130)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleDepositModalOpen(3)}\r\n                    >\r\n                      Deposit\r\n                    </Button>\r\n                  </Box>\r\n                </TableCell>\r\n              </TableRow>\r\n              <TableRow\r\n                sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\r\n              >\r\n                <TableCell\r\n                  component=\"th\"\r\n                  scope=\"row\"\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                >\r\n                  <Box>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"22px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat Bold\",\r\n                      }}\r\n                    >\r\n                      USDT\r\n                    </Typography>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: \"18px\",\r\n                        lineHeight: \"1.2\",\r\n                        fontFamily: \"Montserrat\",\r\n                        color: \"rgba(145, 153, 167, 1)\",\r\n                      }}\r\n                    >\r\n                      ${collateralTokenPriceList[4].toFixed(2)}\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {balanceList[4].toFixed(2)} USDT\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralBalanceList[4].toFixed(2)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  {collateralFreeCollateralList[4].toFixed(2)}\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={{\r\n                    fontSize: \"22px\",\r\n                    fontFamily: \"Montserrat Bold\",\r\n                    borderBottom: \"1px solid rgba(67, 70, 74, 1)\",\r\n                    color: \"white\",\r\n                  }}\r\n                  align=\"right\"\r\n                >\r\n                  <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        color: \"rgb(238, 233, 226)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"transparent\",\r\n                        boxSizing: \"border-box\",\r\n                        border: \"1px solid rgb(238, 233, 226)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"transparent\",\r\n                          color: \"rgb(238, 233, 226)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleWithdrawModalOpen(4)}\r\n                    >\r\n                      Withdraw\r\n                    </Button>\r\n                    <Button\r\n                      disabled={!connected}\r\n                      sx={{\r\n                        padding: \"6px 16px\",\r\n                        borderRadius: \"6px\",\r\n                        ml: 1,\r\n                        color: \"rgb(44, 46, 55)\",\r\n                        textTransform: \"none\",\r\n                        backgroundColor: \"rgb(248, 204, 130)\",\r\n                        fontFamily: \"Montserrat SemiBold\",\r\n                        \"&: hover\": {\r\n                          backgroundColor: \"rgb(234, 216, 184)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                        \"&: disabled\": {\r\n                          backgroundColor: \"rgb(248, 204, 130)\",\r\n                          color: \"rgb(44, 46, 55)\",\r\n                        },\r\n                      }}\r\n                      onClick={() => handleDepositModalOpen(4)}\r\n                    >\r\n                      Deposit\r\n                    </Button>\r\n                  </Box>\r\n                </TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          )}\r\n        </Table>\r\n      </TableContainer>\r\n      <Modal\r\n        open={openDepositModal}\r\n        onClose={handleModalClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box sx={modalStyle}>\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"18px\",\r\n                fontFamily: \"Montserrat Bold\",\r\n                color: \"white\",\r\n              }}\r\n            >\r\n              Deposit\r\n            </Typography>\r\n            <IconButton sx={{ padding: \"0\" }} onClick={handleModalClose}>\r\n              <CloseIcon sx={{ color: \"white\" }} />\r\n            </IconButton>\r\n          </Box>\r\n          <Box sx={{ display: \"flex\", justifyContent: \"space-between\", mt: 3 }}>\r\n            <Button\r\n              sx={{\r\n                border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n                borderRadius: \"10px\",\r\n                padding: \"4px 24px\",\r\n                color: \"white\",\r\n                fontSize: \"18px\",\r\n                fontFamily: \"Montserrat Medium\",\r\n                mr: 1,\r\n              }}\r\n            >\r\n              {TokenList[modalIndex]}\r\n            </Button>\r\n            <FormControl sx={{ flexGrow: \"1\" }} variant=\"outlined\">\r\n              <OutlinedInput\r\n                id=\"outlined-adornment-weight\"\r\n                value={tokenValue}\r\n                onChange={handleTokenValueChange}\r\n                aria-describedby=\"outlined-weight-helper-text\"\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">\r\n                    <Button\r\n                      sx={{\r\n                        color: \"white\",\r\n                        border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n                        borderRadius: \"12px\",\r\n                        padding: \"2px 4px\",\r\n                        minWidth: \"44px\",\r\n                        fontSize: \"10px\",\r\n                      }}\r\n                      onClick={handleMaxValue}\r\n                    >\r\n                      Max\r\n                    </Button>\r\n                  </InputAdornment>\r\n                }\r\n                sx={{\r\n                  borderRadius: \"8px\",\r\n                  color: \"white\",\r\n                  pr: 1,\r\n                  border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n                  \"& .MuiOutlinedInput-input\": { padding: \"12px 8px\" },\r\n                  \"& .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\r\n                }}\r\n              />\r\n            </FormControl>\r\n          </Box>\r\n          <Box sx={{ display: \"flex\", justifyContent: \"flex-start\", mt: 2 }}>\r\n            <Typography\r\n              sx={{\r\n                fontFamily: \"Montserrat Medium\",\r\n                mr: 3,\r\n                fontSize: \"12px\",\r\n                color: \"rgba(145, 153, 167, 1)\",\r\n              }}\r\n            >\r\n              Balance:\r\n            </Typography>\r\n            {isUserAccountCalculated && modalIndex <= 4 && (\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"Montserrat Medium\",\r\n                  fontSize: \"12px\",\r\n                  color: \"white\",\r\n                }}\r\n              >\r\n                {balanceList[modalIndex].toFixed(2)}\r\n              </Typography>\r\n            )}\r\n            {isUserAccountCalculated && modalIndex === 5 && (\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"Montserrat Medium\",\r\n                  fontSize: \"12px\",\r\n                  color: \"white\",\r\n                }}\r\n              >\r\n                {balanceEth}\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n          {modalIndex === 5 ? (\r\n            <Button\r\n              sx={{\r\n                borderRadius: \"8px\",\r\n                width: \"100%\",\r\n                border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n                fontFamily: \"Montserrat SemiBold\",\r\n                background: \"rgb(37, 37, 37)\",\r\n                padding: 0,\r\n                height: \"50px\",\r\n                color: \"rgb(255, 184, 0)\",\r\n                mt: 1,\r\n                \"& :hover\": { background: \"rgb(43, 42, 42)\" },\r\n              }}\r\n              onClick={() => {\r\n                onSeekDeposit();\r\n              }}\r\n            >\r\n              Deposit\r\n            </Button>\r\n          ) : isUserAccountCalculated &&\r\n            allowanceList[modalIndex].toNumber() > 0 ? (\r\n            <Button\r\n              sx={{\r\n                borderRadius: \"8px\",\r\n                width: \"100%\",\r\n                border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n                fontFamily: \"Montserrat SemiBold\",\r\n                background: \"rgb(37, 37, 37)\",\r\n                padding: 0,\r\n                height: \"50px\",\r\n                color: \"rgb(255, 184, 0)\",\r\n                mt: 1,\r\n                \"& :hover\": { background: \"rgb(43, 42, 42)\" },\r\n              }}\r\n              onClick={() => {\r\n                onSeekDeposit();\r\n              }}\r\n            >\r\n              Deposit\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              sx={{\r\n                borderRadius: \"8px\",\r\n                width: \"100%\",\r\n                border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n                fontFamily: \"Montserrat SemiBold\",\r\n                background: \"rgb(37, 37, 37)\",\r\n                padding: 0,\r\n                height: \"50px\",\r\n                color: \"rgb(255, 184, 0)\",\r\n                mt: 1,\r\n                \"& :hover\": { background: \"rgb(43, 42, 42)\" },\r\n              }}\r\n              onClick={() => {\r\n                onSeekApproval();\r\n              }}\r\n            >\r\n              Approve\r\n            </Button>\r\n          )}\r\n        </Box>\r\n      </Modal>\r\n      <Modal\r\n        open={openWithdrawModal}\r\n        onClose={handleModalClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box sx={modalStyle}>\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"18px\",\r\n                fontFamily: \"Montserrat Bold\",\r\n                color: \"white\",\r\n              }}\r\n            >\r\n              Withdraw\r\n            </Typography>\r\n            <IconButton sx={{ padding: \"0\" }} onClick={handleModalClose}>\r\n              <CloseIcon sx={{ color: \"white\" }} />\r\n            </IconButton>\r\n          </Box>\r\n          <Box sx={{ display: \"flex\", justifyContent: \"space-between\", mt: 3 }}>\r\n            <Button\r\n              sx={{\r\n                border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n                borderRadius: \"10px\",\r\n                padding: \"4px 24px\",\r\n                color: \"white\",\r\n                fontSize: \"18px\",\r\n                fontFamily: \"Montserrat Medium\",\r\n                mr: 1,\r\n              }}\r\n            >\r\n              {TokenList[modalIndex]}\r\n            </Button>\r\n            <FormControl sx={{ flexGrow: \"1\" }} variant=\"outlined\">\r\n              <OutlinedInput\r\n                id=\"outlined-adornment-weight\"\r\n                value={tokenValue}\r\n                onChange={handleTokenValueChange}\r\n                aria-describedby=\"outlined-weight-helper-text\"\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">\r\n                    <Button\r\n                      sx={{\r\n                        color: \"white\",\r\n                        border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n                        borderRadius: \"12px\",\r\n                        padding: \"2px 4px\",\r\n                        minWidth: \"44px\",\r\n                        fontSize: \"10px\",\r\n                      }}\r\n                      onClick={handleMaxValue}\r\n                    >\r\n                      Max\r\n                    </Button>\r\n                  </InputAdornment>\r\n                }\r\n                sx={{\r\n                  borderRadius: \"8px\",\r\n                  color: \"white\",\r\n                  pr: 1,\r\n                  border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n                  \"& .MuiOutlinedInput-input\": { padding: \"12px 8px\" },\r\n                  \"& .MuiOutlinedInput-notchedOutline\": { border: \"none\" },\r\n                }}\r\n              />\r\n            </FormControl>\r\n          </Box>\r\n          <Box sx={{ display: \"flex\", justifyContent: \"flex-start\", mt: 2 }}>\r\n            <Typography\r\n              sx={{\r\n                fontFamily: \"Montserrat Medium\",\r\n                mr: 3,\r\n                fontSize: \"12px\",\r\n                color: \"rgba(145, 153, 167, 1)\",\r\n              }}\r\n            >\r\n              Balance:\r\n            </Typography>\r\n            {isUserAccountCalculated && modalIndex <= 4 && (\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"Montserrat Medium\",\r\n                  fontSize: \"12px\",\r\n                  color: \"white\",\r\n                }}\r\n              >\r\n                {collateralFreeCollateralList[modalIndex].toFixed(3)}\r\n              </Typography>\r\n            )}\r\n            {isUserAccountCalculated && modalIndex === 5 && (\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"Montserrat Medium\",\r\n                  fontSize: \"12px\",\r\n                  color: \"white\",\r\n                }}\r\n              >\r\n                {collateralFreeCollateralList[1].toFixed(3)}\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            sx={{\r\n              borderRadius: \"8px\",\r\n              width: \"100%\",\r\n              border: \"1px solid rgba(255, 255, 255, 0.12)\",\r\n              fontFamily: \"Montserrat SemiBold\",\r\n              background: \"rgb(37, 37, 37)\",\r\n              padding: 0,\r\n              height: \"50px\",\r\n              color: \"rgb(255, 184, 0)\",\r\n              mt: 1,\r\n              \"& :hover\": { background: \"rgb(43, 42, 42)\" },\r\n            }}\r\n            onClick={() => {\r\n              onSeekWithdraw();\r\n            }}\r\n          >\r\n            Withdraw\r\n          </Button>\r\n        </Box>\r\n      </Modal>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default CollateralBoard;\r\n","import { Box } from \"@mui/material\";\r\n\r\nimport CollateralBalance from \"./components/CollateralBalance\";\r\nimport CollateralBoard from \"./components/CollateralBoard\";\r\n\r\nfunction Home() {\r\n\treturn (\t\t\r\n\t\t<Box sx={{backgroundColor: 'rgba(9, 9, 10, 1)', display: 'flex', height: 'calc(100vh - 187px)', justifyContent: 'center', pt: 3, px: 1}}>\t\r\n\t\t\t<Box sx={{maxWidth: '1124px', width: '100%'}}>\t\r\n      \t<CollateralBalance />\r\n\t\t\t\t<CollateralBoard />\r\n\t\t\t</Box>\r\n\t\t</Box>\t\t\r\n\t)\r\n}\r\n\r\nexport default Home;","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { close } from \"../../store/slices/messages-slice\";\n// import \"./console-interceptor\";\nimport { MessagesState } from \"../../store/slices/messages-slice\";\nimport { IReduxState } from \"../../store/slices/state.interface\";\nimport { useSnackbar } from \"notistack\";\n\n// A component that displays error messages\nfunction Messages() {\n    const { enqueueSnackbar } = useSnackbar();\n    const messages = useSelector<IReduxState, MessagesState>(state => state.messages);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (messages.message) {\n            enqueueSnackbar(JSON.stringify(messages.message));\n            dispatch(close());\n        }\n    }, [messages.message]);\n\n    return <div></div>;\n}\n\nexport default Messages;\n","import { Route, Routes, Navigate } from \"react-router-dom\";\nimport ConnectMenu from \"./Header\";\nimport PriceHeader from \"./Pages/Trade/components/PriceHeader\";\nimport Trade from \"./Pages/Trade\";\nimport Home from \"./Pages/Home\";\nimport './App.scss';\nimport Messages from \"./components/Messages\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ConnectMenu />   \n      <PriceHeader />\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/trade\" element={<Trade />} />\n        <Route path=\"*\" element={<Navigate replace to=\"/\" />}/>\n      </Routes>      \n      <Messages />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { configureStore } from \"@reduxjs/toolkit\";\n\nimport messagesReducer from \"./slices/messages-slice\";\nimport positionsReducer from \"./slices/position-slice\";\nimport userSlice from \"./slices/user-slice\";\nimport marketsSlice from \"./slices/markets-slice\";\n\nconst store = configureStore({\n    reducer: {        \n        messages: messagesReducer,    \n        positions: positionsReducer,   \n        user: userSlice, \n        markets: marketsSlice,\n    },\n    middleware: getDefaultMiddleware => getDefaultMiddleware({ serializableCheck: false }),\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\nexport default store;\n","import React, { useState, forwardRef, useCallback } from \"react\";\nimport classnames from \"classnames\";\nimport { Collapse, Paper, Typography, Card, CardActions, Button, IconButton } from \"@mui/material\";\nimport { makeStyles, createStyles } from '@mui/styles';\n\nimport { useSnackbar, SnackbarContent } from \"notistack\";\n\nimport CloseIcon from '@mui/icons-material/Close';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport { Message } from \"../../store/slices/messages-slice\";\nimport WarningIcon from '@mui/icons-material/Warning';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport InfoIcon from '@mui/icons-material/Info';\nimport SuccessIcon from '@mui/icons-material/CheckCircle';\nimport { AlertColor } from \"@mui/material/Alert\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        \"@media (min-width:600px)\": {\n            minWidth: \"344px !important\"\n          }\n    },\n    card: {\n        width: \"100%\",\n    },\n    error: {\n        backgroundColor: \"#d32f2f\",\n    },\n    info: {\n        backgroundColor: \"#2979ff\",\n    },\n    warning: {\n        backgroundColor: \"#ffa000\",\n    },\n    success: {\n        backgroundColor: \"#43a047\",\n    },\n    typography: {\n        color: \"#FFFFFF\",\n        fontFamily: \"Montserrat SemiBold\",\n    },\n    actionRoot: {\n        padding: \"8px 8px 8px 16px\",\n        justifyContent: \"space-between\",\n        color: \"#FFFFFF\",\n    },\n    icons: {\n        marginLeft: \"auto\",\n    },\n    expand: {\n        padding: \"8px 8px\",\n        transform: \"rotate(0deg)\",\n        transition: \"all .2s\",\n        color: \"#FFFFFF\",\n    },\n    expandOpen: {\n        transform: \"rotate(180deg)\",\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: \"#b3b3b3\",\n        paddingRight: 4,\n    },\n    checkIconCopy: {\n        color: \"#43a047\",\n    },\n    button: {\n        padding: 0,\n        textTransform: \"none\",\n    },\n    errorWrap: {\n        marginTop: 10,\n    },\n    errorText: {\n        whiteSpace: \"pre-wrap\",\n        maxHeight: 300,\n        overflow: \"auto\",\n        background: \"rgba(0,0,0,0.1)\",\n        padding: 5,\n        borderRadius: 5,\n    },\n}));\n\nconst SnackMessage = forwardRef<HTMLDivElement, { id: string | number; message: Message }>((props, ref) => {\n    const classes = useStyles();\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n    const [isCopy, setIsCopy] = useState(false);\n\n    const handleExpandClick = useCallback(() => {\n        setExpanded(oldExpanded => !oldExpanded);\n    }, []);\n\n    const handleDismiss = useCallback(() => {\n        closeSnackbar(props.id);\n    }, [props.id, closeSnackbar]);\n\n    const getIcon = (severity: AlertColor) => {\n        switch (severity) {\n            case \"error\":\n                return <ErrorIcon color=\"inherit\" />;\n            case \"info\":\n                return <InfoIcon color=\"inherit\" />;\n            case \"success\":\n                return <SuccessIcon color=\"inherit\" />;\n            case \"warning\":\n                return <WarningIcon color=\"inherit\" />;\n            default:\n                return <div />;\n        }\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card className={classnames(classes.card, classes[props.message.severity])}>\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    {getIcon(props.message.severity)}\n                    <Typography variant=\"subtitle2\" className={classes.typography}>\n                        {props.message.text}\n                    </Typography>\n                    <div className={classes.icons}>\n                        {props.message.error && (\n                            <IconButton aria-label=\"Show more\" className={classnames(classes.expand, { [classes.expandOpen]: expanded })} onClick={handleExpandClick}>\n                                <ExpandMoreIcon color=\"inherit\" />\n                            </IconButton>\n                        )}\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon color=\"inherit\" />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <CopyToClipboard text={JSON.stringify(props.message.error)} onCopy={() => setIsCopy(true)}>\n                            <Button size=\"small\" className={classes.button}>\n                                <CheckCircleIcon className={classnames(classes.checkIcon, { [classes.checkIconCopy]: isCopy })} />\n                                Copy to clipboard\n                            </Button>\n                        </CopyToClipboard>\n                        <div className={classes.errorWrap}>\n                            <Typography>Error message: </Typography>\n                            <Typography className={classes.errorText}>{JSON.stringify(props.message.error, null, 2)}</Typography>\n                        </div>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\n\nexport default SnackMessage;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport store from \"./store/store\";\nimport { Provider } from \"react-redux\";\nimport { Web3ContextProvider } from \"./hooks/web3Context\";\nimport { SnackbarProvider } from \"notistack\";\nimport SnackMessage from \"./components/Messages/snackbar\";\nimport {Trade} from './container/trade';\nimport { AMM } from './container/amm';\n\nconst Providers = ((...providers: any[]) => ({ children }: { children: React.ReactNode }) => {\n  return providers.reduceRight((providers, provider) => {\n      const Provider = provider.component || provider\n      const props = provider.props || {}\n      return <Provider {...props}>{providers}</Provider>\n  }, children)\n})(  \n  Trade.Provider,  \n  AMM.Provider\n)\n\nReactDOM.render(\n  <React.StrictMode>  \n    <SnackbarProvider\n      maxSnack={4}\n      anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"right\",\n      }}\n      content={(key: string | number, message: string) => <SnackMessage id={key} message={JSON.parse(message)} />}\n      autoHideDuration={10000}\n    >\n      <Provider store={store}>\n        <Web3ContextProvider>\n          <Providers>\n            <HashRouter>\n              <App />      \n            </HashRouter>\n          </Providers>\n        </Web3ContextProvider>\n      </Provider>\n    </SnackbarProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}