(this.webpackJsonpwallpetint=this.webpackJsonpwallpetint||[]).push([[0],{407:function(e,t,n){},408:function(e,t){},448:function(e,t){},450:function(e,t){},474:function(e,t){},476:function(e,t){},488:function(e,t){},489:function(e,t){},512:function(e,t){},515:function(e,t){},517:function(e,t){},622:function(e,t){},623:function(e,t){},637:function(e,t,n){},639:function(e,t,n){"use strict";n.r(t);var r,o=n(25),i=n(1),a=n.n(i),c=n(69),s=n.n(c),l=(n(407),n(13)),u=n(728),d=n(730),b=n(731),p=n(724),x=n(0),j=n(6),f=n(12),O=n(356),h=n.n(O),g=n(701),m=n(702),v=n(387);!function(e){e[e.OPTIMISM=10]="OPTIMISM",e[e.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI"}(r||(r={}));var C=r.OPTIMISM,k=n(3),y=a.a.createContext(null),w=function(){var e=Object(i.useContext)(y);if(!e)throw new Error("useWeb3Context() can only be used inside of <Web3ContextProvider />, please declare it at a higher level.");var t=e.onChainProvider;return Object(i.useMemo)((function(){return Object(o.a)({},t)}),[e])},S=function(e){var t=e.children,n=Object(i.useState)(!1),o=Object(l.a)(n,2),a=o[0],c=o[1],s=Object(i.useState)(C),u=Object(l.a)(s,2),d=u[0],b=(u[1],Object(i.useState)(C)),p=Object(l.a)(b,2),O=p[0],w=p[1],S=Object(i.useState)(""),P=Object(l.a)(S,2),I=P[0],M=P[1],F=Object(i.useState)("https://mainnet.optimism.io"),z=Object(l.a)(F,2),T=z[0],L=(z[1],Object(i.useState)(new g.a(T))),N=Object(l.a)(L,2),D=N[0],B=N[1],R=Object(i.useState)(new h.a({cacheProvider:!0,providerOptions:{walletconnect:{package:v.a,options:{rpc:Object(f.a)({},r.OPTIMISM,"https://mainnet.optimism.io")}}}})),A=Object(l.a)(R,1)[0],E=function(){return!!A&&!!A.cachedProvider},G=Object(i.useCallback)((function(e){e.on&&(e.on("accountsChanged",(function(){return setTimeout((function(){return window.location.reload()}),1)})),e.on("chainChanged",function(){var e=Object(j.a)(Object(x.a)().mark((function e(t){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("network",(function(e,t){t&&window.location.reload()})))}),[D]),U=function(){var e=Object(j.a)(Object(x.a)().mark((function e(t){var n;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Number(t),w(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=Object(i.useCallback)(Object(j.a)(Object(x.a)().mark((function e(){var t,n,o,i;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.connect();case 2:return t=e.sent,G(t),n=new m.a(t,"any"),e.next=7,n.getNetwork().then((function(e){return Number(e.chainId)}));case 7:return o=e.sent,e.next=10,n.getSigner().getAddress();case 10:return i=e.sent,M(i),w(o),o===r.OPTIMISM&&B(n),c(!0),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)}))),[D,A,a]),W=Object(i.useCallback)(Object(j.a)(Object(x.a)().mark((function e(){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.clearCachedProvider(),c(!1),setTimeout((function(){window.location.reload()}),1);case 3:case"end":return e.stop()}}),e)}))),[D,A,a]),q=Object(i.useMemo)((function(){return{connect:H,disconnect:W,hasCachedProvider:E,provider:D,connected:a,address:I,chainID:d,web3Modal:A,providerChainID:O}}),[H,W,E,D,a,I,d,A,O]);return Object(k.jsx)(y.Provider,{value:{onChainProvider:q},children:t})},P=n(371),I=n.n(P);var M=function(){var e=w(),t=e.connect,n=e.disconnect,r=e.connected,o=e.web3,a=(e.address,e.provider,e.providerChainID),c=e.checkWrongNetwork,s=Object(i.useState)(r),x=Object(l.a)(s,2),j=x[0],f=x[1],O="Connect",h=t;return j&&(O="Disconnect",h=n),j&&a!==C&&(O="Wrong network",h=function(){c()}),Object(i.useEffect)((function(){f(r)}),[o,r]),Object(k.jsx)(u.a,{position:"static",sx:{backgroundColor:"rgba(9, 9, 10, 1)",backgroundImage:"none",py:2,px:2,borderBottom:"1px solid rgba(255, 255, 255, 0.16)"},children:Object(k.jsxs)(d.a,{flexGrow:1,justifyContent:"space-between",alignItems:"center",sx:{ml:{xs:"20px",md:"60px"},display:"flex"},children:[Object(k.jsx)(b.a,{variant:"h4",fontWeight:"700",textAlign:"center",color:"white",children:"Perp V2"}),Object(k.jsxs)(p.a,{variant:"contained",sx:{cursor:"pointer",backgroundColor:"transparent",color:"rgba(101, 230, 255, 1)",fontSize:"16px","&:hover":{backgroundColor:"rgba(101, 239, 255, 0.12)"}},onClick:h,children:[Object(k.jsx)(I.a,{sx:{color:"rgba(101, 230, 255, 1)",pr:1}}),O]})]})})},F=n(732),z=n(44),T=n(204),L=n(715),N=n(146),D=n(23),B=n.n(D),R=Object(T.a)((function(){var e=Object(i.useState)(z.a.LONG),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(i.useState)(new B.a(.02)),a=Object(l.a)(o,2),c=a[0],s=a[1],u=Object(i.useState)(new B.a(0)),d=Object(l.a)(u,2),b=d[0],p=d[1],x=Object(i.useState)(""),j=Object(l.a)(x,2),f=j[0],O=j[1],h=Object(i.useState)(new L.a({chainId:N.c.OPTIMISM,providerConfigs:[{rpcUrl:"https://optimism-mainnet.infura.io/v3/dd583584ac144f7984ac22cb0595646e"}]})),g=Object(l.a)(h,2),m=g[0];g[1];return Object(i.useMemo)((function(){return{side:n,setPositionSide:r,slippage:c,setSlippage:s,collateral:b,setCollateral:p,_collateral:f,_setCollateral:O,perpetualObject:m}}),[n,c,b,f])}));var A=function(){var e=R.useContainer(),t=e.side,n=e.setPositionSide,r=Object(i.useCallback)((function(){t!==z.a.LONG&&n(z.a.LONG)}),[n,t]),o=Object(i.useCallback)((function(){t!==z.a.SHORT&&n(z.a.SHORT)}),[n,t]);return Object(k.jsxs)(F.a,{size:"large",sx:{py:"12px",border:"none",width:"100%"},children:[Object(k.jsx)(p.a,{sx:{width:"50%",fontSize:"12px",backgroundColor:t===z.a.LONG?"#52c41a":"gray",color:t===z.a.LONG?"white":"black",border:"1px solid transparent","&: hover":{backgroundColor:"#49bc10",border:"1px solid transparent"}},onClick:r,children:"Long"}),Object(k.jsx)(p.a,{sx:{width:"50%",fontSize:"12px",backgroundColor:t===z.a.SHORT?"#fa672d":"gray",color:t===z.a.SHORT?"white":"black",border:"1px solid transparent","&: hover":{backgroundColor:"#f85819",border:"1px solid transparent"}},onClick:o,children:"Short"})]})},E=n(37),G=n(721),U=n(720),H=n(733),W=n(717),q=Object(T.a)((function(){var e=Object(i.useState)("ETHUSD"),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(i.useMemo)((function(){return{marketticker:n,setMarketTicker:r}}),[n,r])}));var V=function(){var e=q.useContainer(),t=(e.marketticker,e.setMarketTicker),n=a.a.useState(!1),r=Object(l.a)(n,2),o=r[0],i=r[1];return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(H.a,{variant:"standard",sx:{m:1,width:"300px"},children:[Object(k.jsx)(G.a,{size:"small",shrink:!0,sx:{left:"120px",color:"rgba(145, 153, 167, 1)","&.Mui-focused":{color:"rgba(145, 153, 167, 1)"}},children:"Market"}),Object(k.jsx)(W.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",open:o,defaultValue:"ETHUSD",onClose:function(){i(!1)},onOpen:function(){i(!0)},label:"Market",onChange:function(e){t(e.target.value)},sx:{"&:hover:not(.Mui-disabled):before":{borderBottom:"none"},"& > svg":{color:"white"},"& ul":{backgroundColor:"rgba(9, 9, 10, 1)"},"&::before":{border:"none"},color:"white","&::after":{borderBottom:"none"}},children:["BTCUSD","ETHUSD","BNBUSD","AVAXUSD"].map((function(e){return Object(k.jsx)(U.a,{value:e,sx:{color:"black"},children:e},e)}))})]})})};var Y=function(){var e=Object(E.c)((function(e){return e.positions.isMarketInfoCalculated})),t=Object(E.c)((function(e){return e.positions.isMarketInfoInitialized})),n=Object(E.c)((function(e){return e.positions.marketIndexPrice}));return Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",backgroundColor:"rgba(29, 29, 29, 1)",flexDirection:{xs:"column",sm:"row"},borderRadius:"10px",py:"4px",mb:1},children:[Object(k.jsx)(V,{}),Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"flex-start",borderLeft:{sm:"1px solid rgba(145, 153, 167, 0.8)"},pl:{sm:2,md:3,xl:4},py:1},children:[Object(k.jsxs)(d.a,{sx:{pr:{xs:2,md:3,xl:4}},children:[Object(k.jsx)(b.a,{sx:{fontSize:"0.75rem",color:"rgba(145, 153, 167, 1)"},children:"Index Price"}),e?Object(k.jsx)(b.a,{sx:{color:"rgb(255, 255, 255)"},children:n}):[t?Object(k.jsx)(b.a,{sx:{color:"rgb(255, 255, 255)"},children:n}):Object(k.jsx)(b.a,{sx:{color:"rgb(255, 255, 255)"},children:"0.0"})]]}),Object(k.jsxs)(d.a,{sx:{pr:{xs:2,md:3,xl:4}},children:[Object(k.jsx)(b.a,{sx:{fontSize:"0.75rem",color:"rgba(145, 153, 167, 1)"},children:"Volume (24h)"}),Object(k.jsx)(b.a,{sx:{color:"rgb(255, 255, 255)"},children:"5,798,410.3"})]}),Object(k.jsxs)(d.a,{sx:{pr:{xs:2,md:3,xl:4}},children:[Object(k.jsx)(b.a,{sx:{fontSize:"0.75rem",color:"rgba(145, 153, 167, 1)"},children:"Funding Rate (8h)"}),Object(k.jsx)(b.a,{sx:{color:"rgb(255, 255, 255)"},children:"0.0071%"})]})]})]})},_=n(722),J=n(736);new D.Big(0),n(41),n(379);new RegExp(/\d(?=(\d{3})+\.)/g);function $(e,t){var n=e.indexOf("."),r=e.split("").filter((function(e,t){return"."!==e||t===n})).join("");return r.includes(".")&&r.length>r.indexOf(".")+(t+1)?r.substr(0,r.indexOf(".")+(t+1)):r}function X(e){var t=e.value,n=e.delay,r=void 0===n?200:n,o=e.onBeforeDebounce,a=e.onAfterDebounce,c=Object(i.useState)(t),s=Object(l.a)(c,2),u=s[0],d=s[1];return Object(i.useEffect)((function(){o&&o(t);var e=setTimeout((function(){d(t),a&&a(t)}),r);return function(){clearTimeout(e)}}),[t,r,o,a]),u}var K=function(){var e=R.useContainer(),t=e.collateral,n=e.setCollateral,r=R.useContainer(),o=r._collateral,a=r._setCollateral,c=X({value:o,delay:800}),s=Object(i.useCallback)((function(e){var t=e.target.value;if(t>=0){var n=$(t,2);a(n)}}),[a]);return Object(i.useEffect)((function(){if(""!==c){var e=new B.a(c);null!==t&&void 0!==t&&t.eq(e)||n(e)}}),[t,c,n]),Object(i.useMemo)((function(){return Object(k.jsx)(d.a,{sx:{my:2},children:Object(k.jsx)(_.a,{id:"outlined-name",label:"Collateral",type:"number",value:o,placeholder:"0",InputLabelProps:{shrink:!0},InputProps:{endAdornment:Object(k.jsx)(J.a,{position:"end",children:"USDC"})},onChange:s,sx:{width:"100%","& > label, & .MuiFormLabel-root.Mui-focused":{color:"#a3a8b7"},"& > div":{color:"white"},"& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7",borderWidth:"1px"},"& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7"},"& .MuiTypography-root":{color:"#a3a8b7"},"& fieldset.MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.16)"}}})})}),[o,s])};var Q=function(){var e=R.useContainer(),t=e.slippage,n=e.setSlippage,r=Object(i.useState)(""),o=Object(l.a)(r,2),a=o[0],c=o[1],s=X({value:a,delay:800}),u=Object(i.useCallback)((function(e){var t=e.target.value;if(t>=0){var n=$(t,2);c(n)}}),[c]);return Object(i.useEffect)((function(){if(""!==s){var e=new B.a(s);null!==t&&void 0!==t&&t.eq(e)||n(e)}}),[t,s,n]),Object(i.useMemo)((function(){return Object(k.jsx)(d.a,{sx:{my:2},children:Object(k.jsx)(_.a,{id:"outlined-name",label:"Slippage",type:"number",value:a,placeholder:"0.02",InputLabelProps:{shrink:!0},InputProps:{endAdornment:Object(k.jsx)(J.a,{position:"end",children:"%"})},onChange:u,sx:{width:"100%","& > label, & .MuiFormLabel-root.Mui-focused":{color:"#a3a8b7"},"& > div":{color:"white"},"& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7",borderWidth:"1px"},"& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#a3a8b7"},"& .MuiTypography-root":{color:"#a3a8b7"},"& fieldset.MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.16)"}}})})}),[a,u])},Z=n(105),ee=n(193),te=function(e,t){Object.keys(t).forEach((function(n){e[n]=t[n]}))},ne=Object(Z.b)("position/calcPositionDetails",function(){var e=Object(j.a)(Object(x.a)().mark((function e(t){var n,r,o,i,a,c,s,l,u,d,b,p,j,f,O,h;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.connected,o=t.networkID,i=t.provider,a=t.perpetualObject,c=t.side,s=t.slippage,l=t.tickerSymbol,u=t.amountInput,d=!1,null!==u){e.next=4;break}return e.abrupt("return",new Promise((function(e){e({oppositeAmount:"",newPositionDraft:void 0,entryPrice:"",tradingFee:"",priceImpact:"",buyingPower:""})})));case 4:if(!u.eq(0)){e.next=6;break}return e.abrupt("return",new Promise((function(e){e({oppositeAmount:"0",newPositionDraft:void 0,entryPrice:"",tradingFee:"",priceImpact:"",buyingPower:""})})));case 6:return e.next=8,a.init();case 8:return p=null===(n=a.clearingHouse)||void 0===n?void 0:n.createPositionDraft({tickerSymbol:l,side:c,amountInput:u,isAmountInputBase:d}),console.log("NewPosition::",p),e.next=12,p.getEntryPrice();case 12:return j=e.sent,e.next=15,p.getTransactionFee();case 15:return f=e.sent,e.next=18,p.getPriceImpact();case 18:return O=e.sent,e.next=21,p.getOppositeAmountBound(s);case 21:if(h=e.sent,!0!==r||o!==C){e.next=29;break}return e.next=25,a.connect({signer:i.getSigner()});case 25:return e.next=27,p.getBuyingPower();case 27:return b=e.sent,e.abrupt("return",{oppositeAmount:h.toFixed(7),newPositionDraft:p,entryPrice:j.toFixed(2),tradingFee:f.toFixed(8),priceImpact:O.toFixed(5),buyingPower:b.toFixed(4)});case 29:return e.abrupt("return",{oppositeAmount:h.toFixed(7),newPositionDraft:p,entryPrice:j.toFixed(2),tradingFee:f.toFixed(8),priceImpact:O.toFixed(5),buyingPower:""});case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(Z.b)("position/openedPositionDetails",function(){var e=Object(j.a)(Object(x.a)().mark((function e(t,n){var r,o,i,a,c,s,l,u,d,b,p,j,f,O,h,g,m,v,k,y,w;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.address,r=t.networkID,o=t.provider,i=t.perpetualObject,a=t.tickerSymbol,c=n.dispatch,r!==C){e.next=43;break}if(!1!==i.hasConnected()){e.next=9;break}return e.next=7,i.init();case 7:return e.next=9,i.connect({signer:o.getSigner()});case 9:return e.next=11,null===i||void 0===i||null===(s=i.positions)||void 0===s?void 0:s.getTakerPositionByTickerSymbol(a);case 11:if(void 0===(d=e.sent)){e.next=16;break}c(ce()),e.next=18;break;case 16:return c(se()),e.abrupt("return",new Promise((function(e){e({isLoss:!1,posSize:"",side:z.a.LONG,pendingValue:"",isProfit:!1,pnlValue:"",openPrice:"",indexPrice:"",liquidationPrice:"",marginRatio:"",leverage:""})})));case 18:return b=d.sizeAbs.toFixed(8),p=d.side,e.next=22,i.positions.getTotalPendingFundingPayments();case 22:return j=e.sent,f=-1===j[a].s,e.next=26,i.positions.getTakerPositionByTickerSymbol(a);case 26:return O=e.sent,e.next=29,O.getUnrealizedPnl();case 29:return h=e.sent,g=-1!==h.s,m=d.entryPrice.toFixed(2),e.next=34,i.contractReader.getIndexPrice(d.market.baseAddress);case 34:return v=e.sent,k=d.liquidationPrice,e.next=38,null===i||void 0===i||null===(l=i.positions)||void 0===l?void 0:l.getAccountMarginRatio();case 38:return y=e.sent,e.next=41,null===i||void 0===i||null===(u=i.positions)||void 0===u?void 0:u.getAccountLeverage();case 41:return w=e.sent,e.abrupt("return",{isLoss:f,posSize:b,side:p,pendingValue:j[a].toFixed(4),isProfit:g,pnlValue:h.toFixed(4),openPrice:m,indexPrice:v.toFixed(2),liquidationPrice:k.toFixed(1),marginRatio:(100*Number(y.toFixed(4))).toFixed(1),leverage:w.toFixed(2)});case 43:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),oe=Object(Z.b)("market/calcMarketDetails",function(){var e=Object(j.a)(Object(x.a)().mark((function e(t){var n,r,o,i;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.perpetualObject,r=t.tickerSymbol,e.next=3,n.init();case 3:return o=n.markets.marketMap,e.next=6,n.contractReader.getIndexPrice(o[r].baseAddress);case 6:return i=e.sent,console.log("Update index price",i.toFixed(2)),e.abrupt("return",{marketIndexPrice:i.toFixed(2)});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=Object(Z.c)({name:"positions",initialState:{isPositionOpened:!1,isCalculated:!1,isOpenedPositionCalculated:!1,isMarketInfoCalculated:!1,isMarketInfoInitialized:!1},reducers:{open:function(e){e.isPositionOpened=!0,e.isCalculated=!1},close:function(e){e.isPositionOpened=!1,e.isOpenedPositionCalculated=!1}},extraReducers:function(e){e.addCase(ne.pending,(function(e){e.isCalculated=!1})).addCase(ne.fulfilled,(function(e,t){te(e,t.payload),e.isCalculated=!0})).addCase(ne.rejected,(function(e,t){var n=t.error;e.isCalculated=!1,console.log(n)})).addCase(re.pending,(function(e){e.isOpenedPositionCalculated=!1})).addCase(re.fulfilled,(function(e,t){te(e,t.payload),e.isOpenedPositionCalculated=!0})).addCase(re.rejected,(function(e,t){var n=t.error;e.isOpenedPositionCalculated=!1,console.log(n)})).addCase(oe.pending,(function(e){e.isMarketInfoCalculated=!1})).addCase(oe.fulfilled,(function(e,t){te(e,t.payload),e.isMarketInfoCalculated=!0,e.isMarketInfoInitialized=!0})).addCase(oe.rejected,(function(e,t){var n=t.error;e.isMarketInfoCalculated=!1,console.log(n)}))}}),ae=ie.actions,ce=ae.open,se=ae.close,le=ie.reducer,ue=(Object(ee.a)((function(e){return e.positions}),(function(e){return e})),function(e,t,n){var r=Object(o.a)({severity:t},n);e.message=r}),de=Object(Z.c)({name:"messages",initialState:{message:null},reducers:{error:function(e,t){ue(e,"error",t.payload)},info:function(e,t){ue(e,"info",t.payload)},warning:function(e,t){ue(e,"warning",t.payload)},success:function(e,t){ue(e,"success",t.payload)},close:function(e){e.message=null}}}),be=de.actions,pe=be.error,xe=be.info,je=be.close,fe=(be.warning,be.success),Oe=de.reducer,he="Your transaction was successfully sent",ge="Your position was successfully updated",me="Something went wrong",ve="Your position will update soon",Ce="Your position will close soon",ke=function(e){return new Promise((function(t){return setTimeout((function(){return t(null)}),1e3*e)}))},ye=function(e,t){var n=me;return 4001===e.code&&e.message.includes("User denied transaction signature")&&(n="User denied transaction signature"),t(pe({text:n}))};var we=function(){var e=Object(E.b)(),t=w(),n=t.address,r=t.provider,o=t.chainID,a=t.connected,c=q.useContainer().marketticker,s=R.useContainer().collateral,l=R.useContainer()._setCollateral,u=R.useContainer().side,f=R.useContainer().slippage,O=R.useContainer().perpetualObject,h=c.substring(0,c.length-3),g=new L.a({chainId:N.c.OPTIMISM,providerConfigs:[{rpcUrl:"https://optimism-mainnet.infura.io/v3/dd583584ac144f7984ac22cb0595646e"}]}),m=Object(E.c)((function(e){return e.positions.isCalculated})),v=Object(E.c)((function(e){return e.positions.newPositionDraft})),C=Object(E.c)((function(e){return e.positions.oppositeAmount})),y=Object(E.c)((function(e){return e.positions.entryPrice})),S=Object(E.c)((function(e){return e.positions.tradingFee})),P=Object(E.c)((function(e){return e.positions.priceImpact})),I=Object(E.c)((function(e){return e.positions.buyingPower})),M=!m||null===s||s.eq(0),F=Object(i.useCallback)(Object(j.a)(Object(x.a)().mark((function t(){var i,a;return Object(x.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==O.hasConnected()){t.next=6;break}return t.next=4,O.init();case 4:return t.next=6,O.connect({signer:r.getSigner()});case 6:return t.prev=6,t.next=9,null===O||void 0===O||null===(a=O.clearingHouse)||void 0===a?void 0:a.openPosition(v,f);case 9:return i=t.sent,console.log("Open Transaction",i),t.next=13,i.transaction.wait();case 13:return e(fe({text:he})),t.next=16,ke(.1);case 16:return e(xe({text:ve})),t.next=19,e(re({address:n,networkID:o,provider:r,perpetualObject:g,tickerSymbol:c}));case 19:e(xe({text:ge})),l(""),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(6),ye(t.t0,e);case 26:return t.prev=26,t.finish(26);case 28:case"end":return t.stop()}}),t,null,[[6,23,26,28]])}))),[v,f]),T=Object(i.useCallback)((function(t){console.log("Calling calc Position"),e(ne({connected:a,networkID:o,provider:t,perpetualObject:O,side:u,slippage:f,tickerSymbol:c,amountInput:s}))}),[s,f,u,c]),D=Object(i.useCallback)((function(t){console.log("Calling calc openedPosition"),e(re({address:n,networkID:o,provider:t,perpetualObject:O,tickerSymbol:c}))}),[a,c]),B=function(){e(oe({perpetualObject:O,tickerSymbol:c}))};return Object(i.useEffect)((function(){T(r)}),[s,f,u,c]),Object(i.useEffect)((function(){D(r)}),[a,c]),Object(i.useEffect)((function(){B();var e=setInterval((function(){return B()}),3e5);return function(){return clearInterval(e)}}),[c]),Object(k.jsxs)(d.a,{sx:{mt:2},children:[Object(k.jsx)(d.a,{sx:{mb:2},children:Object(k.jsx)(_.a,{id:"outlined-name",label:"Output",type:"number",disabled:!0,value:C,placeholder:"0",InputLabelProps:{shrink:!0},InputProps:{endAdornment:Object(k.jsx)(J.a,{position:"end",children:h})},sx:{width:"100%","& .MuiFormLabel-root.Mui-disabled, & .MuiFormLabel-root.Mui-focused, & .MuiTypography-root":{color:"#a3a8b7"},"& > div":{color:"white"},"& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled":{color:"#a3a8b7"},"& .MuiInputBase-root > input":{"-webkit-text-fill-color":"#a3a8b7"},"& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.16)"}}})}),Object(k.jsxs)(d.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Buying Power"}),Object(k.jsxs)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:["$",I]})]}),Object(k.jsx)(b.a,{sx:{mx:"auto",py:1,textAlign:"left",color:"white",fontFamily:"Montserrat Bold"},children:"Summary"}),Object(k.jsxs)(d.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Entry Price"}),Object(k.jsxs)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:["$",y]})]}),Object(k.jsxs)(d.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Trading Fee"}),Object(k.jsxs)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:["$",S]})]}),Object(k.jsxs)(d.a,{sx:{mx:"auto",display:"flex",justifyContent:"space-between",pb:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Price Impact"}),Object(k.jsxs)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:[P,"%"]})]}),Object(k.jsxs)(p.a,{variant:"contained",disabled:M,sx:{width:"100%",paddingY:"12px",backgroundColor:u===z.a.LONG?"success.light":"#ef5350",display:"block",mx:"auto","&: hover":{backgroundColor:u===z.a.LONG?"success.main":"#f44336"},"&: disabled":{backgroundColor:u===z.a.LONG?"success.light":"#ef5350",color:"black",opacity:.8}},onClick:F,children:["Confirm ",u]})]})},Se=n(114),Pe=n(719),Ie=n(737);function Me(){var e=Object(E.b)(),t=w(),n=t.connected,r=t.provider,o=R.useContainer().perpetualObject,i=R.useContainer().slippage,a=q.useContainer().marketticker,c=a,s=a.substring(0,a.length-3),l=Object(E.c)((function(e){return e.positions.isOpenedPositionCalculated})),u=Object(E.c)((function(e){return e.positions.isLoss})),f=Object(E.c)((function(e){return e.positions.posSize})),O=Object(E.c)((function(e){return e.positions.side})),h=Object(E.c)((function(e){return e.positions.pendingValue})),g=Object(E.c)((function(e){return e.positions.isProfit})),m=Object(E.c)((function(e){return e.positions.pnlValue})),v=Object(E.c)((function(e){return e.positions.openPrice})),C=Object(E.c)((function(e){return e.positions.indexPrice})),y=Object(E.c)((function(e){return e.positions.liquidationPrice})),S=Object(E.c)((function(e){return e.positions.marginRatio})),P=Object(E.c)((function(e){return e.positions.leverage})),I=function(){var t=Object(j.a)(Object(x.a)().mark((function t(){var n,a,s,l;return Object(x.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==o.hasConnected()){t.next=6;break}return t.next=4,o.init();case 4:return t.next=6,o.connect({signer:r.getSigner()});case 6:return t.next=8,null===o||void 0===o||null===(n=o.positions)||void 0===n?void 0:n.getTakerPositionByTickerSymbol(c);case 8:if(void 0===(a=t.sent)){t.next=29;break}return t.prev=10,t.next=13,null===o||void 0===o||null===(l=o.clearingHouse)||void 0===l?void 0:l.closePosition(a,i);case 13:return s=t.sent,console.log("Close Transaction",s),t.next=17,s.transaction.wait();case 17:return e(fe({text:he})),t.next=20,ke(.5);case 20:e(xe({text:Ce})),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(10),ye(t.t0,e);case 26:return t.prev=26,e(se()),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[10,23,26,29]])})));return function(){return t.apply(this,arguments)}}();return Object(k.jsx)(d.a,{children:l&&Object(k.jsxs)(d.a,{sx:{maxWidth:"360px"},children:[Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[Object(k.jsx)(b.a,{sx:{fontSize:"16px",mr:1,color:"white"},children:f}),Object(k.jsx)(b.a,{sx:{fontSize:"12px",color:"#a3a8b7"},children:s})]}),Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"LONG"===O?"rgba(94, 217, 151, 1)":"rgba(234, 98, 98, 1)"},children:O})]}),Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Pending Funding Payment"}),Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:!0===u?"rgba(234, 98, 98, 1)":"rgba(94, 217, 151, 1)"},children:h})]}),Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Profit / Loss"}),Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:!0===g?"rgba(94, 217, 151, 1)":"rgba(234, 98, 98, 1)"},children:m})]}),Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Avg. Open Price"}),Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"white"},children:v})]}),Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Index Price"}),Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"white"},children:C})]}),Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Liquidation Price"}),Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"white"},children:y})]}),Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Margin Ratio"}),Object(k.jsxs)(b.a,{sx:{fontSize:"14px",color:"white"},children:[S,"%"]})]}),Object(k.jsxs)(d.a,{sx:{display:"flex",justifyContent:"space-between",py:1},children:[Object(k.jsx)(b.a,{sx:{fontSize:"14px",color:"#a3a8b7"},children:"Leverage"}),Object(k.jsxs)(b.a,{sx:{fontSize:"14px",color:"white"},children:[P,"x"]})]}),Object(k.jsx)(d.a,{sx:{display:"flex"},children:Object(k.jsx)(p.a,{variant:"contained",disabled:!1===n,sx:{paddingY:"8px",mt:1,px:4,backgroundColor:"#185993",backgroundImage:"linear-gradient(to right,#185993 0,#236dae 51%,#185993 100%)",backgroundSize:"200%",boxShadow:"5px 5px 10px 0 rgba(24,89,147,0.25)",color:"#a3a8b7","&: hover":{backgroundColor:"#2376c0",color:"white",backgroundPosition:"right center"}},onClick:I,children:"Close"})})]})})}var Fe=["children","value","index"];function ze(e){var t=e.children,n=e.value,r=e.index,i=Object(Se.a)(e,Fe);return Object(k.jsx)("div",Object(o.a)(Object(o.a)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},i),{},{children:n===r&&Object(k.jsx)(d.a,{sx:{py:2},children:t})}))}function Te(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function Le(){var e=Object(i.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(E.c)((function(e){return e.positions.isPositionOpened}));console.log("OPened position",a);return Object(k.jsxs)(d.a,{sx:{width:"100%"},children:[Object(k.jsx)(d.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(k.jsxs)(Pe.a,{value:n,onChange:function(e,t){r(t)},"aria-label":"basic tabs example",textColor:"primary",TabIndicatorProps:{style:{backgroundColor:"white"}},sx:{"& .MuiTab-root":{color:"#a3a8b7"},"& .MuiTab-root.Mui-selected":{color:"white"}},children:[Object(k.jsx)(Ie.a,Object(o.a)({label:"Position"},Te(0))),Object(k.jsx)(Ie.a,Object(o.a)({label:"Limit Orders"},Te(1))),Object(k.jsx)(Ie.a,Object(o.a)({label:"Fills"},Te(2)))]})}),Object(k.jsx)(ze,{value:n,index:0,children:a?Object(k.jsx)(Me,{}):Object(k.jsx)(b.a,{sx:{color:"#a3a8b7"},children:"You don't have any opened position yet"})}),Object(k.jsx)(ze,{value:n,index:1,children:"Limit Orders"}),Object(k.jsx)(ze,{value:n,index:2,children:"Fills"})]})}var Ne=function(){return Object(k.jsxs)(d.a,{sx:{backgroundColor:"rgba(9, 9, 10, 1)",py:1,px:1,pb:"400px"},children:[Object(k.jsx)(Y,{}),Object(k.jsxs)(d.a,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"}},children:[Object(k.jsx)(d.a,{sx:{boxSizing:"border-box",flexGrow:"1",backgroundColor:"rgba(29, 29, 29, 1)",borderRadius:"10px",p:"12px"},children:Object(k.jsx)(Le,{})}),Object(k.jsxs)(d.a,{sx:{width:{xs:"100%",md:"360px"},boxSizing:"border-box",backgroundColor:"rgba(29, 29, 29, 1)",borderRadius:"10px",px:"12px",pb:"12px",ml:{md:1},mt:{xs:1,md:"0px"}},children:[Object(k.jsx)(A,{}),Object(k.jsx)(K,{}),Object(k.jsx)(Q,{}),Object(k.jsx)(we,{})]})]})]})},De=(n(637),n(130));var Be=function(){var e=Object(De.c)().enqueueSnackbar,t=Object(E.c)((function(e){return e.messages})),n=Object(E.b)();return Object(i.useEffect)((function(){t.message&&(e(JSON.stringify(t.message)),n(je()))}),[t.message]),Object(k.jsx)("div",{})};var Re=function(){return Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(M,{}),Object(k.jsx)(Ne,{}),Object(k.jsx)(Be,{})]})},Ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,743)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))},Ee=Object(Z.a)({reducer:{messages:Oe,positions:le},middleware:function(e){return e({serializableCheck:!1})}}),Ge=n(213),Ue=n.n(Ge),He=n(738),We=n(739),qe=n(740),Ve=n(727),Ye=n(729),_e=n(716),Je=n(385),$e=n.n(Je),Xe=n(384),Ke=n.n(Xe),Qe=n(206),Ze=n.n(Qe),et=n(383),tt=n.n(et),nt=n(381),rt=n.n(nt),ot=n(382),it=n.n(ot),at=n(380),ct=Object(_e.a)((function(){return{root:{"@media (min-width:600px)":{minWidth:"344px !important"}},card:{width:"100%"},error:{backgroundColor:"#d32f2f"},info:{backgroundColor:"#2979ff"},warning:{backgroundColor:"#ffa000"},success:{backgroundColor:"#43a047"},typography:{color:"#FFFFFF",fontFamily:"Montserrat SemiBold"},actionRoot:{padding:"8px 8px 8px 16px",justifyContent:"space-between",color:"#FFFFFF"},icons:{marginLeft:"auto"},expand:{padding:"8px 8px",transform:"rotate(0deg)",transition:"all .2s",color:"#FFFFFF"},expandOpen:{transform:"rotate(180deg)"},collapse:{padding:16},checkIcon:{fontSize:20,color:"#b3b3b3",paddingRight:4},checkIconCopy:{color:"#43a047"},button:{padding:0,textTransform:"none"},errorWrap:{marginTop:10},errorText:{whiteSpace:"pre-wrap",maxHeight:300,overflow:"auto",background:"rgba(0,0,0,0.1)",padding:5,borderRadius:5}}})),st=Object(i.forwardRef)((function(e,t){var n=ct(),r=Object(De.c)().closeSnackbar,o=Object(i.useState)(!1),a=Object(l.a)(o,2),c=a[0],s=a[1],u=Object(i.useState)(!1),d=Object(l.a)(u,2),x=d[0],j=d[1],O=Object(i.useCallback)((function(){s((function(e){return!e}))}),[]),h=Object(i.useCallback)((function(){r(e.id)}),[e.id,r]);return Object(k.jsx)(De.a,{ref:t,className:n.root,children:Object(k.jsxs)(He.a,{className:Ue()(n.card,n[e.message.severity]),children:[Object(k.jsxs)(We.a,{classes:{root:n.actionRoot},children:[function(e){switch(e){case"error":return Object(k.jsx)(rt.a,{color:"inherit"});case"info":return Object(k.jsx)(it.a,{color:"inherit"});case"success":return Object(k.jsx)(Ze.a,{color:"inherit"});case"warning":return Object(k.jsx)(tt.a,{color:"inherit"});default:return Object(k.jsx)("div",{})}}(e.message.severity),Object(k.jsx)(b.a,{variant:"subtitle2",className:n.typography,children:e.message.text}),Object(k.jsxs)("div",{className:n.icons,children:[e.message.error&&Object(k.jsx)(qe.a,{"aria-label":"Show more",className:Ue()(n.expand,Object(f.a)({},n.expandOpen,c)),onClick:O,children:Object(k.jsx)(Ke.a,{color:"inherit"})}),Object(k.jsx)(qe.a,{className:n.expand,onClick:h,children:Object(k.jsx)($e.a,{color:"inherit"})})]})]}),Object(k.jsx)(Ve.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(k.jsxs)(Ye.a,{className:n.collapse,children:[Object(k.jsx)(at.CopyToClipboard,{text:JSON.stringify(e.message.error),onCopy:function(){return j(!0)},children:Object(k.jsxs)(p.a,{size:"small",className:n.button,children:[Object(k.jsx)(Ze.a,{className:Ue()(n.checkIcon,Object(f.a)({},n.checkIconCopy,x))}),"Copy to clipboard"]})}),Object(k.jsxs)("div",{className:n.errorWrap,children:[Object(k.jsx)(b.a,{children:"Error message: "}),Object(k.jsx)(b.a,{className:n.errorText,children:JSON.stringify(e.message.error,null,2)})]})]})})]})})})),lt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=e.children;return t.reduceRight((function(e,t){var n=t.component||t,r=t.props||{};return Object(k.jsx)(n,Object(o.a)(Object(o.a)({},r),{},{children:e}))}),n)}}(R.Provider,q.Provider);s.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(De.b,{maxSnack:4,anchorOrigin:{vertical:"bottom",horizontal:"right"},content:function(e,t){return Object(k.jsx)(st,{id:e,message:JSON.parse(t)})},autoHideDuration:1e4,children:Object(k.jsx)(E.a,{store:Ee,children:Object(k.jsx)(S,{children:Object(k.jsx)(lt,{children:Object(k.jsx)(Re,{})})})})})}),document.getElementById("root")),Ae()}},[[639,1,2]]]);
//# sourceMappingURL=main.97fea25a.chunk.js.map