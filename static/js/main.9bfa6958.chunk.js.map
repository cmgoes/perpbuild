{"version":3,"sources":["constants/blockchain.ts","hooks/web3Context.tsx","hooks/helpers/index.tsx","Header/index.tsx","container/trade/index.tsx","Pages/Trade/components/Sideswitcher.tsx","container/amm/index.tsx","Pages/Trade/components/Marketselector.tsx","Pages/Trade/components/PriceHeader.tsx","constants/number.ts","util/format.ts","hooks/useDebounce.ts","Pages/Trade/components/Collateral.tsx","Pages/Trade/components/Slippage.tsx","Pages/Trade/components/SendTransaction.tsx","Pages/Positions/index.tsx","Pages/Trade/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Networks","DEFAULD_NETWORK","OPTIMISM","Web3Context","React","createContext","useWeb3Context","web3Context","useContext","Error","onChainProvider","useMemo","Web3ContextProvider","children","useState","connected","setConnected","chainID","providerChainID","setProviderChainID","address","setAddress","uri","StaticJsonRpcProvider","provider","setProvider","Web3Modal","cacheProvider","providerOptions","walletconnect","package","WalletConnectProvider","options","rpc","web3Modal","hasCachedProvider","cachedProvider","_initListeners","useCallback","rawProvider","on","setTimeout","window","location","reload","chain","changeNetwork","_newNetwork","oldNetwork","otherChainID","network","Number","connect","connectedProvider","Web3Provider","getNetwork","then","chainId","getSigner","getAddress","connectedAddress","disconnect","clearCachedProvider","Provider","value","ConnectMenu","web3","checkWrongNetwork","isConnected","buttonText","clickFunc","useEffect","AppBar","position","sx","backgroundColor","backgroundImage","py","px","borderBottom","Box","flexGrow","justifyContent","alignItems","ml","xs","md","display","Typography","variant","fontWeight","textAlign","color","Button","cursor","fontSize","onClick","pr","Trade","createContainer","PositionSide","LONG","side","setPositionSide","Big","slippage","setSlippage","collateral","setCollateral","PerpetualProtocol","SupportedChainIds","providerConfigs","rpcUrl","perpetualObject","setPerpetualObject","SideSwitcher","useContainer","handleLongOnClick","handleShortOnClick","SHORT","ButtonGroup","size","border","width","AMM","marketticker","setMarketTicker","MarketSelector","open","setOpen","FormControl","m","InputLabel","shrink","left","Select","labelId","id","defaultValue","onClose","onOpen","label","onChange","event","target","map","market","MenuItem","PriceHeader","flexDirection","sm","borderRadius","mb","borderLeft","pl","xl","RegExp","formatInput","input","digits","firstDotIndex","indexOf","formattedString","split","filter","alphabet","index","join","includes","length","substr","useDebounce","delay","onBeforeDebounce","onAfterDebounce","debouncedValue","setDebouncedValue","handler","clearTimeout","Collateral","_collateral","_setCollateral","debouncedCollateral","handleOnInput","e","formattedValue","b_debouncedCollateral","eq","my","TextField","type","placeholder","InputLabelProps","InputProps","endAdornment","InputAdornment","borderColor","borderWidth","Slippage","_slippage","_setSlippage","debouncedSlippage","b_debouncedSlippage","SendTransaction","_newPositionDraft","oppositeAmount","setOppositeAmount","entryPrice","setEntryPrice","tradingFee","setTradingFee","priceImpact","setPriceImpact","setPositionOpen","newPositionDraft","setNewPositionDraft","tickerSymbol","amountInput","outputSymbol","substring","init","signer","clearingHouse","createPositionDraft","isAmountInputBase","console","getPriceImpact","log","getEntryPrice","toFixed","getTransactionFee","getOppositeAmountBound","oppositeAmountBound","BeforeAll","handleClose","positions","getTakerPositionByTickerSymbol","undefined","closePosition","mt","disabled","mx","pb","paddingY","opacity","openPosition","TabPanel","props","other","role","hidden","a11yProps","Positions","setValue","openPrice","setOpenPrice","liquidationPrice","setLiquidationPrice","marginRatio","setMarginRatio","leverage","setLeverage","hasconnected","hasConnected","getPositionInfo","_openPrice","_liquidationPrice","getAccountMarginRatio","_marginRatio","getAccountLeverage","_leverage","Tabs","newValue","textColor","TabIndicatorProps","style","Tab","maxWidth","boxSizing","p","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Providers","providers","reduceRight","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9bfa6958.chunk.js","sourcesContent":["export const TOKEN_DECIMALS = 9;\r\n\r\nexport enum Networks {\r\n    // AVAX = 43114,\r\n    OPTIMISM = 10, // for mainnet\r\n    OPTIMISM_GOERLI = 420, // for optimism goerli\r\n}\r\n\r\nexport const DEFAULD_NETWORK = Networks.OPTIMISM;\r\n// export const DEFAULD_NETWORK = Networks.OPTIMISM_GOERLI;\r\n","import React, { useState, ReactElement, useContext, useMemo, useCallback } from \"react\";\r\nimport Web3Modal from \"web3modal\";\r\nimport { StaticJsonRpcProvider, JsonRpcProvider, Web3Provider } from \"@ethersproject/providers\";\r\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\r\nimport { getMainnetURI } from \"./helpers\";\r\n// import { DEFAULD_NETWORK } from \"../constants\";\r\nimport { Networks, DEFAULD_NETWORK } from \"../constants/blockchain\";\r\n// import { messages } from \"../../constants/messages\";\r\n// import { useDispatch } from \"react-redux\";\r\n// import { swithNetwork } from \"../helpers/switch-network\";\r\n\r\ntype onChainProvider = {\r\n    connect: () => Promise<Web3Provider>;\r\n    disconnect: () => void;\r\n    checkWrongNetwork: () => Promise<boolean>;\r\n    provider: JsonRpcProvider;\r\n    address: string;\r\n    connected: Boolean;\r\n    web3Modal: Web3Modal;\r\n    chainID: number;\r\n    web3?: any;\r\n    providerChainID: number;\r\n    hasCachedProvider: () => boolean;\r\n};\r\n\r\nexport type Web3ContextData = {\r\n    onChainProvider: onChainProvider;\r\n} | null;\r\n\r\nconst Web3Context = React.createContext<Web3ContextData>(null);\r\n\r\nexport const useWeb3Context = () => {\r\n    const web3Context = useContext(Web3Context);\r\n    if (!web3Context) {\r\n        throw new Error(\"useWeb3Context() can only be used inside of <Web3ContextProvider />, \" + \"please declare it at a higher level.\");\r\n    }\r\n    const { onChainProvider } = web3Context;\r\n    return useMemo(() => {\r\n        return { ...onChainProvider };\r\n    }, [web3Context]);\r\n};\r\n\r\nexport const useAddress = () => {\r\n    const { address } = useWeb3Context();\r\n    return address;\r\n};\r\n\r\nexport const Web3ContextProvider: React.FC<{ children: ReactElement }> = ({ children }) => {\r\n    // const dispatch = useDispatch();\r\n\r\n    const [connected, setConnected] = useState(false);\r\n    const [chainID, setChainID] = useState(DEFAULD_NETWORK);\r\n    const [providerChainID, setProviderChainID] = useState(DEFAULD_NETWORK);\r\n    const [address, setAddress] = useState(\"\");\r\n\r\n    const [uri, setUri] = useState(getMainnetURI());\r\n    const [provider, setProvider] = useState<JsonRpcProvider>(new StaticJsonRpcProvider(uri));\r\n\r\n    const [web3Modal] = useState<Web3Modal>(\r\n        new Web3Modal({\r\n            cacheProvider: true,\r\n            providerOptions: {\r\n                walletconnect: {\r\n                    package: WalletConnectProvider,\r\n                    options: {\r\n                        rpc: {\r\n                            [Networks.OPTIMISM]: getMainnetURI(),\r\n                            // [Networks.OPTIMISM_GOERLI]: getMainnetURI(),\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n    );\r\n\r\n    const hasCachedProvider = (): boolean => {\r\n        if (!web3Modal) return false;\r\n        if (!web3Modal.cachedProvider) return false;\r\n        return true;\r\n    };\r\n\r\n    const _initListeners = useCallback(\r\n        (rawProvider: JsonRpcProvider) => {\r\n            if (!rawProvider.on) {\r\n                return;\r\n            }\r\n\r\n            rawProvider.on(\"accountsChanged\", () => setTimeout(() => window.location.reload(), 1));\r\n\r\n            rawProvider.on(\"chainChanged\", async (chain: number) => {\r\n                changeNetwork(chain);\r\n            });\r\n\r\n            rawProvider.on(\"network\", (_newNetwork, oldNetwork) => {\r\n                if (!oldNetwork) return;\r\n                window.location.reload();\r\n            });\r\n        },\r\n        [provider],\r\n    );\r\n\r\n    const changeNetwork = async (otherChainID: number) => {\r\n        const network = Number(otherChainID);\r\n\r\n        setProviderChainID(network);\r\n    };\r\n\r\n    const connect = useCallback(async () => {\r\n        const rawProvider = await web3Modal.connect();\r\n\r\n        _initListeners(rawProvider);\r\n\r\n        const connectedProvider = new Web3Provider(rawProvider, \"any\");\r\n\r\n        const chainId = await connectedProvider.getNetwork().then(network => Number(network.chainId));\r\n        const connectedAddress = await connectedProvider.getSigner().getAddress();\r\n\r\n        setAddress(connectedAddress);\r\n\r\n        setProviderChainID(chainId);\r\n\r\n        if (chainId === Networks.OPTIMISM) {\r\n            setProvider(connectedProvider);\r\n        }\r\n        // if (chainId === Networks.OPTIMISM_GOERLI) {\r\n        //     setProvider(connectedProvider);\r\n        // }\r\n\r\n        setConnected(true);\r\n\r\n        return connectedProvider;\r\n    }, [provider, web3Modal, connected]);\r\n\r\n    // const checkWrongNetwork = async (): Promise<boolean> => {\r\n    //     if (providerChainID !== DEFAULD_NETWORK) {\r\n    //         const shouldSwitch = window.confirm(messages.switch_to_avalanche);\r\n    //         if (shouldSwitch) {\r\n    //             await swithNetwork();\r\n    //             window.location.reload();\r\n    //         }\r\n    //         return true;\r\n    //     }\r\n\r\n    //     return false;\r\n    // };\r\n\r\n    const disconnect = useCallback(async () => {\r\n        web3Modal.clearCachedProvider();\r\n        setConnected(false);\r\n\r\n        setTimeout(() => {\r\n            window.location.reload();\r\n        }, 1);\r\n    }, [provider, web3Modal, connected]);\r\n\r\n    const onChainProvider = useMemo(\r\n        () => ({\r\n            connect,\r\n            disconnect,\r\n            hasCachedProvider,\r\n            provider,\r\n            connected,\r\n            address,\r\n            chainID,\r\n            web3Modal,\r\n            providerChainID,            \r\n        }),\r\n        [connect, disconnect, hasCachedProvider, provider, connected, address, chainID, web3Modal, providerChainID],\r\n    );\r\n    //@ts-ignore\r\n    return <Web3Context.Provider value={{ onChainProvider }}>{children}</Web3Context.Provider>;\r\n};\r\n","export const getMainnetURI = (): string => {\r\n  return \"https://mainnet.optimism.io\";  \r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport {\r\n    AppBar,\r\n    Box,\r\n    Button,       \r\n    Typography,\r\n  } from \"@mui/material\";\r\nimport { useWeb3Context } from \"../hooks/web3Context\";\r\nimport { DEFAULD_NETWORK } from \"../constants/blockchain\";\r\nimport { PerpetualProtocol, PositionSide, SupportedChainIds, Wallet, big2BigNumberAndScaleUp, getTransaction } from \"@perp/sdk-curie\";\r\nimport Big from \"big.js\"\r\nimport ContractName from \"@perp/sdk-curie\";\r\nimport { constants } from \"ethers\";\r\nimport WalletIcon from '@mui/icons-material/Wallet';\r\n\r\nfunction ConnectMenu() {\r\n    const { connect, disconnect, connected, web3, address, provider, providerChainID, checkWrongNetwork } = useWeb3Context();    \r\n    const [isConnected, setConnected] = useState(connected);    \r\n    // const signer = provider.getSigner(\"0xE1995a6441B0e5443f5403A69e530a33249C4f2a\");\r\n\r\n    // const tickerSymbol = \"ETHUSD\"\r\n    // const slippage = new Big(0.02)            \r\n    // const amountInput = new Big(1)\r\n    // const side = PositionSide.LONG\r\n    // const isAmountInputBase = false\r\n\r\n    let buttonText = \"Connect\";\r\n    let clickFunc: any = connect;\r\n    let buttonStyle = {cursor: 'pointer'};\r\n\r\n    if (isConnected) {\r\n        buttonText = \"Disconnect\";\r\n        clickFunc = disconnect;\r\n    }    \r\n\r\n    if (isConnected && providerChainID !== DEFAULD_NETWORK) {\r\n        buttonText = \"Wrong network\";\r\n        // buttonStyle = { backgroundColor: \"rgb(255, 67, 67)\" };\r\n        clickFunc = () => {\r\n            checkWrongNetwork();\r\n        };\r\n    }\r\n\r\n    useEffect(() => {\r\n        setConnected(connected);\r\n    }, [web3, connected]);\r\n\r\n    // useEffect(() => {        \r\n    //     async function BeforeAll() {\r\n    //         if( isConnected && providerChainID === DEFAULD_NETWORK ) {\r\n    //             const perp =  new PerpetualProtocol({\r\n    //                 // chainId: SupportedChainIds.OPTIMISM_GOERLI,\r\n    //                 chainId: SupportedChainIds.OPTIMISM,   \r\n    //                 // chainId: 420,                 \r\n    //                 providerConfigs: [\r\n    //                     {\r\n    //                         rpcUrl: \"https://mainnet.optimism.io\",\r\n    //                         // rpcUrl: \"https://goerli.optimism.io/\",\r\n                            \r\n    //                     },\r\n    //                 ],\r\n    //             });\r\n                                \r\n    //             console.log(\"ChainId\", SupportedChainIds.OPTIMISM);\r\n    //             const result =await perp.init();\r\n    //             const perpconnect = await perp.connect({ signer: provider.getSigner() })\r\n    //             const newPositionDraft = perp.clearingHouse?.createPositionDraft({\r\n    //                 tickerSymbol,\r\n    //                 side,\r\n    //                 amountInput,\r\n    //                 isAmountInputBase,\r\n    //             }) \r\n    //             // console.log(\"Init perp\", result);                \r\n    //             console.log(\"Perp connected\", perp.hasConnected());\r\n    //             console.log(\"Perp initialized\", perp.hasInitialized());\r\n    //             console.log(\"Perp metadata\", perp.metadata);\r\n    //             console.log(\"Perp wallet\", perp.wallet);\r\n    //             console.log(\"Perp vault\", perp.vault);\r\n    //             console.log(\"Perp market\", perp.markets);\r\n    //             console.log(\"Perp Positions\", perp.positions);\r\n\r\n    //             const accountvalue = perp.clearingHouse?.getAccountValue();\r\n    //             console.log(\"Account Value\", accountvalue);\r\n\r\n    //             // console.log(\"Connect perp\", perpconnect);\r\n    //             // const openpos = perp.clearingHouse?.openPosition(newPositionDraft!, slippage);  \r\n    //             const oppositeAmountBound = await newPositionDraft?.getOppositeAmountBound(slippage)          \r\n    //             console.log(\"Position Draft\", newPositionDraft);\r\n    //             // console.log(\"Opened position\", openpos);\r\n    //             // console.log(\"opposite position\", oppositeAmountBound);\r\n    //             // const accountValue = await perp.contractReader.getAccountValue(address); fetching account valance from clearing house\r\n    //             // console.log(\"Account Value\", accountValue);\r\n    //             const approveOpenPosition = await perp.delegateApproval?.delegateApprovalForOpenPosition();\r\n    //             console.log(\"Approve OpenPosition\", approveOpenPosition);\r\n    //             const position = await perp.positions?.getTakerPositionByTickerSymbol(tickerSymbol);\r\n    //             console.log(\"Close perp\", position);\r\n    //             await perp.clearingHouse?.closePosition(position!, slippage)\r\n                \r\n    //         }\r\n    //     }\r\n    //     BeforeAll();\r\n            \r\n    // }, [isConnected, providerChainID]);  \r\n\r\n    return (\r\n        <AppBar\r\n            position=\"static\"\r\n            sx={{\r\n                backgroundColor: 'rgba(9, 9, 10, 1)',\r\n                backgroundImage: \"none\",\r\n                py: 2,\r\n                px: 2,\r\n                borderBottom: '1px solid rgba(255, 255, 255, 0.16)'\r\n            }}\r\n        >\r\n            \r\n            <Box\r\n                flexGrow={1}          \r\n                justifyContent=\"space-between\"         \r\n                alignItems=\"center\" \r\n                sx={{ ml: { xs: \"20px\", md: \"60px\" }, display: \"flex\"                        \r\n                }}\r\n            >\r\n                <Typography\r\n                    variant=\"h4\"\r\n                    fontWeight=\"700\"\r\n                    textAlign=\"center\"\r\n                    color=\"white\"                        \r\n                >\r\n                    Perp V2\r\n                </Typography>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    sx={{\r\n                        cursor: 'pointer', backgroundColor: 'transparent', \r\n                        color: 'rgba(101, 230, 255, 1)', fontSize: '16px',                            \r\n                        '&:hover': {backgroundColor: 'rgba(101, 239, 255, 0.12)'}\r\n                    }}\r\n                    onClick={clickFunc}\r\n                >\r\n                    <WalletIcon sx={{color: 'rgba(101, 230, 255, 1)', pr: 1}}/>\r\n                    {buttonText}\r\n                </Button>\r\n\r\n                {/* // <div className=\"connect-button\" style={buttonStyle} onClick={clickFunc}>\r\n                //     <p>{buttonText}</p>   \r\n                //     {isConnected === true && <p>SDK curie</p>}         \r\n                // </div> */}\r\n            </Box>            \r\n        </AppBar>\r\n    );\r\n}\r\n\r\nexport default ConnectMenu;\r\n","import { useMemo, useState } from \"react\"\nimport { createContainer } from \"unstated-next\"\nimport { PerpetualProtocol, PositionSide, SupportedChainIds } from \"@perp/sdk-curie\";\nimport Big from \"big.js\"\n\nexport const Trade = createContainer(useTrade)\n\nfunction useTrade() {\n    /* long = 1, short = 0 */\n    const [side, setPositionSide] = useState<PositionSide>(PositionSide.LONG);\n\n    /* min: 1, max: 10 */\n    // const [leverage, setLeverage] = useState<number>(1)\n\n    /* min: 0% */\n    const [slippage, setSlippage] = useState<Big>(new Big(0.02));\n\n    const [collateral, setCollateral] = useState<Big>(new Big(0));\n\n    const [perpetualObject, setPerpetualObject] = useState<PerpetualProtocol>(new PerpetualProtocol({\n\t\t// chainId: SupportedChainIds.OPTIMISM_GOERLI,\n\t\tchainId: SupportedChainIds.OPTIMISM,   \n\t\t// chainId: 420,                 \n\t\tproviderConfigs: [\n\t\t\t{\n\t\t\t\trpcUrl: \"https://mainnet.optimism.io\",\n\t\t\t\t// rpcUrl: \"https://goerli.optimism.io/\",\t\t\t\t\t\t\t\t\n\t\t\t},\n\t\t],\n\t}));\n\n    return useMemo(\n        () => ({\n            side,\n            setPositionSide,            \n            slippage,\n            setSlippage,\n            collateral,\n            setCollateral,\n            perpetualObject,\n            setPerpetualObject\n        }),\n        [side, slippage, collateral],\n    )\n}\n","import {useState, useCallback, useEffect} from \"react\";\n\nimport {\n\tAppBar,\n\tBox,\n\tButtonGroup,\n\tButton,\n\tContainer,    \n\tTypography,\n} from \"@mui/material\";\n\nimport { PositionSide } from \"@perp/sdk-curie\";\nimport {Trade} from '../../../container/trade';\n\n\nfunction SideSwitcher() {\n\tconst {side, setPositionSide} = Trade.useContainer();\t\n\tconst handleLongOnClick = useCallback(() => {\n\t\tif (side !== PositionSide.LONG) {\n\t\t\tsetPositionSide(PositionSide.LONG);\t\t\t\n\t\t}\t\t\n\t}, [side])\n\n\tconst handleShortOnClick = useCallback(() => {\n\t\tif (side !== PositionSide.SHORT) {\n\t\t\tsetPositionSide(PositionSide.SHORT);\t\t\t\n\t\t}\t\t\t\t\n\t}, [side])\t\n\n\treturn (\n\t\t<ButtonGroup size=\"large\" sx={{py: '12px', border: 'none', width: '100%'}}>\n\t\t\t<Button \n\t\t\t\tsx={{\n\t\t\t\t\twidth: '50%',\t\t\t\t\t\n\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\tbackgroundColor: \n\t\t\t\t\t\tside === PositionSide.LONG? '#52c41a' : 'gray',\n\t\t\t\t\tcolor: \n\t\t\t\t\t\tside === PositionSide.LONG? 'white' : 'black',\n\t\t\t\t\tborder: '1px solid transparent',\n\t\t\t\t\t'&: hover': {\n\t\t\t\t\t\tbackgroundColor: '#49bc10',\t\n\t\t\t\t\t\tborder: '1px solid transparent'\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t}}\n\t\t\t\tonClick={handleLongOnClick}\n\t\t\t>\n\t\t\t\tLong\n\t\t\t</Button>\n\t\t\t<Button \n\t\t\t\tsx={{\n\t\t\t\t\twidth: '50%',\t\t\t\t\t\n\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\tbackgroundColor: \n\t\t\t\t\t\tside === PositionSide.SHORT? '#fa672d' : 'gray',\n\t\t\t\t\tcolor: \n\t\t\t\t\t\tside === PositionSide.SHORT? 'white' : 'black',\n\t\t\t\t\tborder: '1px solid transparent',\n\t\t\t\t\t'&: hover': {\n\t\t\t\t\t\tbackgroundColor: '#f85819',\t\n\t\t\t\t\t\tborder: '1px solid transparent'\t\t\t\t\t\n\t\t\t\t\t}\t\t\n\t\t\t\t}}\n\t\t\t\tonClick={handleShortOnClick}\n\t\t\t>\n\t\t\t\tShort\n\t\t\t</Button>\t\t\t\n\t\t</ButtonGroup>\n\n\t\t\n\t)\n}\n\nexport default SideSwitcher;","import { useMemo, useState } from \"react\"\nimport { createContainer } from \"unstated-next\"\n\nexport const AMM = createContainer(useAMM)\n\nfunction useAMM() {    \n    const [marketticker, setMarketTicker] = useState<string>('ETHUSD');   \n\n    return useMemo(\n        () => ({\n            marketticker,\n            setMarketTicker\n        }),\n        [marketticker, setMarketTicker],\n    )\n}\n","import React, { useEffect } from \"react\"\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Box from '@mui/material/Box';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport {AMM} from \"../../../container/amm\";\n\nfunction MarketSelector() {\n\tconst MarketList = [\"ETHUSD\", \"BNBUSD\", \"AVAXUSD\"];  \t\n\n\tconst {marketticker, setMarketTicker} = AMM.useContainer();\n\tconst [open, setOpen] = React.useState(false);\n\n  const handleChange = (event: SelectChangeEvent<typeof marketticker>) => {\n    setMarketTicker(event.target.value);\t\t\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  return (\n    <>      \n      <FormControl variant=\"standard\" sx={{ m: 1, width: '300px' }}>\n        <InputLabel size=\"small\" shrink sx={{\n          left: '120px',\n          color: 'rgba(145, 153, 167, 1)', \n          '&.Mui-focused': {color: 'rgba(145, 153, 167, 1)'}\n        }}>\n          Market\n        </InputLabel>\n        <Select\n          labelId=\"demo-controlled-open-select-label\"\n          id=\"demo-controlled-open-select\"\n          open={open}\n          defaultValue={\"ETHUSD\"}\n          onClose={handleClose}\n          onOpen={handleOpen}        \n          label=\"Market\"\n          onChange={handleChange}\n          sx={{'&:hover:not(.Mui-disabled):before': {borderBottom: 'none'},\n            '& > svg': {color: 'white'},\n            '& ul': {backgroundColor: 'rgba(9, 9, 10, 1)'},\n            '&::before': {border: 'none'}, color: 'white',\n            '&::after': {borderBottom: 'none'}\n          }}          \n        >          \n\t\t\t\t\t{MarketList.map((market) => (\n\t\t\t\t\t\t<MenuItem key={market} value={market} sx={{color: 'black'}}>{market}</MenuItem>\t\n\t\t\t\t\t))}\n        </Select>\n      </FormControl>\n    </>\n  );\n}\n\nexport default MarketSelector\n","import {useState, useCallback, useEffect} from \"react\";\n\nimport {\n\tAppBar,\n\tBox,\n\tButtonGroup,\n\tButton,\n\tContainer,    \n\tTypography,\n} from \"@mui/material\";\n\nimport MarketSelector from \"./Marketselector\";\n\nfunction PriceHeader() {\n\treturn (\n\t\t<Box sx={{display: 'flex', justifyContent: 'flex-start', alignItems: 'center', \n\t\t\tbackgroundColor: 'rgba(29, 29, 29, 1)',\n\t\t\tflexDirection: {xs: 'column', sm: 'row'},\n\t\t\tborderRadius: '10px',\n\t\t\tpy: '4px',\n\t\t\tmb: 1\t\t\t\n\t\t}}>\n\t\t\t<MarketSelector />\n\t\t\t<Box sx={{display: 'flex', justifyContent: 'flex-start',\n\t\t\t\tborderLeft: {sm: '1px solid rgba(145, 153, 167, 0.8)'},\n\t\t\t\tpl: {sm: 2, md: 3, xl: 4},\n\t\t\t\tpy: 1\n\t\t\t}}>\n\t\t\t\t<Box sx={{pr: {xs: 2, md: 3, xl: 4}}}>\n\t\t\t\t\t<Typography sx={{fontSize: '0.75rem', color: 'rgba(145, 153, 167, 1)'}}>Index Price</Typography>\n\t\t\t\t\t<Typography sx={{color: 'rgb(255, 255, 255)'}}>1266.0</Typography>\n\t\t\t\t</Box>\n\t\t\t\t<Box sx={{pr: {xs: 2, md: 3, xl: 4}}}>\n\t\t\t\t\t<Typography sx={{fontSize: '0.75rem', color: 'rgba(145, 153, 167, 1)'}}>Volume (24h)</Typography>\n\t\t\t\t\t<Typography sx={{color: 'rgb(255, 255, 255)'}}>5,798,410.3</Typography>\n\t\t\t\t</Box>\n\t\t\t\t<Box sx={{pr: {xs: 2, md: 3, xl: 4}}}>\n\t\t\t\t\t<Typography sx={{fontSize: '0.75rem', color: 'rgba(145, 153, 167, 1)'}}>Funding Rate (8h)</Typography>\n\t\t\t\t\t<Typography sx={{color: 'rgb(255, 255, 255)'}}>0.0071%</Typography>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Box>\n\t)\n}\n\nexport default PriceHeader;","import { Big } from \"big.js\"\nimport { BigNumber } from \"ethers\"\n\nexport const ERC20_DECIMAL_DIGITS = 18\nexport const USDC_DECIMAL_DIGITS = 6\n\nexport const USDC_PRECISION = 2\nexport const Slippage_PRECISION = 2\n\nexport const BIG_ZERO = new Big(0)\n\nexport interface Decimal {\n    d: BigNumber\n}\n","import { ERC20_DECIMAL_DIGITS, USDC_PRECISION } from \"../constants/number\"\n\nimport Big from \"big.js\"\nimport { BigNumber } from \"ethers\"\nimport { formatUnits } from \"ethers/lib/utils\"\n\nexport interface Decimal {\n    d: BigNumber\n}\n\n// Big Number to...\nexport function bigNum2FixedStr(\n    val: BigNumber,\n    decimals: number = ERC20_DECIMAL_DIGITS,\n    digits: number = USDC_PRECISION,\n): string {\n    return Number.parseFloat(formatUnits(val, decimals)).toFixed(digits)\n}\n\nexport function bigNum2Big(val: BigNumber, decimals: number = ERC20_DECIMAL_DIGITS): Big {\n    return new Big(val.toString()).div(new Big(10).pow(decimals))\n}\n\nexport function bigNum2Decimal(val: BigNumber): Decimal {\n    return { d: val }\n}\n\n// Big to...\nexport function big2BigNum(val: Big, decimals: number = ERC20_DECIMAL_DIGITS): BigNumber {\n    return BigNumber.from(val.mul(new Big(10).pow(decimals)).toFixed(0))\n}\n\nexport function big2Decimal(val: Big): Decimal {\n    return {\n        d: big2BigNum(val, ERC20_DECIMAL_DIGITS),\n    }\n}\n\n// Decimal to...\nexport function decimal2Big(decimal: Decimal): Big {\n    return bigNum2Big(decimal.d)\n}\n\n// check regex 101 online, https://regex101.com/r/EeneAE/1\n// to understand this regex\nconst regexUSLocaleNumber = new RegExp(/\\d(?=(\\d{3})+\\.)/g)\n\n// format number like 1000 => 1,000\nexport function numberWithCommas(number: string = \"\") {\n    return number.replace(regexUSLocaleNumber, \"$&,\")\n}\n\nexport function numberWithCommasUsdc(number: Big = new Big(0)) {\n    return numberWithCommas(number.toFixed(USDC_PRECISION))\n}\n\n// TODO: check is valid number\n// TODO: check is positive\n// TODO: use in slippage if possible\n// ex: if the input is 1.005 and the digits is 2, the function will return 1.00\nexport function formatInput(input: string, digits: number): string {\n    const firstDotIndex = input.indexOf(\".\")\n    const formattedString = input\n        .split(\"\")\n        .filter((alphabet, index) => {\n            return alphabet !== \".\" || index === firstDotIndex\n        })\n        .join(\"\")\n    return formattedString.includes(\".\") && formattedString.length > formattedString.indexOf(\".\") + (digits + 1)\n        ? formattedString.substr(0, formattedString.indexOf(\".\") + (digits + 1))\n        : formattedString\n}\n","import { useEffect, useState } from \"react\"\n\nconst DEFAULT_DELAY = 200\n\ninterface DebounceArgs<T> {\n    value: T\n    delay?: number\n    onBeforeDebounce?: Function\n    onAfterDebounce?: Function\n}\n\nexport function useDebounce<T>({ value, delay = DEFAULT_DELAY, onBeforeDebounce, onAfterDebounce }: DebounceArgs<T>) {\n    const [debouncedValue, setDebouncedValue] = useState<T>(value)\n\n    useEffect(() => {\n        if (onBeforeDebounce) {\n            onBeforeDebounce(value)\n        }\n\n        const handler = setTimeout(() => {\n            setDebouncedValue(value)\n            if (onAfterDebounce) {\n                onAfterDebounce(value)\n            }\n        }, delay)\n\n        return () => {\n            clearTimeout(handler)\n        }\n    }, [value, delay, onBeforeDebounce, onAfterDebounce])\n\n    return debouncedValue\n}\n","import {useState, useMemo, useCallback, useEffect} from \"react\";\n\nimport {\t\n\tBox,\t\t \n\tTextField,\n\tInputAdornment\t\n} from \"@mui/material\";\n\nimport Big from \"big.js\"\n\nimport {Trade} from '../../../container/trade';\nimport { USDC_PRECISION } from \"../../../constants/number\";\nimport { formatInput } from \"../../../util/format\"\n\nimport { useDebounce } from \"../../../hooks/useDebounce\"\n\nfunction Collateral() {\n\tconst {collateral, setCollateral} = Trade.useContainer();\t\n\tconst [_collateral, _setCollateral] = useState<string>(\"\");\t\n\n\tconst debouncedCollateral = useDebounce({ value: _collateral, delay: 800 });\n\t\n\tconst handleOnInput = useCallback(\n\t\te => {\n\t\t\tconst value = e.target.value;\n\t\t\tif (value >= 0) {\n\t\t\t\tconst formattedValue = formatInput(value, USDC_PRECISION);\n\t\t\t\t_setCollateral(formattedValue);\n\t\t\t}\n\t\t},\n\t\t[_setCollateral],\n\t)\n\n\tuseEffect(() => {\n\t\t/* reset collateral to null */\n\t\tif (debouncedCollateral === \"\") {\n\t\t\t// setCollateral(null);\n\t\t\treturn;\n\t\t}\n\t\t/* detect if the value is different */\n\t\tconst b_debouncedCollateral = new Big(debouncedCollateral);\n\t\tif (!collateral?.eq(b_debouncedCollateral)) {\n\t\t\tsetCollateral(b_debouncedCollateral);\n\t\t}\n\t}, [collateral, debouncedCollateral, setCollateral]);\n\t\n\n\treturn useMemo(\n\t\t() => (\n\t\t<Box sx={{my: 2}}>\n\t\t\t<TextField\n\t\t\t\tid=\"outlined-name\"\n\t\t\t\tlabel=\"Collateral\"\n\t\t\t\ttype=\"number\"\n\t\t\t\tvalue={_collateral}\n\t\t\t\tplaceholder=\"0\"\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\t\t\t\t\n\t\t\t\tInputProps={{\n\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">USDC</InputAdornment>,\n\t\t\t\t}}\n\t\t\t\tonChange={handleOnInput}\n\t\t\t\tsx={{width: '100%',\n\t\t\t\t\t'& > label, & .MuiFormLabel-root.Mui-focused': {color: '#a3a8b7'},\n\t\t\t\t\t'& > div': {color: 'white'},\n\t\t\t\t\t'& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7',\n\t\t\t\t\t\tborderWidth: '1px'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiTypography-root': {color: '#a3a8b7'},\n\t\t\t\t\t'& fieldset.MuiOutlinedInput-notchedOutline': {borderColor: 'rgba(255, 255, 255, 0.16)'}\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Box>\t\t\n\t\t), [_collateral, handleOnInput]\n\t)\n}\n\nexport default Collateral;","import {useState, useMemo, useCallback, useEffect} from \"react\";\n\nimport {\t\n\tBox,\t\t \n\tTextField,\n\tInputAdornment\t\n} from \"@mui/material\";\n\nimport Big from \"big.js\"\n\nimport {Trade} from '../../../container/trade';\nimport { Slippage_PRECISION } from \"../../../constants/number\";\nimport { formatInput } from \"../../../util/format\"\n\nimport { useDebounce } from \"../../../hooks/useDebounce\"\n\nfunction Slippage() {\n\tconst {slippage, setSlippage} = Trade.useContainer();\t\n\tconst [_slippage, _setSlippage] = useState<string>(\"\");\t\n\n\tconst debouncedSlippage = useDebounce({ value: _slippage, delay: 800 });\n\t\n\tconst handleOnInput = useCallback(\n\t\te => {\n\t\t\tconst value = e.target.value;\n\t\t\tif (value >= 0) {\n\t\t\t\tconst formattedValue = formatInput(value, Slippage_PRECISION);\n\t\t\t\t_setSlippage(formattedValue);\n\t\t\t}\n\t\t},\n\t\t[_setSlippage],\n\t)\n\n\tuseEffect(() => {\n\t\t/* reset collateral to null */\n\t\tif (debouncedSlippage === \"\") {\n\t\t\t// setSlippage(null);\n\t\t\treturn;\n\t\t}\n\t\t/* detect if the value is different */\n\t\tconst b_debouncedSlippage = new Big(debouncedSlippage);\n\t\tif (!slippage?.eq(b_debouncedSlippage)) {\n\t\t\tsetSlippage(b_debouncedSlippage);\n\t\t}\n\t}, [slippage, debouncedSlippage, setSlippage]);\n\t\n\n\treturn useMemo(\n\t\t() => (\n\t\t<Box sx={{my: 2}}>\n\t\t\t<TextField\n\t\t\t\tid=\"outlined-name\"\n\t\t\t\tlabel=\"Slippage\"\n\t\t\t\ttype=\"number\"\n\t\t\t\tvalue={_slippage}\n\t\t\t\tplaceholder=\"0.02\"\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\t\t\t\t\n\t\t\t\tInputProps={{\n\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">%</InputAdornment>,\n\t\t\t\t}}\n\t\t\t\tonChange={handleOnInput}\n\t\t\t\tsx={{width: '100%',\n\t\t\t\t\t'& > label, & .MuiFormLabel-root.Mui-focused': {color: '#a3a8b7'},\n\t\t\t\t\t'& > div': {color: 'white'},\n\t\t\t\t\t'& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7',\n\t\t\t\t\t\tborderWidth: '1px'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline': {\n\t\t\t\t\t\tborderColor: '#a3a8b7'\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\t'& .MuiTypography-root': {color: '#a3a8b7'},\n\t\t\t\t\t'& fieldset.MuiOutlinedInput-notchedOutline': {borderColor: 'rgba(255, 255, 255, 0.16)'}\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Box>\t\t\n\t\t), [_slippage, handleOnInput]\n\t)\n}\n\nexport default Slippage;","import {useState, useMemo, useCallback, useEffect} from \"react\";\n\nimport {\t\n\tBox,\t\t \n\tButton,\n\tTextField,\n\tTypography,\n\tInputAdornment\t\n} from \"@mui/material\";\n\nimport { useWeb3Context } from \"../../../hooks/web3Context\";\nimport {Trade} from '../../../container/trade';\nimport {AMM} from \"../../../container/amm\";\nimport { DEFAULD_NETWORK } from \"../../../constants/blockchain\";\nimport { PerpetualProtocol, PositionSide, SupportedChainIds, Wallet, big2BigNumberAndScaleUp, getTransaction, PositionDraft } from \"@perp/sdk-curie\";\n\nimport Big from \"big.js\";\n\nfunction SendTransaction() {\t\n\tconst { connected, web3, address, provider, providerChainID} = useWeb3Context();  \n\tconst [oppositeAmount, setOppositeAmount] = useState('');\n\tconst [entryPrice, setEntryPrice] = useState('');\n\tconst [tradingFee, setTradingFee] = useState('');\n\tconst [priceImpact, setPriceImpact] = useState('');\n\tconst [PositionOpen, setPositionOpen] = useState(false);\n\t// const [perpetualObject, setPerpetualObject] = useState<PerpetualProtocol>(new PerpetualProtocol({\n\t// \t// chainId: SupportedChainIds.OPTIMISM_GOERLI,\n\t// \tchainId: SupportedChainIds.OPTIMISM,   \n\t// \t// chainId: 420,                 \n\t// \tproviderConfigs: [\n\t// \t\t{\n\t// \t\t\trpcUrl: \"https://mainnet.optimism.io\",\n\t// \t\t\t// rpcUrl: \"https://goerli.optimism.io/\",\t\t\t\t\t\t\t\t\n\t// \t\t},\n\t// \t],\n\t// }));\n\tconst {perpetualObject} = Trade.useContainer();\n\tconst [newPositionDraft, setNewPositionDraft] = useState<PositionDraft<string> | undefined>();\n\t\n\tlet perp: PerpetualProtocol;\n\tlet _newPositionDraft: PositionDraft<string> | undefined\n\n\tconst {side} = Trade.useContainer();\n\tconst {marketticker} = AMM.useContainer();\n\tconst {collateral} = Trade.useContainer();\n\tconst {slippage} = Trade.useContainer();\n\tconst isAmountInputBase = false;\n\tlet tickerSymbol = marketticker;\n  \tlet amountInput = collateral;\t\t\n\tconst spender = \"0xAD7b4C162707E0B2b5f6fdDbD3f8538A5fbA0d60\";\n\tconst outputSymbol = marketticker.substring(0, marketticker.length - 3);\n\n\tuseEffect(() => {        \n\t\tasync function BeforeAll() {\n\t\t\tif( connected && providerChainID === DEFAULD_NETWORK ) {\t\t\t\t\n\t\t\t\tawait perpetualObject.init();\n\t\t\t\tawait perpetualObject.connect({ signer: provider.getSigner() });\n\t\t\t\t// const accountValue = await perp.contractReader.getNativeBalance(address); \n\t\t\t\t// console.log(\"Account Native value\", accountValue);\n\t\t\t\t// const VaultBalance = await perp.contractReader.getVaultBalanceOfSettlementToken(address); \n\t\t\t\t// console.log(\"Account Vault value\", VaultBalance);\n\t\t\t\t// const Allowance = await perp.contractReader.getAllowanceOfSettlementToken(address, spender); \n\t\t\t\t// console.log(\"Allowance value\", Allowance);\n\t\t\t\t// const PositionAction = await perp.contractReader.getClearingHouseOpenPositionAction(); \n\t\t\t\t// console.log(\"Position Action\", PositionAction);\n\t\t\t\t_newPositionDraft = perpetualObject.clearingHouse?.createPositionDraft({\n\t\t\t\t\ttickerSymbol,\n\t\t\t\t\tside,\n\t\t\t\t\tamountInput,\n\t\t\t\t\tisAmountInputBase\n\t\t\t\t});\t\t\t\t\n\t\t\t\t\n\t\t\t\tsetNewPositionDraft(_newPositionDraft);\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tconsole.log(\"Price Impact\", await _newPositionDraft!.getPriceImpact());\n\t\t\t\tsetEntryPrice((await _newPositionDraft!.getEntryPrice()).toFixed(2));\n\t\t\t\tsetTradingFee((await _newPositionDraft!.getTransactionFee()).toFixed(8));\n\t\t\t\tsetPriceImpact((await _newPositionDraft!.getPriceImpact()).toFixed(5));\n\t\t\t\tconst oppositeAmountBound = await _newPositionDraft?.getOppositeAmountBound(slippage); \n\t\t\t\tsetOppositeAmount(oppositeAmountBound!.toFixed(7));\t\n\t\t\t\t// const position = await perpetualObject?.positions?.getTakerPositionByTickerSymbol(tickerSymbol);\n\t\t\t\t// console.log(\"Position num\", position);\n\t\t\t\t// const marginratio = await perpetualObject?.positions?.getAccountMarginRatio();\n\t\t\t\t// console.log(\"Margin Ratio\", marginratio);\n\t\t\t\t// perp.clearingHouse?.openPosition(newPositionDraft!, slippage);  \t\t\t\t\n\t\t\t}\n\t\t}\n\t\tBeforeAll();\n\t\t\t\t\n\t}, [connected, providerChainID, marketticker, side, collateral, slippage]); \n\n\tconst handleOpen = () => {\n\t\tperpetualObject?.clearingHouse?.openPosition(newPositionDraft!, slippage);    \n\t\tconsole.log(\"Perp openPosition\", newPositionDraft);\n  \t};\n\n\tconst handleClose = async () => {\n\t\tconst position = await perpetualObject?.positions?.getTakerPositionByTickerSymbol(tickerSymbol);\n\t\tif(position !== undefined) {\n\t\t\tsetPositionOpen(true);\n\t\t\tawait perpetualObject?.clearingHouse?.closePosition(position!, slippage) \n\t\t} else {\n\t\t\tsetPositionOpen(false)\n\t\t};\t\n  \t};\n\n\treturn (\n\t\t<Box sx={{mt: 2}}>\n\t\t\t<Box sx={{mb: 2}}>\n\t\t\t\t<TextField\n\t\t\t\t\tid=\"outlined-name\"\n\t\t\t\t\tlabel=\"Output\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tdisabled\n\t\t\t\t\tvalue={oppositeAmount}\n\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\t\t\t\t\n\t\t\t\t\tInputProps={{\t\t\t\t\t\t\n\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">{outputSymbol}</InputAdornment>,\n\t\t\t\t\t}}\n\t\t\t\t\tsx={{width: '100%',\n\t\t\t\t\t\t'& .MuiFormLabel-root.Mui-disabled, & .MuiFormLabel-root.Mui-focused, & .MuiTypography-root': {color: '#a3a8b7'},\n\t\t\t\t\t\t'& > div': {color: 'white'},\n\t\t\t\t\t\t'& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled': {color: '#a3a8b7'},\t\t\t\t\t\t\n\t\t\t\t\t\t'& .MuiInputBase-root > input': {'-webkit-text-fill-color': '#a3a8b7'},\n\t\t\t\t\t\t'& .MuiInputBase-root.MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline': {borderColor: 'rgba(255, 255, 255, 0.16)'}\t\t\t\t\t\t\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t\t<Typography sx={{mx: 'auto', py: 1, textAlign: 'left', color: 'white'}}>\n\t\t\t\tSummary\n\t\t\t</Typography>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Entry Price</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>${entryPrice}</Typography>\n\t\t\t</Box>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Trading Fee</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>${tradingFee}</Typography>\n\t\t\t</Box>\n\t\t\t<Box sx={{mx: 'auto', display: 'flex', justifyContent: 'space-between', pb: 1}}>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Price Impact</Typography>\n\t\t\t\t<Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>{priceImpact}%</Typography>\n\t\t\t</Box>\n\t\t\t<Button variant=\"contained\" \n\t\t\t\tdisabled={connected === false}\n\t\t\t\tsx={{width: '100%', paddingY: '12px', \n\t\t\t\t\tbackgroundColor: side === PositionSide.LONG? 'success.light': '#ef5350', \n\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\tmb: 2,\n\t\t\t\t\tmx: 'auto',\n\t\t\t\t\t'&: hover': {backgroundColor: side === PositionSide.LONG? 'success.main': '#f44336'},\n\t\t\t\t\t'&: disabled': {backgroundColor: side === PositionSide.LONG? 'success.light': '#ef5350', color: 'black', opacity: 0.8} \n\t\t\t\t}}\n\t\t\t\tonClick={handleOpen}\t\t\t\n\t\t\t>\n\t\t\t\tConfirm {side}\n\t\t\t</Button>\n\t\t\t<Button variant=\"contained\" \n\t\t\t\tdisabled={connected === false}\n\t\t\t\tsx={{width: '100%', paddingY: '12px', \n\t\t\t\t\tbackgroundColor: 'black', \n\t\t\t\t\t'&: hover': {backgroundColor: 'black', color: 'white'},\n\t\t\t\t\t'&: disabled': {backgroundColor: 'gray', color: 'black', opacity: 0.8} \n\t\t\t\t}}\n\t\t\t\tonClick={handleClose}\t\t\t\n\t\t\t>\n\t\t\t\tClose Position\n\t\t\t</Button>\n\t\t</Box>\n\t)\n}\n\nexport default SendTransaction;","import * as React from 'react';\nimport {useState, useMemo, useCallback, useEffect} from \"react\";\n\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport { useWeb3Context } from \"../../hooks/web3Context\";\nimport {Trade} from '../../container/trade';\nimport {AMM} from \"../../container/amm\";\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ py: 2 }}>\n          {children}\n        </Box>\n      )}\n    </div>\n  );\n}\n\nfunction a11yProps(index: number) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`,\n  };\n}\n\nexport default function Positions() {\n  const [value, setValue] = useState(0);\n  const [openPrice, setOpenPrice] = useState<string | undefined>('');\n  const [indexPrice_, setIndexPrice] = useState(0);\n  const [liquidationPrice, setLiquidationPrice] = useState<string | undefined>('');\n  const [marginRatio, setMarginRatio] = useState<string>('');\n  const [leverage, setLeverage] = useState<string | undefined>('');\n  const { connected } = useWeb3Context();  \n  const {perpetualObject} = Trade.useContainer();\n  const {marketticker} = AMM.useContainer();\n  let tickerSymbol = marketticker;\n\n  const hasconnected = perpetualObject.hasConnected();  \n\n  useEffect(() => {\n    const getPositionInfo = async() => {      \n      if(connected && hasconnected) {\n        const position = await perpetualObject?.positions?.getTakerPositionByTickerSymbol(tickerSymbol);\n        const _openPrice = position?.entryPrice.toFixed(2);\n        // const {indexPrice} = position?.market.getPrices({});\n        // console.log(\"Indexprice\", indexPrice);\n        const _liquidationPrice = position?.liquidationPrice; \n        setOpenPrice(_openPrice);\n        setLiquidationPrice(_liquidationPrice?.toFixed(1));\n        console.log(\"Position num\", position);\n        const _marginRatio = await perpetualObject?.positions?.getAccountMarginRatio();\n        const _leverage = await perpetualObject?.positions?.getAccountLeverage();\n        setMarginRatio((Number(_marginRatio?.toFixed(4))*100).toFixed(1));   \n        setLeverage(_leverage?.toFixed(2));     \n      }\n    }\n    getPositionInfo();    \n  }, [connected, hasconnected])\n\n  const handleChange = (event: React.SyntheticEvent, newValue: number) => {\n    setValue(newValue);\n  };\n\n  return (\n    <Box sx={{ width: '100%' }}>\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={value} onChange={handleChange} aria-label=\"basic tabs example\" textColor='primary'\n          TabIndicatorProps={{\n            style: {\n              backgroundColor: \"white\"              \n            }\n          }}\n            sx={{ \n              '& .MuiTab-root': {color: '#a3a8b7'},               \n              '& .MuiTab-root.Mui-selected': {color: 'white'}          \n            }}\n        >\n          <Tab label=\"Position\" {...a11yProps(0)} />\n          <Tab label=\"Limit Orders\" {...a11yProps(1)} />\n          <Tab label=\"Fills\" {...a11yProps(2)} />\n        </Tabs>\n      </Box>\n      <TabPanel value={value} index={0}>\n        <Box sx={{maxWidth: '360px'}}>\n          <Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n            <Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Avg. Open Price</Typography>\n            <Typography sx={{fontSize: '14px', color: 'white'}}>{openPrice}</Typography>\n          </Box>\n          <Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n            <Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Index Price</Typography>\n            <Typography sx={{fontSize: '14px', color: 'white'}}>Entry Price</Typography>\n          </Box>\n          <Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n            <Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Liquidation Price</Typography>\n            <Typography sx={{fontSize: '14px', color: 'white'}}>{liquidationPrice}</Typography>\n          </Box>\n          <Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n            <Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Margin Ratio</Typography>\n            <Typography sx={{fontSize: '14px', color: 'white'}}>{marginRatio}%</Typography>\n          </Box>\n          <Box sx={{display: 'flex', justifyContent: 'space-between', py: 1}}>\n            <Typography sx={{fontSize: '14px', color: '#a3a8b7'}}>Leverage</Typography>\n            <Typography sx={{fontSize: '14px', color: 'white'}}>{leverage}x</Typography>\n          </Box>\n        </Box>\n      </TabPanel>\n      <TabPanel value={value} index={1}>\n        Limit Orders\n      </TabPanel>\n      <TabPanel value={value} index={2}>\n        Fills\n      </TabPanel>\n    </Box>\n  );\n}","import {useState, useEffect} from \"react\";\n\nimport {\n\tAppBar,\n\tBox,\n\tButton,\n\tContainer,    \n\tTypography,\n} from \"@mui/material\";\n\nimport SideSwitcher from \"./components/Sideswitcher\";\nimport PriceHeader from \"./components/PriceHeader\";\nimport Collateral from \"./components/Collateral\";\nimport Slippage from \"./components/Slippage\";\nimport SendTransaction from \"./components/SendTransaction\";\nimport Positions from \"../Positions\";\n\nfunction Trade() {\n\treturn (\t\t\n\t\t<Box sx={{backgroundColor: 'rgba(9, 9, 10, 1)', py: 1, px: 1}}>\t\t\n\t\t\t<PriceHeader />\t\n\t\t\t<Box sx={{display: 'flex', flexDirection: {xs: 'column', md: 'row'}}}>\n\t\t\t\t<Box sx={{boxSizing: 'border-box', flexGrow: '1',\n\t\t\t\t\tbackgroundColor: \"rgba(29, 29, 29, 1)\", borderRadius: '10px', p: '12px'}}\n\t\t\t\t>\n\t\t\t\t\t<Positions />\n\t\t\t\t</Box>\n\t\t\t\t<Box sx={{width: {xs: '100%', md: '360px'}, \n\t\t\t\t\tboxSizing: 'border-box',\n\t\t\t\t\tbackgroundColor: \"rgba(29, 29, 29, 1)\",\n\t\t\t\t\tborderRadius: '10px', px: '12px', pb: '12px', ml: {md: 1}, mt: {xs: 1, md: '0px'}}}\n\t\t\t\t>\n\t\t\t\t\t<SideSwitcher />\t\t\t\n\t\t\t\t\t<Collateral />\n\t\t\t\t\t<Slippage />\n\t\t\t\t\t<SendTransaction />\n\t\t\t\t</Box>\t\t\t\t\n\t\t\t</Box>\n\t\t</Box>\t\t\n\t)\n}\n\nexport default Trade;","import React from 'react';\nimport ConnectMenu from \"./Header\";\nimport Trade from \"./Pages/Trade\";\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ConnectMenu />   \n      <Trade />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Web3ContextProvider } from \"./hooks/web3Context\";\nimport {Trade} from './container/trade';\nimport { AMM } from './container/amm';\n\nconst Providers = ((...providers: any[]) => ({ children }: { children: React.ReactNode }) => {\n  return providers.reduceRight((providers, provider) => {\n      const Provider = provider.component || provider\n      const props = provider.props || {}\n      return <Provider {...props}>{providers}</Provider>\n  }, children)\n})(  \n  Trade.Provider,  \n  AMM.Provider\n)\n\nReactDOM.render(\n  <React.StrictMode>    \n    <Web3ContextProvider>\n      <Providers>\n      <App />      \n      </Providers>\n    </Web3ContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}